{"version":3,"sources":["apis/axiosClient.js","apis/authApi.js","components/Auth/ForgotPassword/ForgotPassword.jsx","reducers/authSlice.js","components/Auth/Login/Login.jsx","components/Auth/Register/Register.jsx","components/Auth/RenewPassword/RenewPassword.jsx","reducers/adminSlice.js","reducers/librarianSlice.js","components/Auth/Logout/Logout.jsx","components/Admin/AdminPage/AdminPage.jsx","components/Admin/DashBoard/DashBoard.jsx","apis/productsApi.js","components/customComponents/CheckBoxItems/CheckBoxAuthor.jsx","components/customComponents/CheckBoxItems/CheckBoxCategory.jsx","components/Admin/Manage/Books/AddBooks/AddBooks.jsx","components/customComponents/InputForms/SearchForm/SearchBooksAdmin.jsx","reducers/bookSlice.js","components/customComponents/Modals/ModalHandle/ModalDeleteBookId.jsx","components/Admin/Manage/Books/DeleteBooks/DeleteBooks.jsx","components/customComponents/Modals/ModalForm/ModalUpdateBookById.jsx","components/Admin/Manage/Books/UpdateBooksById/UpdateBooksById.jsx","components/customComponents/Modals/ModalHandle/ModalIncreaseBooks.jsx","components/Admin/Manage/Books/IncreaseBooks/IncreaseBooks.jsx","components/customComponents/Modals/ModalForm/ModalViewBookDetails.jsx","components/Admin/Manage/Books/ViewBookDetails/ViewBookDetails.jsx","constants/RenderDate.js","components/customComponents/PaginationItems/PaginationItems.jsx","components/Admin/Manage/Books/ViewBooks/ViewBooks.jsx","apis/reportsApi.js","components/Admin/Manage/Reports/ReportActivities/BookReports/BooksReportstoExcel.jsx","components/Admin/Manage/Reports/ReportActivities/BookReports/BookReports.jsx","components/Admin/Manage/Reports/ReportActivities/BookReports/BooksReportsOverall.jsx","components/Admin/Manage/Reports/ReportActivities/ReservationReports/ReservationReportstoExcel.jsx","components/Admin/Manage/Reports/ReportActivities/ReservationReports/ReservationReports.jsx","components/Admin/Manage/Reports/ReportActivities/ReservationReports/ReservationReportsOverall.jsx","components/Admin/Manage/Reports/ReportActivities/UserReports/UserReportstoExcel.jsx","components/Admin/Manage/Reports/ReportActivities/UserReports/UserReports.jsx","components/Admin/Manage/Reports/ReportActivities/UserReports/UserReportsOverall.jsx","components/Admin/Manage/Reports/ReportActivities/ReportActivities.jsx","components/Admin/Manage/Reports/ReportLibrarian/ReportLibrarianToExcel.jsx","components/Admin/Manage/Reports/ReportLibrarian/ReportLibrarian.jsx","apis/adminApi.js","components/Admin/Manage/Users/CreateUser/CreateUser.jsx","components/customComponents/InputForms/SearchForm/SearchUsersAdmin.jsx","components/customComponents/Modals/ModalHandle/ModalDeleteUserId.jsx","components/Admin/Manage/Users/DeleteUser/DeleteUser.jsx","components/customComponents/Modals/ModalForm/ModalUpdateUserInfo.jsx","components/Admin/Manage/Users/UpdateUser/UpdateUser.jsx","components/customComponents/Modals/ModalForm/ModalViewUserDetails.jsx","components/Admin/Manage/Users/UserDetails/UserDetails.jsx","components/Admin/Manage/Users/ViewUser/ViewUser.jsx","containers/Admin/Admin.jsx","apis/userApi.jsx","reducers/userSlice.js","components/customComponents/ButtonHandleCarts/ButtonAddCarts.jsx","components/HomePage/Contains/BookRelate/BookByAuthor.jsx","components/HomePage/Header/Footer/Footer.jsx","components/HomePage/Contains/BookRelate/BookByCategories.jsx","components/HomePage/Contains/BookDetails/BookDetails.jsx","assets/icons/logo.png","components/customComponents/Carts/Carts.jsx","components/customComponents/TooltipItems/TooltipItems.jsx","components/customComponents/DropdownItems/DropdownItems.jsx","components/HomePage/Header/Navigation/Navigation.jsx","components/HomePage/Header/Header/Header.jsx","assets/images/carousel1.webp","assets/images/carousel2.webp","assets/images/carousel3.webp","components/HomePage/Pages/About/About.jsx","components/HomePage/Pages/Contact/Contact.jsx","components/customComponents/InputForms/SearchForm/SearchForm.jsx","components/HomePage/Contains/BookHome/BookHome.jsx","components/HomePage/Pages/DanhMuc/DanhMuc.jsx","components/HomePage/Pages/Rating/Rating.jsx","components/HomePage/Pages/MainPage/MainPage.jsx","containers/HomePage/MainHome/MainHome.jsx","containers/HomePage/NotFound/NotFound.jsx","components/Librarian/HomeLibrarian/HomeLibrarian.jsx","components/Librarian/LibrarianDashBoard/LibrarianDashBoard.jsx","components/Librarian/Manage/Books/ReservationBook/ConfirmReservation/CheckBooks/CheckBooks.jsx","components/Librarian/Manage/Books/ReservationBook/ConfirmReservation/ModalCheckBooks/ModalCheckBooks.jsx","components/Librarian/Manage/Books/ReservationBook/ConfirmReservation/ModalCheckout/ModalCheckout.jsx","components/Librarian/Manage/Books/ReservationBook/CheckoutBooks.jsx","components/Librarian/Manage/Books/ReturnBooks/ReturnBooks.jsx","components/Librarian/Manage/Books/ViewBorrowingBooks/ViewBorrowingBooks.jsx","components/customComponents/Modals/ModalForm/ModalReservationDetails.jsx","components/Librarian/Manage/Books/ViewReservation/ViewReservationDetails/ViewReservationDetails.jsx","components/Librarian/Manage/Books/ViewReservation/ViewReservation.jsx","components/Librarian/Manage/Books/ViewReturnBooks/ViewReturnBooks.jsx","containers/Librarian/Librarian.jsx","components/Auth/VerifyEmail/VerifyEmail.jsx","components/customComponents/ButtonHandleCarts/ButtonChooseCarts.jsx","components/customComponents/ButtonHandleCarts/ButtonDeleteCarts.jsx","components/User/MyCarts/MyCarts.jsx","components/Auth/ActiveEmail/ActiveEmail.jsx","components/User/Profile/Profile.jsx","components/User/Reservation/Reservation.jsx","components/User/ResetPassword/ResetPassword.jsx","components/User/ViewHistoryReserved/ViewHistoryReserved.jsx","containers/User/User.jsx","routes/customRoutes/AdminRoute.jsx","routes/customRoutes/AuthRoute.jsx","routes/customRoutes/LibrarianRoute.jsx","routes/customRoutes/UserRoute.jsx","App.js","reducers/store.js","index.js"],"names":["refreshToken","JSON","parse","localStorage","getItem","token","accountApi","postRefreshToken","axiosClient","axios","create","baseURL","process","headers","interceptors","request","use","a","config","params","response","data","error","status","setItem","stringify","access","refresh","Promise","reject","getInfoUser","id","url","get","postRegister","account","post","ACCOUNT_API_ENDPOINT","postLogout","postLogin","postResetPasword","password","postForgotPasword","email","sendVerificationEmail","verificationEmail","ForgotPassword","history","useHistory","useState","setEmail","err","setErr","currentURL","window","location","href","Forgot_Password","dataResetPassword","redirectUrl","message","className","Form","onSubmit","e","preventDefault","onClick","push","Group","controlId","Label","Control","name","type","placeholder","onChange","target","value","to","Button","variant","authSlice","createSlice","initialState","auth","reducers","loginIn","state","action","payload","logOut","actions","selectUser","Login","userLogin","setUserLogin","show","setShow","dispatch","useDispatch","dataLogin","user","tokens","checkRoute","console","log","role","Check","label","Register","userRegister","setUserRegister","infoUser","RenewPassword","document","title","setPassword","passwordConfirm","setPasswordConfirm","useLocation","tokenActive","URLSearchParams","search","resetPassword","style","width","adminSlice","totalUsers","sessionStorage","users","getUsers","deleteUserById","addUserById","selectTotalUsers","admin","librarianSlice","carts","userId","getUserId","createCarts","addCarts","newCarts","some","bookId","alert","deleteCarts","newItemsFromCarts","filter","book","selectCartCheckout","librarian","Logout","logoutToken","tokenOut","clear","AdminPage","useSelector","DashBoard","useEffect","handleShow","exact","Accordion","defaultActiveKey","onSelect","Item","eventKey","Header","Body","activeClassName","PRODUCTS_API_ENDPOINT","productsApi","getBooks","bookInfo","postCreateBook","postDeleteBookById","delete","updateBookById","infoBooks","patch","searchBooks","getAuthorName","getCategoriesName","getBooksById","getCheckCopies","copiesId","postCopies","postCopiesCheckout","userInfo","getCopiesBorrowing","infoBorrow","getCopiesReturn","infoReturn","postCopiesReturn","CheckBoxAuthor","onAuthorName","authorNames","setAuthorNames","results","adminCheckBox","map","adminName","index","Select","disabled","CheckBoxCategory","onCategoryName","AddBooks","isShow","onShow","setTitle","loanPeriodDays","setLoanPeriodDays","copies","setCopies","authors","setAuthors","categories","setCategories","description","setDescription","postImage","setPostImage","setError","createBooks","formData","FormData","append","handleReset","handleClose","setShowAuthor","setShowCategories","showAuthor","showCategories","Modal","onHide","files","authorName","categoriesName","SearchBooksAdmin","onChangeInfo","onUpdate","update","typingRef","useRef","searchInfo","setSearchInfo","current","clearTimeout","setTimeout","categoryName","productSlice","books","totalBooks","totalResults","getTotalBooks","deleteBookById","cartItem","addBookById","selectBooks","isUpdateCarts","selectTotalBooks","ModalDeleteBookId","bookName","deleteBookId","dialogClassName","Title","Footer","DeleteBooks","onChangePage","fontSize","color","ModalUpdateBookById","bookDetails","UpdateBooksById","ModalIncreaseBooks","handleIncreaseBook","IncreaseBooks","ModalViewBookDetails","checkCopiesBooks","copy","barcode","RenderInfo","img","cover","src","alt","availableCopies","length","ViewBookDetails","renderDate","time","date","Date","dd","String","getUTCDate","padStart","mm","getUTCMonth","yyyy","getUTCFullYear","minutes","getUTCMinutes","slice","getUTCHours","renderDateNow","getDate","getMonth","getFullYear","getMinutes","getHours","renderDateSearch","renderStatus","renderActions","renderBarCode","barCode","PaginationItems","totalRows","limit","activePage","onChangeLimit","totalPage","Math","ceil","showPages","c","m","l","last","left","right","range","rangeWithDots","i","renderPagination","pageIndex","Pagination","active","handlePageChange","First","Last","ViewBooks","products","setProducts","setUpdate","setTotalBooks","limitPage","setLimitPage","newPage","setNewPage","handleChangePage","getAllProducts","handleUpdate","page","showBody","info","Table","striped","bordered","hover","newLimit","reportsApi","getReports","dateInfo","REPORT_API_ENDPOINT","getLibrarianActivities","exportBooksBorrowing","BooksReportstoExcel","dataChart","renderDataReservation","bookDate","day","table","filename","sheet","buttonText","display","BookReports","booksChart","setDataChart","renderObj","deleted","SachMoi","new","keyDeleted","Object","keys","keySachMoi","set","Set","newObj","sort","day_sort","prevDay","nextDay","replace","getTime","ComposedChart","height","XAxis","dataKey","stroke","YAxis","Tooltip","Legend","CartesianGrid","strokeDasharray","Bar","fill","barSize","BooksReportsOverall","booksPie","dataPie","setDataPie","setActiveIndex","newKeys","key","props","children","COLORS","RADIAN","PI","PieChart","Pie","isAnimationActive","cx","cy","labelLine","midAngle","innerRadius","outerRadius","percent","radius","x","cos","y","sin","textAnchor","dominantBaseline","toFixed","onMouseEnter","_","entry","Cell","ReservationReportstoExcel","reservationDate","ReservationReports","reservationsChart","reservation","canceled","fulfilled","Tong","overdue","pending","keyCanceled","keyFulfilled","keyTong","keyOverdue","keyPending","ReservationReportsOverall","reservedPie","UserReportstoExcel","renderDataUser","userDate","UserReports","usersChart","NguoiDungMoi","keyNguoiDungMoi","margin","top","bottom","scale","UserReportsOverall","usersPie","ReportActivities","startDay","setStartDay","endDay","setEndDay","setUsersChart","setReservationsChart","setBooksChart","setUsersPie","reservationsPie","setReservationsPie","setBooksPie","from","view","renderTime","ReportLibrarianToExcel","activitiesData","renderDateActivities","createdAt","textAlign","ReportLibrarian","activities","setActivities","activitiesToExcel","setActivitiesToExcel","sortBy","setSortBy","totalProducts","setTotalProducts","setPage","getActivities","renderFullActivity","totals","renderActivities","activity","USERS_API_ENDPOINT","adminApi","getAllUser","createUser","userIdInfo","updateUser","deleteUser","getUserCarts","addUserCarts","deleteUserCarts","createUserReservation","getUserReservation","getUserBooksReservation","userBookCheckout","CreateUser","notify","toast","position","POSITION","BOTTOM_LEFT","isRole","userCreate","setUserCreate","SearchUsersAdmin","ModalDeleteUserId","userEmail","deleteUserId","DeleteUser","ModalUpdateUserInfo","setName","setStatus","handlePassWord","updateUserInfo","UpdateUser","ModalViewUserDetails","userDetails","countExpired","countSuccess","uid","isEmailVerified","reservations","UserDetails","ViewUser","userItems","setUserItems","setTotalUsers","getAllUsers","showUsers","isActive","Admin","useRouteMatch","path","overflowY","component","USER_API_ENDPOINT","userApi","getInfoUsers","idUser","updateInfo","infoUpdate","userUpdateInfo","getCarts","postAddToCart","deleteBooksOfCart","postScheduledTimes","postSchedule","getSchedule","postDeleteReservation","reservedId","getBookReserved","userSlice","totalCarts","getMyCarts","getTotalCarts","deleteCartsId","addCartsId","newBookId","selectMyCarts","selectMyTotalCarts","ButtonAddCarts","product","BookByAuthor","breakPoints","itemsToShow","setBooks","getBookByAuthor","renderBooks","Card","Img","Text","split","handleViewDetail","BookByCategories","getBookByCategories","BookDetails","productDetails","setProductDetails","setAuthorName","setCategoriesName","pathname","getDetails","renderBook","details","Carts","isUser","myTotalCarts","cartCounts","setCartCounts","idUSer","OverlayTrigger","placement","overlay","Badge","bg","DropdownItems","Dropdown","Toggle","Menu","Divider","Navigation","smooth","showName","getName","UserForm","LogoMenu","About","Carousel","carousel1","carousel2","carousel3","Contact","SearchForm","gap","flex","BookHome","bookUpdate","getAllBooks","viewDetails","DanhMuc","Rating","MainPage","HomePage","isMounted","checkRole","NotFound","HomeLibrarian","LibrarianDashBoard","CheckBooks","onHandleShow","setBookId","bookIdInfo","setBookIdInfo","getInfoCopies","getInfoId","checkBookById","renderBtnCopies","usersId","every","handleAddCarts","renderBtnBookId","renderUser","_id","renderCopies","renderBookIdInfo","FloatingLabel","ModalCheckBooks","ModalCheckout","setBook","booksCart","handleDelete","checkoutBooks","CheckoutBooks","setUserId","hide","setHide","booksReserved","setBooksReserved","cartsCheckout","setCartsCheckout","getBookReservation","checkout","setCheckout","handleCheckout","handleBookId","checkCarts","findBookSId","findIndex","bookItems","splice","renderCarts","renderCartsCheckout","colSpan","visibility","renderCartsCheckoutUser","isCheckout","ReturnBooks","getCheckBookCopies","renderReservation","postReturnBook","bookid","handleReturnBooks","ViewBorrowingBooks","borrowing","setBorrowing","viewBorrowing","renderBorrowing","dueDate","handleSearchByName","exportBooks","marginLeft","marginRight","ModalReservationDetails","reservationDetails","RenderBody","createdDate","ViewReservationDetails","ViewReservation","reservationInfo","setReservationInfo","getAllUserReservations","ViewReturnBooks","returnedDate","Librarian","VerifyEmail","activeEmail","ButtonChooseCarts","bookCarts","makeReservation","resetMyCarts","ButtonDeleteCarts","MyCarts","getMyTotalCarts","setCarts","setSelectBooks","showMyCarts","handleClick","ActiveEmail","sendEmail","Profile","setUserInfo","getInfo","renderInfo","Reservation","setReservation","getReservation","handleCancelReservation","showReservation","booksInfo","ResetPassword","ViewHistoryReserved","viewHistoryReserved","User","AdminRoute","rest","isAdmin","render","AuthRoute","isLogin","LibrarianRoute","UserRoute","App","basename","configureStore","reducer","authReducer","booksReducer","adminReducer","librarianReducer","userReducer","ReactDOM","StrictMode","store","getElementById"],"mappings":"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","file":"static/js/main.d6b4ad38.chunk.js","sourcesContent":["// api/axiosClient.js\r\nimport axios from \"axios\";\r\nimport accountApi from \"./authApi\";\r\n// import queryString from \"query-string\";\r\n\r\nfunction refreshToken() {\r\n  const refreshToken = JSON.parse(localStorage.getItem(\"refresh\")).token;\r\n  return accountApi.postRefreshToken({ refreshToken: refreshToken });\r\n}\r\n\r\nconst axiosClient = axios.create({\r\n  baseURL: process.env.REACT_APP_API_URL,\r\n  headers: {\r\n    \"content-type\": \"application/json\",\r\n  },\r\n  //   paramsSerializer: (params) => queryString.stringify(params),\r\n});\r\n\r\naxiosClient.interceptors.request.use(async (config) => {\r\n  // Handle token here ...\r\n  config.params = config.params || {};\r\n\r\n  config.headers[\"Authorization\"] = ` Bearer ${\r\n    JSON.parse(localStorage.getItem(\"access\"))?.token\r\n  } `;\r\n  return config;\r\n});\r\n\r\n// axiosClient.interceptors.response.use(\r\n//   (response) => {\r\n//     if (response && response.data) {\r\n//       return response.data;\r\n//     }\r\n//     return response;\r\n//   },\r\n//   (error) => {\r\n//     // Handle errors\r\n//     throw error;\r\n//   }\r\n// );\r\n\r\n// axiosClient.interceptors.request.use(\r\n//   async (config) => {\r\n//     // Handle token here ...\r\n//     const token = getAccessToken();\r\n//     if (token) {\r\n//       config.headers[\"Authorization\"] = ` Bearer ${token}`;\r\n//     }\r\n//     return config;\r\n//   },\r\n//   (error) => {\r\n//     return Promise.reject(error);\r\n//   }\r\n// );\r\n\r\naxiosClient.interceptors.response.use(\r\n  (response) => {\r\n    if (response && response.data) {\r\n      return response.data;\r\n    }\r\n    return response;\r\n  },\r\n\r\n  async (error) => {\r\n    // Handle errors\r\n\r\n    if (error.response) {\r\n      //Call request token, access token expires\r\n      if (error.request.status === 401) {\r\n        try {\r\n          const response = await refreshToken();\r\n          //Thiết lập lại access token\r\n          localStorage.setItem(\"access\", JSON.stringify(response.access));\r\n          //Thiết lập lại refresh token\r\n          localStorage.setItem(\"refresh\", JSON.stringify(response.refresh));\r\n\r\n          //Test thử\r\n          // alert(\"refreshToken thành công\");\r\n        } catch (error) {\r\n          if (error.response && error.response.data) {\r\n            return Promise.reject(error.response.data);\r\n          }\r\n          return Promise.reject(error);\r\n        }\r\n      }\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\nexport default axiosClient;\r\n","import axiosClient from \"./axiosClient\";\r\n\r\nconst ACCOUNT_API_ENDPOINT = \"/auth\";\r\n\r\nconst accountApi = {\r\n  // fn: nhận thông tin user\r\n  getInfoUser: (id) => {\r\n    const url = `/users/${id}`;\r\n    return axiosClient.get(url);\r\n  },\r\n  // fn: đăng ký\r\n  postRegister: (account) => {\r\n    const url = ACCOUNT_API_ENDPOINT + \"/register\";\r\n    return axiosClient.post(url, account);\r\n  },\r\n\r\n  //fn: logout\r\n  postLogout: (token) => {\r\n    const url = ACCOUNT_API_ENDPOINT + \"/logout\";\r\n    return axiosClient.post(url, token);\r\n  },\r\n\r\n  // fn: đăng nhập\r\n  postLogin: (account) => {\r\n    const url = ACCOUNT_API_ENDPOINT + \"/login\";\r\n    return axiosClient.post(url, account);\r\n  },\r\n\r\n  //fn: reset password\r\n  postResetPasword: (token, password) => {\r\n    const url = ACCOUNT_API_ENDPOINT + \"/reset-password\";\r\n    return axiosClient.post(`${url}?token=${token}`, password);\r\n  },\r\n  // //fn: reset password\r\n  // postResetPasword: (password) => {\r\n  //   const url = ACCOUNT_API_ENDPOINT + \"/reset-password\";\r\n  //   return axiosClient.post(url, password);\r\n  // },\r\n  //fn: forgot password\r\n  postForgotPasword: (email) => {\r\n    const url = ACCOUNT_API_ENDPOINT + \"/forgot-password\";\r\n    return axiosClient.post(url, email);\r\n  },\r\n\r\n  //fn: gửi kích hoạt email\r\n  sendVerificationEmail: (email) => {\r\n    const url = ACCOUNT_API_ENDPOINT + \"/send-verification-email\";\r\n    return axiosClient.post(url, email);\r\n  },\r\n  //fn: Xác thực email\r\n  verificationEmail: (token) => {\r\n    const url = ACCOUNT_API_ENDPOINT + \"/verify-email\";\r\n    return axiosClient.post(`${url}?token=${token}`);\r\n  },\r\n  //fn: refresh-tokens\r\n  postRefreshToken: (token) => {\r\n    const url = ACCOUNT_API_ENDPOINT + \"/refresh-tokens\";\r\n    return axiosClient.post(url, token);\r\n  },\r\n};\r\n\r\nexport default accountApi;\r\n","import React, { useState } from \"react\";\r\nimport accountApi from \"apis/authApi\";\r\n\r\nimport { useHistory } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { Form, Button } from \"react-bootstrap\";\r\nimport { AiOutlineHome } from \"react-icons/ai\";\r\nimport \"../StyleForm.scss\";\r\n\r\nfunction ForgotPassword() {\r\n  const history = useHistory();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [err, setErr] = useState(\"\");\r\n\r\n  //url\r\n  const currentURL = window.location.href;\r\n\r\n  const Forgot_Password = async () => {\r\n    const dataResetPassword = {\r\n      ...email,\r\n      redirectUrl: `${currentURL}/renew-password`,\r\n    };\r\n    try {\r\n      await accountApi.postForgotPasword(dataResetPassword);\r\n      setErr(\"Lấy mật khẩu thành công, vui lòng kiểm tra email\");\r\n    } catch (error) {\r\n      setErr(error.response.data.message);\r\n      setErr(\"Lỗi thao tác, tiến hành lại sau\");\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    Forgot_Password();\r\n  };\r\n\r\n  return (\r\n    <div className=\"formMain\">\r\n      <div className=\"formMain_container\">\r\n        <Form className=\"formMenu\" onSubmit={handleSubmit}>\r\n          <div\r\n            className=\"mb-3 formMenu_title\"\r\n            onClick={() => history.push(\"/home\")}\r\n          >\r\n            <AiOutlineHome className=\"icon\" />\r\n            <legend className=\"title\">Quên mật khẩu</legend>\r\n          </div>\r\n          <Form.Group className=\"mb-3 formMenu_items\" controlId=\"formBasicName\">\r\n            <Form.Label className=\"mb-3 formMenu_items_name\">\r\n              Địa chỉ email\r\n            </Form.Label>\r\n            <Form.Control\r\n              name=\"email\"\r\n              className=\"mb-3 formMenu_items_value\"\r\n              type=\"email\"\r\n              placeholder=\"Nhập địa chỉ email đăng ký tài khoản\"\r\n              onChange={(e) => setEmail({ [e.target.name]: e.target.value })}\r\n            />\r\n          </Form.Group>\r\n          <div className=\" mb-3 formMenu_items_link\">\r\n            <p>\r\n              {err && (\r\n                <span>\r\n                  {err} <Link to=\"/login\">Quay Lại Đăng Nhập?</Link>\r\n                </span>\r\n              )}\r\n            </p>\r\n          </div>\r\n          <div className=\"formMenu_extraLinks\">\r\n            <Button\r\n              className=\"turnBack\"\r\n              variant=\"light\"\r\n              onClick={() => history.push(\"/login\")}\r\n            >\r\n              Quay Lại\r\n            </Button>\r\n            <Button className=\"forgotPassword\" variant=\"primary\" type=\"submit\">\r\n              Lấy lại mật khẩu\r\n            </Button>\r\n          </div>\r\n        </Form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ForgotPassword;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst authSlice = createSlice({\r\n  name: \"auth\",\r\n  initialState: {\r\n    auth: JSON.parse(localStorage.getItem(\"user\"))\r\n      ? JSON.parse(localStorage.getItem(\"user\"))\r\n      : null,\r\n  },\r\n  reducers: {\r\n    //login\r\n    loginIn(state, action) {\r\n      state.auth = action.payload;\r\n    },\r\n    //logout\r\n    logOut(state) {\r\n      state.auth = null;\r\n    },\r\n  },\r\n});\r\n\r\nexport const { loginIn, logOut } = authSlice.actions;\r\n\r\nexport const selectUser = (state) => state.auth.auth;\r\n\r\nexport default authSlice.reducer;\r\n","import accountApi from \"apis/authApi\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Button, Form } from \"react-bootstrap\";\r\nimport { AiOutlineHome } from \"react-icons/ai\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\n//redux\r\nimport { loginIn } from \"reducers/authSlice\";\r\nimport \"../StyleForm.scss\";\r\n\r\nfunction Login() {\r\n  const [userLogin, setUserLogin] = useState({\r\n    email: \"thuthu@gmail.com\",\r\n    password: \"12345678\",\r\n  });\r\n  const [err, setErr] = useState(\"\");\r\n  const [show, setShow] = useState(false);\r\n\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  const Login = async () => {\r\n    const dataLogin = { ...userLogin };\r\n    try {\r\n      const response = await accountApi.postLogin(dataLogin);\r\n      // console.log(\"success\", response);\r\n      //Trả về user, access-token, refresh token\r\n      const { user, tokens } = response;\r\n      const { access, refresh } = tokens;\r\n      //Lưu vào local-storage\r\n      user && localStorage.setItem(\"user\", JSON.stringify(user));\r\n      access && localStorage.setItem(\"access\", JSON.stringify(access));\r\n      refresh && localStorage.setItem(\"refresh\", JSON.stringify(refresh));\r\n      setErr(\"Đăng Nhập Thành Công\");\r\n      //Chuyển vào redux store\r\n      dispatch(loginIn(user));\r\n      //admin or user?\r\n      user && checkRoute(user);\r\n    } catch (error) {\r\n      console.log(\"err\", { error });\r\n      setErr(\"Tài khoản hoặc mật khẩu không chính xác\");\r\n    }\r\n  };\r\n\r\n  const checkRoute = (user) => {\r\n    if (user.role === \"admin\") {\r\n      history.push(\"/admin\");\r\n    } else if (user.role === \"user\") {\r\n      history.push(\"/\");\r\n    } else if (user.role === \"librarian\") {\r\n      history.push(\"/librarian\");\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    Login();\r\n  };\r\n\r\n  return (\r\n    <div className=\"formMain\">\r\n      <div className=\"formMain_container\">\r\n        <Form className=\"formMenu\" onSubmit={handleSubmit}>\r\n          <div className=\"mb-3 formMenu_title\">\r\n            <AiOutlineHome\r\n              className=\"icon\"\r\n              onClick={() => history.push(\"/home\")}\r\n            />\r\n            <legend className=\"title\">Đăng nhập tài khoản</legend>\r\n          </div>\r\n          <Form.Group\r\n            className=\"mb-3 formMenu_items\"\r\n            controlId=\"formBasicEmail\"\r\n          >\r\n            <Form.Label className=\"mb-3 formMenu_items_name\">\r\n              Địa chỉ email\r\n            </Form.Label>\r\n            <Form.Control\r\n              value={userLogin.email}\r\n              name=\"email\"\r\n              className=\"mb-3 formMenu_items_value\"\r\n              type=\"email\"\r\n              placeholder=\"Nhập địa chỉ email\"\r\n              onChange={(e) =>\r\n                setUserLogin({ ...userLogin, [e.target.name]: e.target.value })\r\n              }\r\n            />\r\n            {/* <Form.Text className=\"text-muted\">\r\n              We'll never share your email with anyone else.\r\n            </Form.Text> */}\r\n          </Form.Group>\r\n\r\n          <Form.Group\r\n            className=\"mb-3 formMenu_items\"\r\n            controlId=\"formBasicPassword\"\r\n          >\r\n            <Form.Label className=\"mb-3 formMenu_items_name\">\r\n              Mật khẩu\r\n            </Form.Label>\r\n            <Form.Control\r\n              value={userLogin.password}\r\n              name=\"password\"\r\n              className=\"mb-3 formMenu_items_value\"\r\n              type={show ? \"text\" : \"password\"}\r\n              placeholder=\"Nhập Mật Khẩu\"\r\n              onChange={(e) =>\r\n                setUserLogin({ ...userLogin, [e.target.name]: e.target.value })\r\n              }\r\n            />\r\n          </Form.Group>\r\n          <div className=\" mb-3 formMenu_items_link\">\r\n            <p>{err && <span>{err}</span>}</p>\r\n            <Link to=\"forgot-password\">Quên mật khẩu?</Link>\r\n          </div>\r\n          <Form.Group\r\n            className=\"mb-3 formMenu_items\"\r\n            controlId=\"formBasicCheckbox\"\r\n          >\r\n            <Form.Check\r\n              type=\"checkbox\"\r\n              label=\"Hiển thị mật khẩu\"\r\n              onChange={() => setShow(!show)}\r\n            />\r\n          </Form.Group>\r\n          <Button\r\n            className=\" mb-3 formMenu_btn\"\r\n            variant=\"primary\"\r\n            type=\"submit\"\r\n          >\r\n            Đăng Nhập\r\n          </Button>\r\n          <div className=\"formMenu_extraLinks\">\r\n            <Link to=\"/register\">Bạn chưa có tài khoản?</Link>\r\n          </div>\r\n        </Form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React, { useState } from \"react\";\r\nimport { Button, Form } from \"react-bootstrap\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\n\r\nimport accountApi from \"apis/authApi\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { loginIn } from \"reducers/authSlice\";\r\n\r\nimport { AiOutlineHome } from \"react-icons/ai\";\r\nimport \"../StyleForm.scss\";\r\n\r\nfunction Register() {\r\n  const [userRegister, setUserRegister] = useState({});\r\n  const [err, setErr] = useState(\"\");\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const Register = async () => {\r\n    const infoUser = { ...userRegister };\r\n    try {\r\n      const response = await accountApi.postRegister(infoUser);\r\n      // console.log(\"đăng kí thành công\", response);\r\n      //Trả về user, access-token, refresh token\r\n      const { user, tokens } = response;\r\n      const { access, refresh } = tokens;\r\n      //Chuyển vào redux store\r\n      dispatch(loginIn(user));\r\n      //Lưu vào local-storage\r\n      user && localStorage.setItem(\"user\", JSON.stringify(user));\r\n      access && localStorage.setItem(\"access\", JSON.stringify(access));\r\n      refresh && localStorage.setItem(\"refresh\", JSON.stringify(refresh));\r\n\r\n      setErr(\"Đăng kí thành công\");\r\n      history.push(\"/\");\r\n    } catch (error) {\r\n      setErr(error.response.data.message);\r\n      // console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    Register();\r\n  };\r\n  return (\r\n    <div className=\"formMain\">\r\n      <div className=\"formMain_container\">\r\n        <Form className=\"formMenu\" onSubmit={handleSubmit}>\r\n          <div className=\"mb-3 formMenu_title\">\r\n            <AiOutlineHome\r\n              className=\"icon\"\r\n              onClick={() => history.push(\"/home\")}\r\n            />\r\n            <legend className=\"title\">Đăng ký tài khoản</legend>\r\n          </div>\r\n\r\n          <Form.Group className=\"mb-3 formMenu_items\" controlId=\"formBasicName\">\r\n            <Form.Label className=\"mb-3 formMenu_items_name\">\r\n              Tên người dùng\r\n            </Form.Label>\r\n            <Form.Control\r\n              name=\"name\"\r\n              className=\"mb-3 formMenu_items_value\"\r\n              type=\"text\"\r\n              placeholder=\"Nhập tên người dùng\"\r\n              onChange={(e) =>\r\n                setUserRegister({\r\n                  ...userRegister,\r\n                  [e.target.name]: e.target.value,\r\n                })\r\n              }\r\n            />\r\n          </Form.Group>\r\n\r\n          <Form.Group\r\n            className=\"mb-3 formMenu_items\"\r\n            controlId=\"formBasicEmail\"\r\n          >\r\n            <Form.Label className=\"mb-3 formMenu_items_name\">\r\n              Địa chỉ email\r\n            </Form.Label>\r\n            <Form.Control\r\n              name=\"email\"\r\n              className=\"mb-3 formMenu_items_value\"\r\n              type=\"email\"\r\n              placeholder=\"Nhập địa chỉ email\"\r\n              onChange={(e) =>\r\n                setUserRegister({\r\n                  ...userRegister,\r\n                  [e.target.name]: e.target.value,\r\n                })\r\n              }\r\n            />\r\n          </Form.Group>\r\n          <Form.Group\r\n            className=\"mb-3 formMenu_items\"\r\n            controlId=\"formBasicPassword\"\r\n          >\r\n            <Form.Label className=\"mb-3 formMenu_items_name\">\r\n              Mật khẩu\r\n            </Form.Label>\r\n            <Form.Control\r\n              name=\"password\"\r\n              className=\"mb-3 formMenu_items_value\"\r\n              type=\"password\"\r\n              placeholder=\"Nhập Mật Khẩu\"\r\n              onChange={(e) =>\r\n                setUserRegister({\r\n                  ...userRegister,\r\n                  [e.target.name]: e.target.value,\r\n                })\r\n              }\r\n            />\r\n          </Form.Group>\r\n          <div className=\" mb-3 formMenu_items_link\">\r\n            <p>{err && <span>{err}</span>}</p>\r\n          </div>\r\n          <Button className=\"mb-3 formMenu_btn\" variant=\"success\" type=\"submit\">\r\n            Đăng Ký Tài Khoản\r\n          </Button>\r\n          <div className=\"formMenu_extraLinks\">\r\n            <Link to=\"/login\">Quay Trở Lại Đăng Nhập</Link>\r\n          </div>\r\n        </Form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import accountApi from \"apis/authApi\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Form, Button } from \"react-bootstrap\";\r\nimport { useHistory, useLocation } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction RenewPassword() {\r\n  document.title = \"Lấy lại mật khẩu\";\r\n\r\n  const [password, setPassword] = useState(\"\");\r\n  const [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n  const [err, setErr] = useState(\"\");\r\n\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  const tokenActive = new URLSearchParams(location.search).get(\"token\");\r\n  //   console.log(\"có chạy r\", tokenActive);\r\n  //   useEffect(() => {\r\n  //     activePassword();\r\n  //   }, []);\r\n\r\n  const resetPassword = async (password) => {\r\n    const params = { password: password };\r\n    try {\r\n      await accountApi.postResetPasword(tokenActive, params);\r\n      setErr(\"Lấy lại mật khẩu thành công\");\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n  const handleResetPassword = (e) => {\r\n    e.preventDefault();\r\n    if (!password || !passwordConfirm) {\r\n      setErr(\"Mật khẩu không được bỏ trống\");\r\n    } else if (password !== passwordConfirm) {\r\n      setErr(\"Mật khẩu xác nhận không chính xác\");\r\n    } else {\r\n      resetPassword(password);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"formMain\">\r\n      <div className=\"formMain_container\">\r\n        <Form className=\"formMenu\" onSubmit={handleResetPassword}>\r\n          <legend className=\"form_name\">Thay Đổi Mật Khẩu</legend>\r\n          <Form.Group className=\"mb-3 formMenu_items\">\r\n            <Form.Label className=\"formMenu_items_name\">\r\n              Nhập mật khẩu mới\r\n            </Form.Label>\r\n            <Form.Control\r\n              className=\"formMenu_items_value\"\r\n              name=\"title\"\r\n              type=\"password\"\r\n              placeholder=\"Nhập mật khẩu mới\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group className=\"mb-3 formMenu_items\">\r\n            <Form.Label className=\"formMenu_items_name\">\r\n              Nhập lại mật khẩu mới\r\n            </Form.Label>\r\n            <Form.Control\r\n              className=\"formMenu_items_value\"\r\n              name=\"title\"\r\n              type=\"password\"\r\n              placeholder=\"Xác nhận đúng mật khẩu mới\"\r\n              value={passwordConfirm}\r\n              onChange={(e) => setPasswordConfirm(e.target.value)}\r\n            />\r\n          </Form.Group>\r\n          <div className=\" mb-3 formMenu_items_link\">\r\n            <p>\r\n              {err && (\r\n                <span>\r\n                  {err} <Link to=\"/login\">Quay Lại Đăng Nhập?</Link>\r\n                </span>\r\n              )}\r\n            </p>\r\n          </div>\r\n          <Button type=\"submit\" variant=\"success\" style={{ width: \"100%\" }}>\r\n            Thay đổi mật khẩu\r\n          </Button>\r\n        </Form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RenewPassword;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst adminSlice = createSlice({\r\n  name: \"user\",\r\n  initialState: {\r\n    totalUsers: JSON.parse(sessionStorage.getItem(\"totalUsers\"))\r\n      ? JSON.parse(sessionStorage.getItem(\"totalUsers\"))\r\n      : null,\r\n    users: JSON.parse(sessionStorage.getItem(\"users\"))\r\n      ? JSON.parse(sessionStorage.getItem(\"users\"))\r\n      : null,\r\n  },\r\n  reducers: {\r\n    //get user\r\n    getUsers(state, action) {\r\n      state.users = action.payload;\r\n    },\r\n    //delete user\r\n    deleteUserById(state) {\r\n      state.totalUsers = state.totalUsers - 1;\r\n    },\r\n    //add user\r\n    addUserById(state) {\r\n      state.totalUsers = state.totalUsers + 1;\r\n    },\r\n  },\r\n});\r\n\r\nexport const { getUsers, deleteUserById, addUserById } = adminSlice.actions;\r\n\r\nexport const selectTotalUsers = (state) => state.admin.totalUsers;\r\nexport const selectAllUsers = (state) => state.admin.users;\r\n\r\nexport default adminSlice.reducer;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst librarianSlice = createSlice({\r\n  name: \"carts\",\r\n  initialState: {\r\n    carts: JSON.parse(localStorage.getItem(\"cartsCheckout\"))\r\n      ? JSON.parse(localStorage.getItem(\"cartsCheckout\"))\r\n      : [],\r\n    userId: JSON.parse(localStorage.getItem(\"userId\"))\r\n      ? JSON.parse(localStorage.getItem(\"userId\"))\r\n      : [],\r\n  },\r\n  reducers: {\r\n    //get id user\r\n    getUserId(state, action) {\r\n      state.userId = action.payload;\r\n      localStorage.setItem(\"userId\", JSON.stringify(state.userId));\r\n    },\r\n\r\n    //tạo carts để đặt cho user\r\n    createCarts(state, action) {\r\n      state.carts = action.payload;\r\n      localStorage.setItem(\"cartsCheckout\", JSON.stringify(state.carts));\r\n    },\r\n    //thêm vô carts\r\n    addCarts(state, action) {\r\n      var newCarts = [];\r\n      const checkCart = state.carts.some((bookId) => bookId === action.payload);\r\n\r\n      if (!checkCart) {\r\n        newCarts = [...state.carts, action.payload];\r\n        alert(\"Thêm thành công\");\r\n        state.carts = newCarts;\r\n        localStorage.setItem(\"cartsCheckout\", JSON.stringify(state.carts));\r\n      } else {\r\n        alert(\"Không thêm được\");\r\n      }\r\n    },\r\n    //xoá đi nếu user không muốn nữa\r\n    deleteCarts(state, action) {\r\n      // console.log(action.payload);\r\n      // console.log(\"còn đây là carts\", state.carts);\r\n      const newItemsFromCarts = state.carts.filter(\r\n        (book) => book !== action.payload\r\n      );\r\n\r\n      state.carts = newItemsFromCarts;\r\n      localStorage.setItem(\"cartsCheckout\", JSON.stringify(state.carts));\r\n      alert(\"xoá thành công\");\r\n    },\r\n  },\r\n});\r\n\r\nexport const { createCarts, addCarts, deleteCarts, getUserId } =\r\n  librarianSlice.actions;\r\nexport const selectCartCheckout = (state) => state.librarian.carts;\r\nexport const selectCartUserId = (state) => state.librarian.userId;\r\n\r\nexport default librarianSlice.reducer;\r\n","import accountApi from \"apis/authApi\";\r\nimport React from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router\";\r\nimport { getUsers } from \"reducers/adminSlice\";\r\nimport { logOut } from \"reducers/authSlice\";\r\nimport { createCarts } from \"reducers/librarianSlice\";\r\n// import \"./Logout.scss\";\r\n\r\nfunction Logout() {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  const Logout = async () => {\r\n    const logoutToken = JSON.parse(localStorage.getItem(\"refresh\"));\r\n    // const { token, expires } = logoutToken;\r\n    const { token } = logoutToken;\r\n    // post refresh token to logout\r\n    const tokenOut = { refreshToken: token };\r\n    // console.log(tokenOut);\r\n    try {\r\n      await accountApi.postLogout(tokenOut);\r\n\r\n      //clear user after logout\r\n      localStorage.clear();\r\n      sessionStorage.clear();\r\n      dispatch(createCarts([]));\r\n      dispatch(getUsers([]));\r\n      dispatch(logOut());\r\n      //return to Home Page\r\n      history.push(\"/\");\r\n    } catch (error) {\r\n      // alert(error);\r\n      console.log(\"thoát lỗi\", { error });\r\n    }\r\n  };\r\n  const handleLogout = () => {\r\n    Logout();\r\n  };\r\n\r\n  return (\r\n    <Button type=\"submit\" variant=\"danger\" onClick={handleLogout}>\r\n      Đăng xuất\r\n    </Button>\r\n  );\r\n}\r\n\r\nexport default Logout;\r\n","import Logout from \"components/Auth/Logout/Logout\";\r\nimport React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectUser } from \"reducers/authSlice\";\r\n\r\nimport { FaUserCircle } from \"react-icons/fa\";\r\nimport \"./AdminPage.scss\";\r\n\r\nfunction AdminPage() {\r\n  const admin = useSelector(selectUser);\r\n  return (\r\n    <div className=\"adminMenu\">\r\n      <div className=\"adminMenu_menu\">\r\n        <div className=\"adminMenu_menu_logo\">\r\n          <FaUserCircle className=\"icons\" />\r\n        </div>\r\n        <div className=\"adminMenu_menu_contents\">\r\n          <h2>Thông tin cá nhân</h2>\r\n          <div className=\"adminMenu_menu_contents_items\">\r\n            <span className=\"title\">\r\n              <strong>Họ và tên:</strong>\r\n            </span>\r\n            <span>{admin.name}</span>\r\n          </div>\r\n          <div className=\"adminMenu_menu_contents_items\">\r\n            <span className=\"title\">\r\n              <strong>Chức vụ:</strong>\r\n            </span>\r\n            <span>{admin.role}</span>\r\n          </div>\r\n          <div className=\"adminMenu_menu_contents_items\">\r\n            <span className=\"title\">\r\n              <strong>Ngày vô làm:</strong>\r\n            </span>\r\n            <span>\"Ngày chưa thiết lập\"</span>\r\n          </div>\r\n          {/* <div className=\"adminMenu_menu_contents_items\">\r\n            <Logout />\r\n          </div> */}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminPage;\r\n","import Logout from \"components/Auth/Logout/Logout\";\r\nimport React, { useEffect } from \"react\";\r\nimport { Accordion } from \"react-bootstrap\";\r\nimport { AiFillFileExcel } from \"react-icons/ai\";\r\n// import { GrUserSettings } from \"react-icons/gr\";\r\n// import { RiBookletFill } from \"react-icons/ri\";\r\nimport { FaBook, FaUserCog } from \"react-icons/fa\";\r\n//icon\r\nimport { MdOutlineAdminPanelSettings } from \"react-icons/md\";\r\nimport { Link, NavLink } from \"react-router-dom\";\r\nimport \"./DashBoard.scss\";\r\n\r\nfunction DashBoard({ url }) {\r\n  // console.log(\"dashboard\", url);\r\n  useEffect(() => {\r\n    handleShow();\r\n  }, []);\r\n\r\n  const handleShow = () => {\r\n    return localStorage.getItem(\"showItem\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"homeMenu\">\r\n        <div className=\"homeMenu_link\">\r\n          <Link to=\"/admin\" exact={true}>\r\n            {/* <ImHome className=\"iconItem\" /> */}\r\n            <MdOutlineAdminPanelSettings className=\"iconItem\" />\r\n            <span className=\"iconName\">Admin dashboard</span>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n      <Accordion\r\n        defaultActiveKey={handleShow}\r\n        onSelect={(e) => localStorage.setItem(\"showItem\", e)}\r\n      >\r\n        {/* Quản lý người dùng */}\r\n        <Accordion.Item eventKey=\"0\">\r\n          <Accordion.Header>\r\n            <FaUserCog className=\"iconItem\" />\r\n            Quản Lý Người Dùng\r\n          </Accordion.Header>\r\n          <Accordion.Body>\r\n            <NavLink to={`${url}/users`} exact={true} activeClassName=\"active\">\r\n              Danh sách người dùng\r\n            </NavLink>\r\n          </Accordion.Body>\r\n          <Accordion.Body>\r\n            <NavLink to={`${url}/users/create`} activeClassName=\"active\">\r\n              Tạo người dùng mới\r\n            </NavLink>\r\n          </Accordion.Body>\r\n        </Accordion.Item>\r\n\r\n        {/* Quản Lý Sách */}\r\n        <Accordion.Item eventKey=\"1\">\r\n          <Accordion.Header>\r\n            {/* <RiBookletFill className=\"iconItem\" /> */}\r\n            <FaBook className=\"iconItem\" />\r\n            Quản Lý Sách\r\n          </Accordion.Header>\r\n          <Accordion.Body>\r\n            <NavLink to={`${url}/books`} exact={true} activeClassName=\"active\">\r\n              Thông tin sách thư viện\r\n            </NavLink>\r\n          </Accordion.Body>\r\n        </Accordion.Item>\r\n        {/* Quản Lý Báo Cáo */}\r\n        <Accordion.Item eventKey=\"2\">\r\n          <Accordion.Header>\r\n            {/* <AiTwotoneFileText className=\"iconItem\" /> */}\r\n            <AiFillFileExcel className=\"iconItem\" />\r\n            Quản Báo Cáo\r\n          </Accordion.Header>\r\n          <Accordion.Body>\r\n            <NavLink to={`${url}/report`} activeClassName=\"active\" exact={true}>\r\n              Thống kê hoạt động\r\n            </NavLink>\r\n          </Accordion.Body>\r\n          <Accordion.Body>\r\n            <NavLink to=\"/admin/report/activities\" activeClassName=\"active\">\r\n              Hoạt động thủ thư\r\n            </NavLink>\r\n          </Accordion.Body>\r\n        </Accordion.Item>\r\n      </Accordion>\r\n\r\n      <div className=\"logout\">\r\n        <Logout />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DashBoard;\r\n","import axiosClient from \"./axiosClient\";\r\nconst PRODUCTS_API_ENDPOINT = \"/books\";\r\n\r\nconst productsApi = {\r\n  // fn: lấy danh sách các đầu sách\r\n  getBooks: (bookInfo) => {\r\n    const url = PRODUCTS_API_ENDPOINT;\r\n    return axiosClient.get(url, { params: bookInfo });\r\n  },\r\n\r\n  //tạo sách mới\r\n  postCreateBook: (bookInfo) => {\r\n    const url = PRODUCTS_API_ENDPOINT;\r\n    return axiosClient.post(url, bookInfo);\r\n  },\r\n  //xoá sách\r\n  postDeleteBookById: (bookId) => {\r\n    const url = `${PRODUCTS_API_ENDPOINT}/${bookId}`;\r\n    return axiosClient.delete(url);\r\n  },\r\n  //Update book byId\r\n  updateBookById: (bookId, infoBooks) => {\r\n    const url = `${PRODUCTS_API_ENDPOINT}/${bookId}`;\r\n    return axiosClient.patch(url, infoBooks);\r\n  },\r\n  //Search books\r\n  searchBooks: (bookInfo) => {\r\n    const url = `${PRODUCTS_API_ENDPOINT}`;\r\n    return axiosClient.get(url, { params: bookInfo });\r\n  },\r\n\r\n  //Lấy tên tác giả\r\n  getAuthorName: () => {\r\n    const url = PRODUCTS_API_ENDPOINT + \"/authors\";\r\n    return axiosClient.get(url);\r\n  },\r\n  //Lấy tên danh mục\r\n  getCategoriesName: () => {\r\n    const url = PRODUCTS_API_ENDPOINT + \"/categories\";\r\n    return axiosClient.get(url);\r\n  },\r\n\r\n  //get books by Id\r\n  getBooksById: (id) => {\r\n    const url = `${PRODUCTS_API_ENDPOINT}/${id}`;\r\n    return axiosClient.get(url);\r\n  },\r\n\r\n  //Librarian, admin\r\n\r\n  //Check mã sách\r\n  getCheckCopies: (copiesId) => {\r\n    const url = `${PRODUCTS_API_ENDPOINT}/copies/${copiesId}`;\r\n    return axiosClient.get(url);\r\n  },\r\n  //Tạo 1 bản sao cho sách\r\n  postCopies: (bookId) => {\r\n    const url = `${PRODUCTS_API_ENDPOINT}/${bookId}/copies`;\r\n    return axiosClient.post(url);\r\n  },\r\n\r\n  //Cho người mượn sách\r\n  postCopiesCheckout: (userInfo) => {\r\n    const url = `${PRODUCTS_API_ENDPOINT}/copies/checkout`;\r\n    return axiosClient.post(url, userInfo);\r\n  },\r\n  //Lấy các bản sao sách đang được mượn\r\n  getCopiesBorrowing: (infoBorrow) => {\r\n    const url = `${PRODUCTS_API_ENDPOINT}/copies/borrowing`;\r\n    return axiosClient.get(url, { params: infoBorrow });\r\n  },\r\n  //Lấy các bản sao sách đã trả\r\n  getCopiesReturn: (infoReturn) => {\r\n    const url = `${PRODUCTS_API_ENDPOINT}/copies/returned`;\r\n    return axiosClient.get(url, { params: infoReturn });\r\n  },\r\n\r\n  //Cho người dùng trả sách\r\n  postCopiesReturn: (bookInfo) => {\r\n    const url = `${PRODUCTS_API_ENDPOINT}/copies/return`;\r\n    return axiosClient.post(url, bookInfo);\r\n  },\r\n};\r\n\r\nexport default productsApi;\r\n","import productsApi from \"apis/productsApi\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Form } from \"react-bootstrap\";\r\n\r\nfunction CheckBoxAuthor({ onAuthorName, status }) {\r\n  // console.log(\"trang author checkbox\", status);\r\n  const [authorNames, setAuthorNames] = useState(null);\r\n  //render lại\r\n  useEffect(() => {\r\n    getAuthorName();\r\n  }, []);\r\n\r\n  const getAuthorName = async () => {\r\n    try {\r\n      const response = await productsApi.getAuthorName();\r\n      //   console.log(\"đã nhận được tên tác giả\", response);\r\n      setAuthorNames(response.results);\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n  const adminCheckBox = authorNames?.map((adminName, index) => {\r\n    if (adminName) {\r\n      return <option key={index}>{adminName}</option>;\r\n    }\r\n  });\r\n\r\n  return (\r\n    <Form.Select\r\n      disabled={status}\r\n      name=\"authors\"\r\n      className=\"formSearchAdmin_search_items\"\r\n      onChange={(e) => onAuthorName({ [e.target.name]: e.target.value })}\r\n    >\r\n      <option value=\" \">Tên tác giả</option>\r\n      {adminCheckBox}\r\n    </Form.Select>\r\n  );\r\n}\r\n\r\nexport default CheckBoxAuthor;\r\n","import productsApi from \"apis/productsApi\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Form } from \"react-bootstrap\";\r\n\r\nfunction CheckBoxCategory({ onCategoryName, status }) {\r\n  // console.log(\"categories\", status);\r\n  const [authorNames, setAuthorNames] = useState(null);\r\n  //render lại\r\n  useEffect(() => {\r\n    getAuthorName();\r\n  }, []);\r\n\r\n  const getAuthorName = async () => {\r\n    try {\r\n      const response = await productsApi.getCategoriesName();\r\n      //   console.log(\"đã nhận được tên tác giả\", response);\r\n      setAuthorNames(response.results);\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n  const adminCheckBox = authorNames?.map((adminName, index) => {\r\n    if (adminName) {\r\n      return <option key={index}>{adminName}</option>;\r\n    }\r\n  });\r\n\r\n  return (\r\n    <Form.Select\r\n      disabled={status}\r\n      name=\"categories\"\r\n      className=\"formSearchAdmin_search_items\"\r\n      onChange={(e) => onCategoryName({ [e.target.name]: e.target.value })}\r\n    >\r\n      <option value=\" \">Thể loại</option>\r\n      {adminCheckBox}\r\n    </Form.Select>\r\n  );\r\n}\r\n\r\nexport default CheckBoxCategory;\r\n","import productsApi from \"apis/productsApi\";\r\nimport \"components/Admin/Manage/AddForm.scss\";\r\nimport CheckBoxAuthor from \"components/customComponents/CheckBoxItems/CheckBoxAuthor\";\r\nimport CheckBoxCategory from \"components/customComponents/CheckBoxItems/CheckBoxCategory\";\r\nimport React, { useState } from \"react\";\r\nimport { Button, Form, Modal } from \"react-bootstrap\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nfunction AddBooks({ isShow, onShow }) {\r\n  // const [bookCreate, setBookCreate] = useState({});\r\n\r\n  //Tên sách\r\n  const [title, setTitle] = useState(\"\");\r\n  //Số ngày mượn\r\n  const [loanPeriodDays, setLoanPeriodDays] = useState(\"\");\r\n  //Số lượng\r\n  const [copies, setCopies] = useState(\"\");\r\n  //Tên tác giả\r\n  const [authors, setAuthors] = useState(\"\");\r\n  //Tiêu đề\r\n  const [categories, setCategories] = useState(\"\");\r\n  //Mô tả\r\n  const [description, setDescription] = useState(\"\");\r\n  //Ảnh\r\n  const [postImage, setPostImage] = useState();\r\n\r\n  const [error, setError] = useState(\"\");\r\n  const createBooks = async () => {\r\n    // const infoBookCreate = { ...bookCreate, ...postImage };\r\n    // console.log(\"đây là info sách muốn nhập\", infoBookCreate);\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"cover\", postImage);\r\n    formData.append(\"title\", title);\r\n    formData.append(\"loanPeriodDays\", loanPeriodDays);\r\n    formData.append(\"copies\", copies);\r\n    formData.append(\"authors\", authors);\r\n    formData.append(\"categories\", categories);\r\n    formData.append(\"description\", description);\r\n\r\n    // console.log(\"đây là formData\", formData.entries());\r\n    try {\r\n      await productsApi.postCreateBook(formData);\r\n      // const response = await productsApi.postCreateBook(formData);\r\n      // console.log(\"tạo sách thành công\", response);\r\n      // setError(\"Tạo sách thành công\");\r\n      setError(\"\");\r\n      alert(\"Tạo thành công\");\r\n      //Truyền vô redux\r\n      // dispatch(addBookById(response));\r\n      //reset lại\r\n      handleReset();\r\n      //Tắt form\r\n      onShow(false);\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n      // setError(error.response.data.message);\r\n      //Tắt form\r\n      onShow(false);\r\n    }\r\n  };\r\n\r\n  //Xử lí ảnh\r\n  const handleImgPost = (e) => {\r\n    setPostImage(e.target.files[0]);\r\n  };\r\n\r\n  const handleReset = () => {\r\n    setCopies(\"\");\r\n    setDescription(\"\");\r\n    setLoanPeriodDays(\"\");\r\n    setTitle(\"\");\r\n    setAuthors(\"\");\r\n    // setPostImage(\"\");\r\n    setCategories(\"\");\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    createBooks();\r\n    // console.log(\"đã nhận được\", authors, categories);\r\n  };\r\n\r\n  //Thiết lập cho cha\r\n  const handleClose = () => {\r\n    setShowAuthor(false);\r\n    setShowCategories(false);\r\n    onShow(false);\r\n  };\r\n  const handleAuthorsName = (authorName) => {\r\n    // console.log(\"cha đã nhận được authorname\", authorName);\r\n    setAuthors(authorName.authors);\r\n  };\r\n  const handleCategoriesName = (categoriesName) => {\r\n    // console.log(\"cha đã nhận được authorname\", categoriesName);\r\n    setCategories(categoriesName.categories);\r\n  };\r\n\r\n  //Dùng để disabled authors, actegories\r\n  const [showAuthor, setShowAuthor] = useState(false);\r\n  const [showCategories, setShowCategories] = useState(false);\r\n\r\n  return (\r\n    <Modal show={isShow} onHide={handleClose}>\r\n      {/* <Modal.Header>\r\n        <Modal.Title>Nhập sách mới</Modal.Title>\r\n      </Modal.Header> */}\r\n      <Modal.Body>\r\n        <Form className=\"form\" onSubmit={handleSubmit}>\r\n          {error && <h2>{error}</h2>}\r\n          <legend className=\"form_name\">Tạo mới một đầu sách</legend>\r\n          <Form.Group className=\"mb-3 form_items\"></Form.Group>\r\n\r\n          {/* Tên sách */}\r\n          <Form.Group className=\"mb-3 form_items\">\r\n            <Form.Label className=\"form_items_label\">Tên sách</Form.Label>\r\n            <Form.Control\r\n              value={title}\r\n              name=\"title\"\r\n              className=\"form_items_input\"\r\n              type=\"text\"\r\n              placeholder=\"Nhập tên tên sách\"\r\n              onChange={(e) => setTitle(e.target.value)}\r\n            />\r\n          </Form.Group>\r\n\r\n          {/* Ảnh bìa */}\r\n          <Form.Group className=\"mb-3 form_items\">\r\n            <Form.Label className=\"form_items_label\">\r\n              Ảnh bìa của sách\r\n            </Form.Label>\r\n            <Form.Control\r\n              // value={postImage}\r\n              name=\"cover\"\r\n              className=\"form_items_input\"\r\n              type=\"file\"\r\n              onChange={handleImgPost}\r\n            />\r\n          </Form.Group>\r\n\r\n          {/* Form tác giả */}\r\n\r\n          {/* Checkbox */}\r\n          <Form.Group className=\"mb-3 form_items\">\r\n            <Form.Label className=\"form_items_label\">Tác giả</Form.Label>\r\n            <CheckBoxAuthor\r\n              onAuthorName={handleAuthorsName}\r\n              status={showAuthor}\r\n            />\r\n          </Form.Group>\r\n\r\n          {/* new */}\r\n          <Form.Group className=\"mb-3 form_items\">\r\n            <Form.Label className=\"form_items_label\"></Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              className=\"form_items_newInput\"\r\n              placeholder=\"Nhập tên tác giả mới\"\r\n              disabled={!showAuthor}\r\n              onChange={(e) => setAuthors(e.target.value)}\r\n            />\r\n            <Form.Check\r\n              className=\"form_items_check\"\r\n              label=\"Tác giả mới\"\r\n              onClick={() => setShowAuthor(!showAuthor)}\r\n            />\r\n          </Form.Group>\r\n\r\n          {/* Form thể loại */}\r\n\r\n          {/* Checkbox */}\r\n          <Form.Group className=\"mb-3 form_items\">\r\n            <Form.Label className=\"form_items_label\">Thể loại</Form.Label>\r\n            <CheckBoxCategory\r\n              onCategoryName={handleCategoriesName}\r\n              status={showCategories}\r\n            />\r\n          </Form.Group>\r\n\r\n          {/* new */}\r\n          <Form.Group className=\"mb-3 form_items\">\r\n            <Form.Label className=\"form_items_label\"></Form.Label>\r\n            <Form.Control\r\n              className=\"form_items_newInput\"\r\n              placeholder=\"Nhập tên thể loại mới\"\r\n              disabled={!showCategories}\r\n              type=\"text\"\r\n              onChange={(e) => setCategories(e.target.value)}\r\n            />\r\n            <Form.Check\r\n              className=\"form_items_check\"\r\n              label=\"Thể loại mới\"\r\n              onClick={() => setShowCategories(!showCategories)}\r\n            />\r\n          </Form.Group>\r\n\r\n          {/* Mô tả */}\r\n          <Form.Group className=\"mb-3 form_items\">\r\n            <Form.Label className=\"form_items_label\">Mô tả</Form.Label>\r\n            <Form.Control\r\n              value={description}\r\n              name=\"description\"\r\n              className=\"form_items_input\"\r\n              type=\"text\"\r\n              placeholder=\"Nhập tên mô tả\"\r\n              onChange={(e) => setDescription(e.target.value)}\r\n            />\r\n          </Form.Group>\r\n\r\n          {/* Số ngày mượn sách */}\r\n          <Form.Group className=\"mb-3 form_items\">\r\n            <Form.Label className=\"form_items_label\">\r\n              Số ngày mượn sách\r\n            </Form.Label>\r\n            <Form.Control\r\n              value={loanPeriodDays}\r\n              name=\"loanPeriodDays\"\r\n              className=\"form_items_input\"\r\n              type=\"text\"\r\n              placeholder=\"Nhập số ngày mà người mượn có thể mượn sách\"\r\n              onChange={(e) => setLoanPeriodDays(e.target.value)}\r\n            />\r\n          </Form.Group>\r\n\r\n          {/* Số lượng sách */}\r\n          <Form.Group className=\"mb-3 form_items\">\r\n            <Form.Label className=\"form_items_label\">Số lượng</Form.Label>\r\n            <Form.Control\r\n              value={copies}\r\n              name=\"copies\"\r\n              className=\"form_items_input\"\r\n              type=\"text\"\r\n              placeholder=\"Nhập số lượng\"\r\n              onChange={(e) => setCopies(e.target.value)}\r\n            />\r\n          </Form.Group>\r\n\r\n          {/* Button handle */}\r\n          <div className=\"btnSubmit\">\r\n            <Button type=\"submit\" variant=\"primary\">\r\n              Thêm sách mới\r\n            </Button>\r\n            <Button variant=\"danger\" onClick={handleReset}>\r\n              Nhập lại\r\n            </Button>\r\n            <Button variant=\"secondary\" onClick={handleClose}>\r\n              Quay lại\r\n            </Button>\r\n          </div>\r\n        </Form>\r\n      </Modal.Body>\r\n      {/* <Modal.Footer></Modal.Footer> */}\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default AddBooks;\r\n","import AddBooks from \"components/Admin/Manage/Books/AddBooks/AddBooks\";\r\nimport CheckBoxAuthor from \"components/customComponents/CheckBoxItems/CheckBoxAuthor\";\r\nimport CheckBoxCategory from \"components/customComponents/CheckBoxItems/CheckBoxCategory\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Button, Form } from \"react-bootstrap\";\r\nimport { BsPlusLg } from \"react-icons/bs\";\r\nimport { GoSearch } from \"react-icons/go\";\r\n\r\nimport \"./SearchForm.scss\";\r\n\r\nfunction SearchBooksAdmin({ onChangeInfo, onUpdate, update }) {\r\n  //Debounce typing\r\n  const typingRef = useRef(null);\r\n\r\n  //Search Form\r\n  const [searchInfo, setSearchInfo] = useState({});\r\n\r\n  //Xử lý tên tác giả\r\n  const handleAuthorsName = (authorName) => {\r\n    const { authors } = authorName;\r\n    setSearchInfo({ ...searchInfo, authors });\r\n  };\r\n  //Xử lý tên danh mục\r\n  const handleCategoriesName = (categoryName) => {\r\n    const { categories } = categoryName;\r\n    setSearchInfo({ ...searchInfo, categories });\r\n  };\r\n\r\n  //Modal\r\n  const [show, setShow] = useState(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  const onShow = (isShow) => {\r\n    setShow(isShow);\r\n\r\n    // Để reset lúc thêm sách\r\n    onUpdate(!update);\r\n  };\r\n\r\n  useEffect(() => {\r\n    onChangeInfo(searchInfo);\r\n  }, [searchInfo]);\r\n\r\n  const handleSubmit = () => {\r\n    onChangeInfo(searchInfo);\r\n  };\r\n\r\n  const handleForm = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  const handleSearchByName = (e) => {\r\n    const name = e.target.name;\r\n    const value = e.target.value;\r\n\r\n    if (typingRef.current) {\r\n      clearTimeout(typingRef.current);\r\n    }\r\n\r\n    typingRef.current = setTimeout(() => {\r\n      setSearchInfo({\r\n        ...searchInfo,\r\n        [name]: value,\r\n      });\r\n    }, 500);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Form className=\"formSearch\" onSubmit={handleForm}>\r\n        <div className=\"inputForm\">\r\n          {/* Tìm kiếm bằng tên sách */}\r\n          <Form.Group className=\"inputForm_items\">\r\n            <Form.Label className=\"inputForm_items_label\">Tên sách</Form.Label>\r\n            <Form.Control\r\n              name=\"title\"\r\n              className=\"inputForm_items_control\"\r\n              placeholder=\"Nhập tên sách bạn muốn tìm\"\r\n              onChange={handleSearchByName}\r\n            />\r\n          </Form.Group>\r\n          {/* Nút tìm kiếm */}\r\n          <Button\r\n            variant=\"primary\"\r\n            className=\"inputForm_button\"\r\n            type=\"submit\"\r\n            onClick={() => handleSubmit()}\r\n          >\r\n            <GoSearch className=\"icon\" />\r\n            <span className=\"title\">Tìm kiếm</span>\r\n          </Button>\r\n\r\n          {/* Nút thêm sách */}\r\n          <Button\r\n            className=\"inputForm_button\"\r\n            type=\"submit\"\r\n            onClick={handleShow}\r\n          >\r\n            <BsPlusLg className=\"icon\" />\r\n            <span className=\"title\">Thêm sách</span>\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Tìm kiếm bằng sortBy */}\r\n        <div className=\"checkboxForm\">\r\n          <Form.Group className=\"checkboxForm_items\">\r\n            <Form.Label className=\"checkboxForm_items_label\">\r\n              Sắp xếp\r\n            </Form.Label>\r\n            <Form.Select\r\n              name=\"sortBy\"\r\n              className=\"checkboxForm_items_control\"\r\n              onChange={(e) =>\r\n                setSearchInfo({\r\n                  ...searchInfo,\r\n                  [e.target.name]: e.target.value,\r\n                })\r\n              }\r\n            >\r\n              <option value=\"title:asc\">Tăng dần</option>\r\n              <option value=\"title:desc\">Giảm dần</option>\r\n            </Form.Select>\r\n          </Form.Group>\r\n          {/* Tìm kiếm bằng tên tác giả */}\r\n          <Form.Group className=\"checkboxForm_items\">\r\n            <CheckBoxAuthor onAuthorName={handleAuthorsName} />\r\n          </Form.Group>\r\n          {/* Tìm kiếm bằng danh mục */}\r\n          <Form.Group className=\"checkboxForm_items\">\r\n            <CheckBoxCategory onCategoryName={handleCategoriesName} />\r\n          </Form.Group>\r\n        </div>\r\n      </Form>\r\n\r\n      {/* modal */}\r\n      <AddBooks onShow={onShow} isShow={show} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SearchBooksAdmin;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst productSlice = createSlice({\r\n  name: \"cartItems\",\r\n  initialState: {\r\n    //book from carts\r\n    books: JSON.parse(sessionStorage.getItem(\"books\"))\r\n      ? JSON.parse(sessionStorage.getItem(\"books\")).results\r\n      : null,\r\n    //quantity of books from carts\r\n    totalBooks: JSON.parse(sessionStorage.getItem(\"books\"))\r\n      ? JSON.parse(sessionStorage.getItem(\"books\")).totalResults\r\n      : null,\r\n    // isUpdate: false,\r\n  },\r\n  reducers: {\r\n    //Nhận books khi load lại Cart từ api\r\n    getBooks(state, action) {\r\n      state.books = action.payload;\r\n    },\r\n    //Nhận số lượng of books khi load lại Cart từ api\r\n    getTotalBooks(state, action) {\r\n      state.totalBooks = action.payload;\r\n    },\r\n    //Xoá books\r\n    deleteBookById(state, action) {\r\n      const newItemsFromCarts = state.books.filter(\r\n        (cartItem) => cartItem.id !== action.payload\r\n      );\r\n      // console.log(\"đây là từ delete redux\", newItemsFromCarts);\r\n      state.totalBooks = state.totalBooks - 1;\r\n      state.books = newItemsFromCarts;\r\n      sessionStorage.setItem(\"books\", JSON.stringify(state.books));\r\n    },\r\n    //Add books\r\n    addBookById(state, action) {\r\n      var newCarts = [];\r\n      const checkCart = state.books.some(\r\n        (bookId) => bookId.id === action.payload\r\n      );\r\n      //Nếu như không tìm ra => thêm\r\n      // console.log(checkCart);\r\n\r\n      if (!checkCart) {\r\n        newCarts = [...state.carts, action.payload];\r\n        alert(\"Thêm thành công\");\r\n        state.books = newCarts;\r\n        sessionStorage.setItem(\"books\", JSON.stringify(state.books));\r\n      } else {\r\n        alert(\"Không thêm được\");\r\n      }\r\n    },\r\n\r\n    //   const newBookId = action.payload;\r\n    //   const newItemsFromCarts = [...state.books, newBookId];\r\n\r\n    //   state.totalBooks = state.totalBooks + 1;\r\n    //   state.books = newItemsFromCarts;\r\n    //   sessionStorage.setItem(\"books\", JSON.stringify(state.books));\r\n    // },\r\n  },\r\n});\r\n\r\nexport const {\r\n  getBooks,\r\n  getTotalBooks,\r\n  deleteBookById,\r\n  addBookById,\r\n  isUpdateCarts,\r\n} = productSlice.actions;\r\n\r\nexport const selectBooks = (state) => state.books.books;\r\nexport const selectTotalBooks = (state) => state.books.totalBooks;\r\n\r\nexport default productSlice.reducer;\r\n","import productsApi from \"apis/productsApi\";\r\nimport React from \"react\";\r\nimport { Button, Modal } from \"react-bootstrap\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { deleteBookById } from \"reducers/bookSlice\";\r\n\r\nimport \"./ModalHandle.scss\";\r\n\r\nfunction ModalDeleteBookId({ isShow, bookId, onShow, bookName }) {\r\n  //Delete books by id\r\n  const dispatch = useDispatch();\r\n  const deleteBookId = async () => {\r\n    const id = bookId;\r\n    // console.log(id);\r\n    try {\r\n      await productsApi.postDeleteBookById(id);\r\n      alert(\"Xoá thành công\");\r\n      dispatch(deleteBookById(id));\r\n      // console.log(\"Thành công\");\r\n\r\n      onShow(false);\r\n    } catch (error) {\r\n      console.log(\"có lỗi\", { error });\r\n    }\r\n  };\r\n  const handleClick = () => {\r\n    // console.log(\"đã lấy được Id\", bookId);\r\n    deleteBookId();\r\n  };\r\n\r\n  //Thiết lập cho cha\r\n  const handleClose = () => {\r\n    return onShow(false);\r\n  };\r\n  return (\r\n    <Modal show={isShow} onHide={handleClose} dialogClassName=\"modal-30w\">\r\n      <Modal.Header>\r\n        <Modal.Title>Tiến hành xoá sách</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        Xoá sách có tên là\r\n        <strong> {bookName}</strong>, bạn có chắc chắn xoá không?\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"danger\" onClick={handleClick}>\r\n          Xoá sách\r\n        </Button>\r\n        <Button variant=\"secondary\" onClick={handleClose}>\r\n          Quay lại\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default ModalDeleteBookId;\r\n","import ModalDeleteBookId from \"components/customComponents/Modals/ModalHandle/ModalDeleteBookId\";\r\nimport React, { useState } from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\n\r\nimport { GoTrashcan } from \"react-icons/go\";\r\n\r\nfunction DeleteBooks({ bookId, bookName, onUpdate, update, onChangePage }) {\r\n  const [show, setShow] = useState(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  //Nhận props từ con\r\n  const onShow = (isShow) => {\r\n    setShow(isShow);\r\n    onUpdate(!update);\r\n    onChangePage(1);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button variant=\"none\" onClick={handleShow}>\r\n        <GoTrashcan style={{ fontSize: \"30px\", color: \"red\" }} />\r\n      </Button>\r\n\r\n      <ModalDeleteBookId\r\n        onShow={onShow}\r\n        isShow={show}\r\n        bookName={bookName}\r\n        bookId={bookId}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DeleteBooks;\r\n","import productsApi from \"apis/productsApi\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Button, Form, Modal } from \"react-bootstrap\";\r\nimport \"./ModalsForm.scss\";\r\n\r\nfunction ModalUpdateBookById({ isShow, onShow, bookDetails }) {\r\n  //Thiết lập cho cha\r\n  const handleClose = () => {\r\n    return onShow(false);\r\n  };\r\n\r\n  //Tên sách\r\n  const [title, setTitle] = useState(bookDetails.title);\r\n  //Số ngày mượn\r\n  const [loanPeriodDays, setLoanPeriodDays] = useState(\r\n    bookDetails.loanPeriodDays\r\n  );\r\n  // //Số lượng\r\n  // const [copies, setCopies] = useState(\"\");\r\n  //Tên tác giả\r\n  const [authors, setAuthors] = useState(bookDetails.authors);\r\n  //Tiêu đề\r\n  const [categories, setCategories] = useState(bookDetails.categories);\r\n  //Mô tả\r\n  const [description, setDescription] = useState(bookDetails.description);\r\n\r\n  const [postImage, setPostImage] = useState();\r\n\r\n  //Xử lí file ảnh\r\n  const handleImgPost = (e) => {\r\n    setPostImage(e.target.files[0]);\r\n  };\r\n\r\n  const updateBookById = async () => {\r\n    const bookId = bookDetails.id;\r\n\r\n    const formData = new FormData();\r\n\r\n    if (postImage) {\r\n      formData.append(\"cover\", postImage);\r\n    }\r\n\r\n    formData.append(\"title\", title);\r\n    formData.append(\"loanPeriodDays\", loanPeriodDays);\r\n    // formData.append(\"copies\", copies);\r\n    formData.append(\"authors\", authors);\r\n    formData.append(\"categories\", categories);\r\n    formData.append(\"description\", description);\r\n    try {\r\n      await productsApi.updateBookById(bookId, formData);\r\n      onShow(false);\r\n      alert(\"Cập nhật thông tin sách thành công\");\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n      alert(error.response.data.message);\r\n      onShow(false);\r\n    }\r\n  };\r\n\r\n  // console.log(\"cập nhật thông tin cho book có id: \", bookDetails);\r\n  const handleClick = () => {\r\n    updateBookById();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Modal show={isShow} onHide={handleClose}>\r\n        <Modal.Header>\r\n          <span className=\"title\">Thay đổi thông tin sách</span>\r\n          <span className=\"note\">(Chỉ nhập thông tin cần thay đổi)</span>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <Form className=\"formMenu\">\r\n            {/* Tên sách */}\r\n            <Form.Group className=\"formMenu_items\">\r\n              <Form.Label className=\"formMenu_items_label\">Tên sách</Form.Label>\r\n              <Form.Control\r\n                value={title}\r\n                type=\"text\"\r\n                placeholder=\"Nhập tên sách\"\r\n                className=\"formMenu_items_control\"\r\n                onChange={(e) => setTitle(e.target.value)}\r\n              />\r\n            </Form.Group>\r\n            {/* Ảnh bìa */}\r\n            <Form.Group className=\"formMenu_items\">\r\n              <Form.Label className=\"formMenu_items_label\">Ảnh bìa</Form.Label>\r\n              <Form.Control\r\n                name=\"cover\"\r\n                className=\"formMenu_items_control\"\r\n                type=\"file\"\r\n                onChange={handleImgPost}\r\n              />\r\n            </Form.Group>\r\n            {/* Tác giả */}\r\n            <Form.Group className=\"formMenu_items\">\r\n              <Form.Label className=\"formMenu_items_label\">Tác giả</Form.Label>\r\n              <Form.Control\r\n                value={authors}\r\n                type=\"text\"\r\n                placeholder=\"Nhập tên tác giả\"\r\n                className=\"formMenu_items_control\"\r\n                onChange={(e) => setAuthors(e.target.value)}\r\n              />\r\n            </Form.Group>\r\n            {/* Thể loại */}\r\n            <Form.Group className=\"formMenu_items\">\r\n              <Form.Label className=\"formMenu_items_label\">Thể loại</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                value={categories}\r\n                placeholder=\"Nhập thể loại sách\"\r\n                className=\"formMenu_items_control\"\r\n                onChange={(e) => setCategories(e.target.value)}\r\n              />\r\n            </Form.Group>\r\n            {/* Mô tả */}\r\n            <Form.Group className=\"formMenu_items\">\r\n              <Form.Label className=\"formMenu_items_label\">Mô tả</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                value={description}\r\n                placeholder=\"Nhập mô tả\"\r\n                className=\"formMenu_items_control\"\r\n                onChange={(e) => setDescription(e.target.value)}\r\n              />\r\n            </Form.Group>\r\n            {/* Số ngày mượn */}\r\n            <Form.Group className=\"formMenu_items\">\r\n              <Form.Label className=\"formMenu_items_label\">\r\n                Số ngày mượn sách\r\n              </Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                value={loanPeriodDays}\r\n                placeholder=\"Nhập số ngày mượn sách\"\r\n                className=\"formMenu_items_control\"\r\n                onChange={(e) => setLoanPeriodDays(e.target.value)}\r\n              />\r\n            </Form.Group>\r\n          </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"success\" onClick={handleClick}>\r\n            Thay đổi thông tin\r\n          </Button>\r\n          <Button variant=\"secondary\" onClick={handleClose}>\r\n            Quay lại\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ModalUpdateBookById;\r\n","import ModalUpdateBookById from \"components/customComponents/Modals/ModalForm/ModalUpdateBookById\";\r\nimport React, { useState } from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\n\r\nimport { FaEdit } from \"react-icons/fa\";\r\n\r\nfunction UpdateBooksById({ bookDetails, onUpdate, update }) {\r\n  const [show, setShow] = useState(false);\r\n\r\n  const handleShow = () => {\r\n    setShow(true);\r\n  };\r\n\r\n  //Nhận props từ con\r\n  const onShow = (isShow) => {\r\n    setShow(isShow);\r\n    onUpdate(!update);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button variant=\"none\" onClick={handleShow}>\r\n        <FaEdit style={{ fontSize: \"30px\", color: \"#045B21\" }} />\r\n      </Button>\r\n      <ModalUpdateBookById\r\n        bookDetails={bookDetails}\r\n        onShow={onShow}\r\n        isShow={show}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default UpdateBooksById;\r\n","import React from \"react\";\r\nimport productsApi from \"apis/productsApi\";\r\nimport { Modal, Button } from \"react-bootstrap\";\r\n\r\nimport \"./ModalHandle.scss\";\r\n\r\nfunction ModalIncreaseBooks({ isShow, onShow, bookName, bookId }) {\r\n  const handleClose = () => {\r\n    return onShow(false);\r\n  };\r\n\r\n  const handleIncreaseBook = async () => {\r\n    try {\r\n      await productsApi.postCopies(bookId);\r\n      onShow(false);\r\n      alert(\"Thêm sách thành công\");\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal show={isShow} onHide={handleClose}>\r\n      <Modal.Header>\r\n        <Modal.Title>Tăng số lượng</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        Xác nhận số lượng cho <strong> {bookName}</strong>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"primary\" onClick={handleIncreaseBook}>\r\n          Tăng số lượng\r\n        </Button>\r\n        <Button variant=\"secondary\" onClick={handleClose}>\r\n          Quay lại\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default ModalIncreaseBooks;\r\n","import ModalIncreaseBooks from \"components/customComponents/Modals/ModalHandle/ModalIncreaseBooks\";\r\nimport React, { useState } from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\n\r\nimport { GoPlus } from \"react-icons/go\";\r\n\r\nfunction IncreaseBooks({ bookId, bookName, onUpdate, update }) {\r\n  const [show, setShow] = useState(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  //Nhận props từ con\r\n  const onShow = (isShow) => {\r\n    setShow(isShow);\r\n    onUpdate(!update);\r\n  };\r\n  return (\r\n    <div>\r\n      <Button variant=\"none\" onClick={handleShow}>\r\n        <GoPlus style={{ fontSize: \"30px\", color: \"#0d6efd\" }} />\r\n      </Button>\r\n\r\n      <ModalIncreaseBooks\r\n        onShow={onShow}\r\n        isShow={show}\r\n        bookId={bookId}\r\n        bookName={bookName}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default IncreaseBooks;\r\n","import React from \"react\";\r\nimport { Modal, Button } from \"react-bootstrap\";\r\n\r\nfunction ModalViewBookDetails({ isShow, onShow, bookDetails }) {\r\n  // console.log(bookDetails);\r\n  const handleClose = () => {\r\n    return onShow(false);\r\n  };\r\n\r\n  //render components\r\n  const countCopies = (copies) => {\r\n    return copies?.length;\r\n  };\r\n  const checkCopiesBooks = (copies) => {\r\n    // console.log(copies);\r\n    return copies.map((copy) => {\r\n      if (copy.status === \"available\") {\r\n        // return <span> {copy._id}</span>;\r\n        return <span> {copy.barcode}</span>;\r\n      }\r\n    });\r\n  };\r\n\r\n  const renderImg = (img) => {\r\n    return <img src={img} alt=\"img\" />;\r\n  };\r\n\r\n  const RenderInfo = () => {\r\n    return (\r\n      <div className=\"detailsMenu\">\r\n        <div className=\"detailsMenu_cover\">{renderImg(bookDetails.cover)}</div>\r\n\r\n        <div className=\"detailsMenu_contents\">\r\n          <div>\r\n            <strong>Tên sách: </strong>\r\n            {bookDetails.title}\r\n          </div>\r\n          <div>\r\n            <strong>Mã ID sách:</strong> {bookDetails.id}\r\n          </div>\r\n          <div>\r\n            <strong>Tác giả:</strong> {bookDetails.authors}\r\n          </div>\r\n          <div>\r\n            <strong>Thể loại:</strong> {bookDetails.categories}\r\n          </div>\r\n          <div>\r\n            <strong>Thời gian mượn:</strong> {bookDetails.loanPeriodDays} ngày\r\n          </div>\r\n          <div>\r\n            <strong>Số lượng còn lại</strong> {bookDetails.availableCopies}/\r\n            {countCopies(bookDetails.copies)}\r\n          </div>\r\n          <div className=\"copies\">\r\n            <div className=\"nameCopies\">\r\n              <strong>Mã sách còn trống:</strong>\r\n            </div>\r\n            <div className=\"nameCopiesId\">\r\n              {checkCopiesBooks(bookDetails.copies)}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Modal show={isShow} onHide={handleClose}>\r\n      <Modal.Header>\r\n        <Modal.Title>Thông tin chi tiết sách</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <RenderInfo />\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={handleClose}>\r\n          Đóng\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default ModalViewBookDetails;\r\n","import ModalViewBookDetails from \"components/customComponents/Modals/ModalForm/ModalViewBookDetails\";\r\nimport React, { useState } from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\n\r\nimport { GoInfo } from \"react-icons/go\";\r\n\r\nfunction ViewBookDetails({ bookDetails }) {\r\n  const [show, setShow] = useState(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  //Nhận props từ con\r\n  const onShow = (isShow) => {\r\n    setShow(isShow);\r\n  };\r\n  return (\r\n    <>\r\n      <Button variant=\"none\" onClick={handleShow}>\r\n        <GoInfo style={{ fontSize: \"30px\", color: \"#714FFC\" }} />\r\n      </Button>\r\n      <ModalViewBookDetails\r\n        onShow={onShow}\r\n        isShow={show}\r\n        bookDetails={bookDetails}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ViewBookDetails;\r\n","// dd-mm-yy\r\nexport const renderDate = (time) => {\r\n  const date = new Date(time);\r\n  var dd = String(date.getUTCDate()).padStart(2, \"0\");\r\n  var mm = String(date.getUTCMonth() + 1).padStart(2, \"0\");\r\n  //January is 0!\r\n  var yyyy = date.getUTCFullYear();\r\n\r\n  //time\r\n  // var minutes = date.getUTCMinutes();\r\n  // var hours = date.getUTCHours();\r\n  var minutes = (\"0\" + date.getUTCMinutes()).slice(-2);\r\n  var hours = (\"0\" + date.getUTCHours()).slice(-2);\r\n\r\n  return dd + \"/\" + mm + \"/\" + yyyy + \" lúc \" + hours + \":\" + minutes;\r\n};\r\n\r\nexport const renderDateNow = (time) => {\r\n  const date = new Date(time);\r\n  var dd = String(date.getDate()).padStart(2, \"0\");\r\n  var mm = String(date.getMonth() + 1).padStart(2, \"0\");\r\n  //January is 0!\r\n  var yyyy = date.getFullYear();\r\n\r\n  //time\r\n  var minutes = (\"0\" + date.getMinutes()).slice(-2);\r\n  var hours = (\"0\" + date.getHours()).slice(-2);\r\n\r\n  return dd + \"/\" + mm + \"/\" + yyyy + \" lúc \" + hours + \":\" + minutes;\r\n};\r\n\r\nexport const renderDateSearch = (time) => {\r\n  const date = new Date(time);\r\n  var dd = String(date.getUTCDate()).padStart(2, \"0\");\r\n  var mm = String(date.getUTCMonth() + 1).padStart(2, \"0\");\r\n  //January is 0!\r\n  var yyyy = date.getUTCFullYear();\r\n\r\n  return dd + \"/\" + mm + \"/\" + yyyy;\r\n};\r\n\r\n//Pagination\r\nexport const renderPagination = (c, m) => {\r\n  var current = c,\r\n    last = m,\r\n    delta = 2,\r\n    left = current - delta,\r\n    right = current + delta + 1,\r\n    range = [],\r\n    rangeWithDots = [],\r\n    l;\r\n\r\n  for (let i = 1; i <= last; i++) {\r\n    if (i === 1 || i === last || (i >= left && i < right)) {\r\n      range.push(i);\r\n    }\r\n  }\r\n\r\n  for (let i of range) {\r\n    if (l) {\r\n      if (i - l === 2) {\r\n        rangeWithDots.push(l + 1);\r\n      } else if (i - l !== 1) {\r\n        rangeWithDots.push(\"...\");\r\n      }\r\n    }\r\n    rangeWithDots.push(i);\r\n    l = i;\r\n  }\r\n\r\n  return rangeWithDots;\r\n};\r\n\r\n// render status\r\nexport const renderStatus = (status) => {\r\n  switch (status) {\r\n    //Lịch hẹn\r\n    case \"pending\":\r\n      return <>Đang hẹn</>;\r\n    case \"fulfilled\":\r\n      return <>Thành công</>;\r\n    case \"expired\":\r\n      return <>Hết hạn</>;\r\n\r\n    //Trạng thái sách\r\n    case \"returned\":\r\n      return <>Đã trả</>;\r\n    case \"available\":\r\n      return <>Đang trống</>;\r\n    case \"borrowing\":\r\n      return <>Đang mượn</>;\r\n    case \"borrowed\":\r\n      return <>Đang mượn</>;\r\n    case \"canceled\":\r\n      return <>Đã huỷ</>;\r\n    default:\r\n      return <>{status} </>;\r\n  }\r\n};\r\n\r\n// render activities\r\nexport const renderActions = (actions) => {\r\n  switch (actions) {\r\n    //Sách\r\n    case \"import\":\r\n      return <> Nhập sách</>;\r\n    case \"delete_book\":\r\n      return <> Xoá sách</>;\r\n    case \"update_book\":\r\n      return <> Cập nhật sách</>;\r\n    case \"lease\":\r\n      return <> Cho mượn sách</>;\r\n    case \"receive\":\r\n      return <> Nhận lại sách</>;\r\n    //Người dùng\r\n    case \"create_user\":\r\n      return <> Tạo người dùng</>;\r\n    case \"update_user\":\r\n      return <> Cập nhật người dùng</>;\r\n    case \"delete_user\":\r\n      return <> Xoá người dùng</>;\r\n    default:\r\n      return <>{actions}</>;\r\n  }\r\n};\r\n\r\nexport const renderBarCode = (barCode, id) => {\r\n  if (barCode) {\r\n    return <>{barCode}</>;\r\n  } else {\r\n    return <>{id}</>;\r\n  }\r\n};\r\n\r\n\r\nexport const renderCheckActive = (active) => {\r\n  if (active === \"active\") {\r\n    return <> Kích hoạt </>\r\n  }\r\n  if (active === \"inactive\") {\r\n    return <> Không kích hoạt </>\r\n  }\r\n}","import { renderPagination } from \"constants/RenderDate\";\r\nimport React, { useState } from \"react\";\r\nimport { Form, Pagination } from \"react-bootstrap\";\r\n\r\nimport \"./PaginationItems.scss\";\r\n\r\nfunction PaginationItems({\r\n  totalRows,\r\n  limit,\r\n  onChangePage,\r\n  activePage,\r\n  onChangeLimit,\r\n}) {\r\n  //Tổng số trang\r\n  const totalPage = Math.ceil(totalRows / limit);\r\n\r\n  // const rowPage = () => {\r\n  //   const res = [];\r\n  //   for (var pages = 1; pages <= totalPage; pages++) {\r\n  //     res.push(pages);\r\n  //   }\r\n  //   return res;\r\n  // };\r\n\r\n  // const showPages = rowPage()?.map((pageIndex, index) => {\r\n  //   return (\r\n  //     <Pagination.Item\r\n  //       key={index}\r\n  //       active={pageIndex === activePage}\r\n  //       onClick={() => handlePageChange(pageIndex)}\r\n  //     >\r\n  //       {pageIndex}\r\n  //     </Pagination.Item>\r\n  //   );\r\n  // });\r\n\r\n  const showPages = renderPagination(activePage, totalPage)?.map(\r\n    (pageIndex, index) => {\r\n      return (\r\n        <Pagination.Item\r\n          key={index}\r\n          active={pageIndex === activePage}\r\n          onClick={() => handlePageChange(pageIndex)}\r\n        >\r\n          {pageIndex}\r\n        </Pagination.Item>\r\n      );\r\n    }\r\n  );\r\n\r\n  const handlePageChange = (pageIndex) => {\r\n    //Truyền cho cha\r\n    onChangePage(pageIndex);\r\n  };\r\n\r\n  return (\r\n    <div className=\"paginationForm\">\r\n      <Form className=\"formSelect\">\r\n        <Form.Select\r\n          className=\"select\"\r\n          onChange={(e) => onChangeLimit(e.target.value)}\r\n        >\r\n          <option value=\"5\">5</option>\r\n          <option value=\"10\">10</option>\r\n          <option value=\"15\">15</option>\r\n        </Form.Select>\r\n      </Form>\r\n      <Pagination>\r\n        <Pagination.First\r\n          onClick={() => onChangePage(1)}\r\n          disabled={activePage === 1}\r\n        />\r\n        {showPages}\r\n        <Pagination.Last\r\n          onClick={() => onChangePage(totalPage)}\r\n          disabled={activePage === totalPage}\r\n        />\r\n      </Pagination>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PaginationItems;\r\n","import productsApi from \"apis/productsApi\";\r\n\r\nimport SearchFormAdmin from \"components/customComponents/InputForms/SearchForm/SearchBooksAdmin\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Table } from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getBooks, selectBooks, selectTotalBooks } from \"reducers/bookSlice\";\r\nimport DeleteBooks from \"../DeleteBooks/DeleteBooks\";\r\nimport UpdateBooksById from \"../UpdateBooksById/UpdateBooksById\";\r\n\r\nimport IncreaseBooks from \"../IncreaseBooks/IncreaseBooks\";\r\nimport ViewBookDetails from \"../ViewBookDetails/ViewBookDetails\";\r\n\r\nimport PaginationItems from \"components/customComponents/PaginationItems/PaginationItems\";\r\n\r\nimport \"components/Admin/Manage/ViewForm.scss\";\r\n\r\nfunction ViewBooks() {\r\n  document.title = \"Thông tin sách thư viện\";\r\n\r\n  // const books = useSelector(selectBooks);\r\n  //Để search\r\n  const [searchInfo, setSearchInfo] = useState();\r\n  //Để render\r\n  const [products, setProducts] = useState();\r\n  //Để update\r\n  const [update, setUpdate] = useState(false);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  //Pagination\r\n  const [totalBooks, setTotalBooks] = useState();\r\n  const [limitPage, setLimitPage] = useState(5);\r\n  const [newPage, setNewPage] = useState(1);\r\n\r\n  //Chuyển trang mới\r\n  const handleChangePage = (newPage) => {\r\n    setNewPage(newPage);\r\n  };\r\n  const handleLimitChange = (newLimit) => {\r\n    setNewPage(1);\r\n    setLimitPage(newLimit);\r\n  };\r\n\r\n  //Search Info\r\n  const handleInfo = (info) => {\r\n    // console.log(\"search info này\", info);\r\n    setNewPage(1);\r\n    setSearchInfo(info);\r\n  };\r\n\r\n  //Nhận số lượng thay đổi của cart => reset carts\r\n  const totalCarts = useSelector(selectTotalBooks);\r\n\r\n  //Lần 1 get all products\r\n  useEffect(() => {\r\n    getAllProducts();\r\n  }, [newPage, limitPage, searchInfo, update]);\r\n\r\n  //Lần 2 reset sau khi search\r\n  // useEffect(() => {\r\n  //   setProducts(books);\r\n  // }, [books]);\r\n\r\n  //render components\r\n  const imgShow = (img) => {\r\n    return <img src={img} alt=\"img\" />;\r\n  };\r\n\r\n  //Nhập giá trị update sau khi thay đổi\r\n  const handleUpdate = (status) => {\r\n    setUpdate(status);\r\n  };\r\n\r\n  const getAllProducts = async () => {\r\n    const params = { page: newPage, limit: limitPage, ...searchInfo };\r\n    try {\r\n      const response = await productsApi.getBooks(params);\r\n\r\n      // console.log(\"dữ liệu trả về\", response);\r\n      //set về rỗng trước\r\n      setProducts();\r\n      setProducts(response.results);\r\n      //Nhận thông tin sách\r\n      dispatch(getBooks(response.results));\r\n      //Để Phân trang\r\n      setTotalBooks(response.totalResults);\r\n    } catch (error) {\r\n      console.log(\"err \", error);\r\n    }\r\n  };\r\n\r\n  // console.log(\"đây là trang admin Products\", products);\r\n  const showBody = products?.map((bookDetails, index) => {\r\n    return (\r\n      <tr key={index}>\r\n        {/* <td>{bookDetails.id}</td> */}\r\n\r\n        {/* <td>{imgShow(bookDetails.cover)}</td> */}\r\n        <td>{index + 1 + (newPage - 1) * limitPage}</td>\r\n        <td>{bookDetails.title}</td>\r\n        <td>{bookDetails.authors}</td>\r\n        <td>{bookDetails.categories}</td>\r\n        <td>{bookDetails.availableCopies}</td>\r\n        {/* <td>{bookDetails.loanPeriodDays} ngày</td> */}\r\n\r\n        {/* custom td */}\r\n        <td>\r\n          <IncreaseBooks\r\n            bookId={bookDetails.id}\r\n            bookName={bookDetails.title}\r\n            // Cập nhật lại\r\n            onUpdate={handleUpdate}\r\n            update={update}\r\n          />\r\n        </td>\r\n\r\n        <td>\r\n          <UpdateBooksById\r\n            onUpdate={handleUpdate}\r\n            update={update}\r\n            bookDetails={bookDetails}\r\n          />\r\n        </td>\r\n        <td>\r\n          <DeleteBooks\r\n            bookId={bookDetails.id}\r\n            bookName={bookDetails.title}\r\n            onUpdate={handleUpdate}\r\n            update={update}\r\n            onChangePage={handleChangePage}\r\n          />\r\n        </td>\r\n        <td>\r\n          <ViewBookDetails bookDetails={bookDetails} />\r\n        </td>\r\n      </tr>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <div className=\"viewMenu\">\r\n      <legend className=\"viewMenu_title\">Quản lý thông tin sách</legend>\r\n      <div className=\"viewMenu_search\">\r\n        {/* Search form */}\r\n        <div className=\"search\">\r\n          <SearchFormAdmin\r\n            onUpdate={handleUpdate}\r\n            update={update}\r\n            onChangeInfo={handleInfo}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div className=\"viewMenu_table\">\r\n        <Table className=\"tableForm\" striped bordered hover>\r\n          <thead className=\"tableForm_header\">\r\n            <tr>\r\n              {/* <th>ID</th> */}\r\n              {/* <th>Ảnh</th> */}\r\n              <td>STT</td>\r\n              <th>Tên sách</th>\r\n              <th>Tác giả</th>\r\n              <th>Thể loại</th>\r\n              <th>Hiện có</th>\r\n              <th>Nhập sách</th>\r\n\r\n              {/* <th>Thời gian mượn</th> */}\r\n              <th>Chỉnh sửa</th>\r\n              <th>Xoá sách</th>\r\n              <th>Xem chi tiết</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"tableForm_body\">{showBody}</tbody>\r\n        </Table>\r\n      </div>\r\n      <div className=\"viewMenu_pagination\">\r\n        <PaginationItems\r\n          totalRows={totalBooks}\r\n          limit={limitPage}\r\n          activePage={newPage}\r\n          onChangePage={handleChangePage}\r\n          onChangeLimit={handleLimitChange}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ViewBooks;\r\n","import axiosClient from \"./axiosClient\";\r\n\r\nconst REPORT_API_ENDPOINT = \"/reports\";\r\n\r\nconst reportsApi = {\r\n  //Lấy các báo cáo tổng quan\r\n  getReports: (dateInfo) => {\r\n    const url = REPORT_API_ENDPOINT;\r\n    return axiosClient.get(url, { params: { ...dateInfo } });\r\n  },\r\n  // Lấy danh sách hoạt động của thủ thư\r\n  getLibrarianActivities: (info) => {\r\n    const url = REPORT_API_ENDPOINT + \"/activities\";\r\n    return axiosClient.get(url, { params: { ...info } });\r\n  },\r\n  //Xuất danh sách người dùng đang mượn sách\r\n  exportBooksBorrowing: () => {\r\n    const url = REPORT_API_ENDPOINT + \"/export/books/borrowing\";\r\n    return axiosClient.post(url);\r\n  },\r\n};\r\nexport default reportsApi;\r\n","import React from \"react\";\r\nimport { Table } from \"react-bootstrap\";\r\nimport ReactHTMLTableToExcel from \"react-html-table-to-excel\";\r\n\r\nfunction BooksReportstoExcel({ dataChart }) {\r\n  // console.log(\"dataChart to excel nè\", dataChart);\r\n  const renderDataReservation = dataChart?.map((bookDate, index) => {\r\n    return (\r\n      <tr>\r\n        <td>{index + 1}</td>\r\n        <td>{bookDate.day}</td>\r\n        <td>{bookDate[\"Số lượng sách mới\"]}</td>\r\n        <td>{bookDate[\"Số lượng sách bị xoá\"]}</td>\r\n      </tr>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <div className=\"btnExcel\">\r\n      <ReactHTMLTableToExcel\r\n        id=\"test-table-xls-button\"\r\n        className=\"download-table-xls-button\"\r\n        table=\"tableBooks\"\r\n        filename=\"Thống kê sách\"\r\n        sheet=\"Thống kê sách\"\r\n        buttonText=\"Xuất thống kê sách\"\r\n      />\r\n      <Table id=\"tableBooks\" style={{ display: \"none\" }}>\r\n        <thead>\r\n          <th>STT</th>\r\n          <th>Ngày </th>\r\n          <th>Số lượng lịch sách mới</th>\r\n          <th>Số lượng sách bị xoá</th>\r\n        </thead>\r\n        <tbody>{renderDataReservation}</tbody>\r\n      </Table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BooksReportstoExcel;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Bar,\r\n  CartesianGrid,\r\n  ComposedChart,\r\n  Legend,\r\n  Line,\r\n  Tooltip,\r\n  XAxis,\r\n  YAxis,\r\n} from \"recharts\";\r\nimport BooksReportstoExcel from \"./BooksReportstoExcel\";\r\n\r\nfunction BookReports({ booksChart }) {\r\n  // console.log(\"booksChart nè\", booksChart);\r\n  const [dataChart, setDataChart] = useState();\r\n\r\n  useEffect(() => {\r\n    booksChart && renderObj(booksChart);\r\n  }, [booksChart]);\r\n\r\n  // useEffect(() => {\r\n  //   console.log(\"dataChart\", dataChart);\r\n  // }, [dataChart]);\r\n\r\n  const renderObj = (booksChart) => {\r\n    // console.log(\"của biểu đồ\", booksChart);\r\n    const { deleted, new: SachMoi } = booksChart;\r\n    // console.log(\"new đã lấy\", SachMoi);\r\n    if (!deleted || !SachMoi) {\r\n      return;\r\n    }\r\n    const keyDeleted = Object.keys(deleted);\r\n    const keySachMoi = Object.keys(SachMoi);\r\n\r\n    const set = new Set([...keyDeleted, ...keySachMoi]);\r\n\r\n    const newObj = [];\r\n    for (var date of set) {\r\n      newObj.push({\r\n        day: date,\r\n        \"Số lượng sách mới\": SachMoi[date] ? SachMoi[date] : 0,\r\n        \"Số lượng sách bị xoá\": deleted[date] ? deleted[date] : 0,\r\n      });\r\n    }\r\n    // console.log(\"new Obj nè\", newObj);\r\n    newObj.sort(day_sort);\r\n    // console.log(\"sau khi sắp xếp của biểu đồ\", newObj);\r\n    setDataChart(newObj);\r\n  };\r\n\r\n  const day_sort = (prevDay, nextDay) => {\r\n    return (\r\n      new Date(\r\n        prevDay.day.replace(/^(\\d{1,2}\\/)(\\d{1,2}\\/)(\\d{4})$/, \"$2$1$3\")\r\n      ).getTime() -\r\n      new Date(\r\n        nextDay.day.replace(/^(\\d{1,2}\\/)(\\d{1,2}\\/)(\\d{4})$/, \"$2$1$3\")\r\n      ).getTime()\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"formReports\">\r\n      <BooksReportstoExcel dataChart={dataChart} />\r\n      <ComposedChart cộng width={700} height={300} data={dataChart}>\r\n        <XAxis dataKey=\"day\" stroke=\"#8884d8\" />\r\n        <YAxis />\r\n        <Tooltip />\r\n        <Legend />\r\n        <CartesianGrid stroke=\"#ccc\" strokeDasharray=\"1 1\" />\r\n\r\n        {/* Của user */}\r\n        <Bar dataKey=\"Số lượng sách mới\" fill=\"#0088FE\" barSize={30} />\r\n        <Bar dataKey=\"Số lượng sách bị xoá\" fill=\"#00C49F\" barSize={30} />\r\n        {/* Dòng tỉ lệ */}\r\n        {/* <Line type=\"monotone\" dataKey=\"Số lượng sách mới\" stroke=\"#ff7300\" /> */}\r\n      </ComposedChart>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BookReports;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Cell, Pie, PieChart, Sector, Tooltip } from \"recharts\";\r\n\r\nfunction BooksReportsOverall({ booksPie }) {\r\n  const [dataPie, setDataPie] = useState();\r\n\r\n  const [activeIndex, setActiveIndex] = useState(0);\r\n\r\n  useEffect(() => {\r\n    booksPie && renderObj(booksPie);\r\n  }, [booksPie]);\r\n\r\n  // useEffect(() => {\r\n  //   console.log(\"new nè\", dataPie);\r\n  // }, [dataPie]);\r\n\r\n  const renderStatus = (status) => {\r\n    if (status === \"totalNew\") {\r\n      return <>Tổng số lượng sách mới </>\r\n    }\r\n    if (status === \"totalDeleted\") {\r\n      return <>Tổng số lượng sách đã xoá </>\r\n    }\r\n  }\r\n\r\n\r\n  const renderObj = (booksPie) => {\r\n    // console.log(\"của hình tròn\", booksPie);\r\n    if (!booksPie) {\r\n      return;\r\n    }\r\n\r\n    //Lọc keys\r\n    const keys = Object.keys(booksPie);\r\n    const newKeys = keys.filter((key) => {\r\n      if (\r\n        key !== \"new\" &&\r\n        key !== \"deleted\" &&\r\n        key !== \"total\"\r\n      ) {\r\n        return key;\r\n      }\r\n    });\r\n    // console.log(newKeys);\r\n    //Tạo obj mới\r\n    const newObj = [];\r\n    newKeys.map((key) => {\r\n      newObj.push({\r\n        name: renderStatus(key).props.children, value: booksPie[key]\r\n      });\r\n    });\r\n    // console.log(\"của hình tròn\", newObj);\r\n\r\n    //Add vô Pie\r\n    setDataPie(newObj);\r\n  };\r\n\r\n  const COLORS = [\"#0088FE\", \"#00C49F\", \"#FFBB28\", \"#FF8042\", \"#ff7300\"];\r\n\r\n  const RADIAN = Math.PI / 180;\r\n  const renderCustomizedLabel = ({\r\n    cx,\r\n    cy,\r\n    midAngle,\r\n    innerRadius,\r\n    outerRadius,\r\n    percent,\r\n    index,\r\n  }) => {\r\n    const radius = innerRadius + (outerRadius - innerRadius) * 0.5;\r\n    const x = cx + radius * Math.cos(-midAngle * RADIAN);\r\n    const y = cy + radius * Math.sin(-midAngle * RADIAN);\r\n\r\n    return (\r\n      <text\r\n        x={x}\r\n        y={y}\r\n        fill=\"white\"\r\n        textAnchor={x > cx ? \"start\" : \"end\"}\r\n        dominantBaseline=\"central\"\r\n      >\r\n        {`${(percent * 100).toFixed(0)}%`}\r\n      </text>\r\n    );\r\n  };\r\n\r\n  const onPieEnter = (_, index) => {\r\n    setActiveIndex(index);\r\n  };\r\n  return (\r\n    <div className=\"formReportsOverall\">\r\n      <PieChart width={200} height={200}>\r\n        <Pie\r\n          data={dataPie}\r\n          dataKey=\"value\"\r\n          isAnimationActive={false}\r\n          cx=\"50%\"\r\n          cy=\"50%\"\r\n          labelLine={false}\r\n          label={renderCustomizedLabel}\r\n          outerRadius={80}\r\n          fill=\"#8884d8\"\r\n          onMouseEnter={onPieEnter}\r\n        >\r\n          {dataPie?.map((entry, index) => (\r\n            <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n          ))}\r\n        </Pie>\r\n\r\n        <Tooltip />\r\n      </PieChart>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BooksReportsOverall;\r\n","import React from \"react\";\r\nimport { Table } from \"react-bootstrap\";\r\nimport ReactHTMLTableToExcel from \"react-html-table-to-excel\";\r\n\r\nfunction ReservationReportstoExcel({ dataChart }) {\r\n  const renderDataReservation = dataChart?.map((reservationDate, index) => {\r\n    return (\r\n      <tr>\r\n        <td>{index + 1}</td>\r\n        <td>{reservationDate.day}</td>\r\n        <td>{reservationDate[\"Đang chờ\"]}</td>\r\n        <td>{reservationDate[\"Thành công\"]}</td>\r\n        <td>{reservationDate[\"Huỷ hẹn\"]}</td>\r\n        <td>{reservationDate[\"Quá hạn\"]}</td>\r\n      </tr>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <div className=\"btnExcel\">\r\n      <ReactHTMLTableToExcel\r\n        id=\"test-table-xls-button\"\r\n        className=\"download-table-xls-button\"\r\n        table=\"tableReservation\"\r\n        filename=\"Thống kê lịch hẹn\"\r\n        sheet=\"Thống kê lịch hẹn\"\r\n        buttonText=\"Xuất thống kê lịch hẹn\"\r\n      />\r\n      <Table id=\"tableReservation\" style={{ display: \"none\" }}>\r\n        <thead>\r\n          <th>STT</th>\r\n          <th>Ngày </th>\r\n          <th>Số lượng lịch đã đang chờ</th>\r\n          <th>Số lượng lịch đã thành công</th>\r\n          <th>Số lượng lịch đã huỷ hẹn</th>\r\n          <th>Số lượng lịch đã quá hạn</th>\r\n        </thead>\r\n        <tbody>{renderDataReservation}</tbody>\r\n      </Table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ReservationReportstoExcel;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Bar,\r\n  CartesianGrid,\r\n  ComposedChart,\r\n  Legend,\r\n  Line,\r\n  Tooltip,\r\n  XAxis,\r\n  YAxis,\r\n} from \"recharts\";\r\nimport ReservationReportstoExcel from \"./ReservationReportstoExcel\";\r\n\r\nfunction ReservationReports({ reservationsChart }) {\r\n  const [dataChart, setDataChart] = useState();\r\n\r\n  useEffect(() => {\r\n    reservationsChart && renderObj(reservationsChart);\r\n  }, [reservationsChart]);\r\n\r\n  // useEffect(() => {\r\n  //   console.log(\"dataChart\", dataChart);\r\n  // }, [dataChart]);\r\n\r\n  const renderObj = (reservation) => {\r\n    // console.log(\"lấy được\", reservation);\r\n    const {\r\n      canceled, // Huỷ hẹn\r\n      fulfilled, // Thành công\r\n      new: Tong, // Tổng cộng\r\n      overdue, //QUá hạn\r\n      pending, //Đang chờ\r\n    } = reservation;\r\n\r\n    if (!canceled || !fulfilled || !Tong || !overdue || !pending) {\r\n      return;\r\n    }\r\n    const keyCanceled = Object.keys(canceled);\r\n    const keyFulfilled = Object.keys(fulfilled);\r\n    const keyTong = Object.keys(Tong);\r\n    const keyOverdue = Object.keys(overdue);\r\n    const keyPending = Object.keys(pending);\r\n\r\n    const set = new Set([\r\n      ...keyCanceled,\r\n      ...keyFulfilled,\r\n      ...keyTong,\r\n      ...keyOverdue,\r\n      ...keyPending,\r\n    ]);\r\n\r\n    // console.log(set);\r\n    const newObj = [];\r\n\r\n    for (var date of set) {\r\n      newObj.push({\r\n        day: date,\r\n        \"Huỷ hẹn\": canceled[date] ? canceled[date] : 0,\r\n        \"Thành công\": fulfilled[date] ? fulfilled[date] : 0,\r\n        \"Tổng cộng\": Tong[date] ? Tong[date] : 0,\r\n        \"Quá hạn\": overdue[date] ? overdue[date] : 0,\r\n        \"Đang chờ\": pending[date] ? pending[date] : 0,\r\n      });\r\n    }\r\n    newObj.sort(day_sort);\r\n    // console.log(\"sau khi sắp xếp\", newObj);\r\n    setDataChart(newObj);\r\n  };\r\n\r\n  const day_sort = (prevDay, nextDay) => {\r\n    return (\r\n      new Date(\r\n        prevDay.day.replace(/^(\\d{1,2}\\/)(\\d{1,2}\\/)(\\d{4})$/, \"$2$1$3\")\r\n      ).getTime() -\r\n      new Date(\r\n        nextDay.day.replace(/^(\\d{1,2}\\/)(\\d{1,2}\\/)(\\d{4})$/, \"$2$1$3\")\r\n      ).getTime()\r\n    );\r\n  };\r\n  return (\r\n    <div className=\"formReports\">\r\n      <ReservationReportstoExcel dataChart={dataChart} />\r\n      <ComposedChart width={700} height={300} data={dataChart}>\r\n        <XAxis dataKey=\"day\" stroke=\"#8884d8\" />\r\n        <YAxis />\r\n        <Tooltip />\r\n        <Legend />\r\n        <CartesianGrid stroke=\"#ccc\" strokeDasharray=\"1 1\" />\r\n\r\n        {/* Của user */}\r\n        <Bar dataKey=\"Đang chờ\" fill=\"#0088FE\" barSize={30} />\r\n        <Bar dataKey=\"Huỷ hẹn\" fill=\"#00C49F\" barSize={30} />\r\n        <Bar dataKey=\"Thành công\" fill=\"#FFBB28\" barSize={30} />\r\n        <Bar dataKey=\"Quá hạn\" fill=\"#FF8042\" barSize={30} />\r\n        {/* <Bar dataKey=\"Tổng cộng\" fill=\"rgb(227, 119, 194)\" barSize={30} /> */}\r\n        {/* Dòng tỉ lệ */}\r\n        {/* <Line type=\"monotone\" dataKey=\"Tổng cộng\" stroke=\"#ff7300\" /> */}\r\n      </ComposedChart>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ReservationReports;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Cell, Pie, PieChart, Sector, Tooltip } from \"recharts\";\r\n\r\nfunction ReservationReportsOverall({ reservationsChart }) {\r\n  const [dataPie, setDataPie] = useState();\r\n\r\n  const [activeIndex, setActiveIndex] = useState(0);\r\n\r\n  useEffect(() => {\r\n    reservationsChart && renderObj(reservationsChart);\r\n  }, [reservationsChart]);\r\n\r\n  // useEffect(() => {\r\n  //   console.log(\"new nè\", dataPie);\r\n  // }, [dataPie]);\r\n\r\n  const renderStatus = (status) => {\r\n    if (status === \"totalPending\") {\r\n      return <>Tổng số lượng lịch hẹn đang chờ </>\r\n    }\r\n    if (status === \"totalCanceled\") {\r\n      return <>Tổng số lượng lịch hẹn đã huỷ </>\r\n    }\r\n    if (status === \"totalOverdue\") {\r\n      return <>Tổng số lượng lịch hẹn quá hạn </>\r\n    }\r\n    if (status === \"totalFulfilled\") {\r\n      return <>Tổng số lượng lịch hẹn thành công </>\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  const renderObj = (reservedPie) => {\r\n    // console.log(reservedPie);\r\n    if (!reservedPie) {\r\n      return;\r\n    }\r\n\r\n    //Lọc keys\r\n    const keys = Object.keys(reservedPie);\r\n    const newKeys = keys.filter((key) => {\r\n      if (\r\n        key !== \"canceled\" &&\r\n        key !== \"new\" &&\r\n        key !== \"fulfilled\" &&\r\n        key !== \"overdue\" &&\r\n        key !== \"pending\" &&\r\n        key !== \"total\" &&\r\n        key !== \"totalNew\"\r\n\r\n      ) {\r\n        return key;\r\n      }\r\n    });\r\n    // console.log(newKeys);\r\n    //Tạo obj mới\r\n    const newObj = [];\r\n\r\n    newKeys.map((key) => {\r\n      newObj.push({\r\n        name: renderStatus(key).props.children, value: reservedPie[key]\r\n      });\r\n    });\r\n\r\n    // console.log(newObj);\r\n    //Add vô Pie\r\n    setDataPie(newObj);\r\n  };\r\n\r\n  const COLORS = [\"#FF8042\", \"#00C49F\", \"#FFBB28\", \"#0088FE\"];\r\n\r\n  const RADIAN = Math.PI / 180;\r\n  const renderCustomizedLabel = ({\r\n    cx,\r\n    cy,\r\n    midAngle,\r\n    innerRadius,\r\n    outerRadius,\r\n    percent,\r\n    index,\r\n  }) => {\r\n    const radius = innerRadius + (outerRadius - innerRadius) * 0.5;\r\n    const x = cx + radius * Math.cos(-midAngle * RADIAN);\r\n    const y = cy + radius * Math.sin(-midAngle * RADIAN);\r\n\r\n    return (\r\n      <text\r\n        x={x}\r\n        y={y}\r\n        fill=\"white\"\r\n        textAnchor={x > cx ? \"start\" : \"end\"}\r\n        dominantBaseline=\"central\"\r\n      >\r\n        {`${(percent * 100).toFixed(0)}%`}\r\n      </text>\r\n    );\r\n  };\r\n\r\n  const onPieEnter = (_, index) => {\r\n    setActiveIndex(index);\r\n  };\r\n  return (\r\n    <div className=\"formReportsOverall\">\r\n      <PieChart width={200} height={200}>\r\n        <Pie\r\n          data={dataPie}\r\n          dataKey=\"value\"\r\n          isAnimationActive={false}\r\n          cx=\"50%\"\r\n          cy=\"50%\"\r\n          labelLine={false}\r\n          label={renderCustomizedLabel}\r\n          outerRadius={80}\r\n          fill=\"#8884d8\"\r\n          onMouseEnter={onPieEnter}\r\n        >\r\n          {dataPie?.map((entry, index) => (\r\n            <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n          ))}\r\n        </Pie>\r\n\r\n        <Tooltip />\r\n      </PieChart>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ReservationReportsOverall;\r\n","import React from \"react\";\r\nimport { Table } from \"react-bootstrap\";\r\nimport ReactHTMLTableToExcel from \"react-html-table-to-excel\";\r\n\r\nfunction UserReportstoExcel({ dataChart }) {\r\n  const renderDataUser = dataChart?.map((userDate, index) => {\r\n    return (\r\n      <tr key={index}>\r\n        <td>{index + 1}</td>\r\n        <td>{userDate.day}</td>\r\n        <td>{userDate[\"Tài khoản mới\"]}</td>\r\n        <td>{userDate[\"Tài khoản bị xoá\"]}</td>\r\n      </tr>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <div className=\"btnExcel\">\r\n      <ReactHTMLTableToExcel\r\n        id=\"test-table-xls-button\"\r\n        className=\"download-table-xls-button\"\r\n        table=\"tableUser\"\r\n        filename=\"Thống kê người dùng\"\r\n        sheet=\"Thống kê người dùng\"\r\n        buttonText=\"Xuất thống kê người dùng\"\r\n      />\r\n      <Table id=\"tableUser\" style={{ display: \"none\" }}>\r\n        <thead>\r\n          <th>STT</th>\r\n          <th>Ngày </th>\r\n          <th>Số lượng tài khoản mới</th>\r\n          <th>Số lượng tài khoản bị xoá</th>\r\n        </thead>\r\n        <tbody>{renderDataUser}</tbody>\r\n      </Table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserReportstoExcel;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Bar,\r\n  CartesianGrid,\r\n  ComposedChart,\r\n  Legend,\r\n  Tooltip,\r\n  XAxis,\r\n  YAxis,\r\n} from \"recharts\";\r\nimport UserReportstoExcel from \"./UserReportstoExcel\";\r\n\r\nfunction UserReports({ usersChart }) {\r\n  const [dataChart, setDataChart] = useState();\r\n\r\n  useEffect(() => {\r\n    usersChart && renderObj(usersChart);\r\n  }, [usersChart]);\r\n\r\n  // useEffect(() => {\r\n  //   console.log(dataChart);\r\n  // }, [dataChart]);\r\n\r\n  const renderObj = (usersChart) => {\r\n    //Nếu không có thì bỏ qua\r\n\r\n    const { deleted, new: NguoiDungMoi } = usersChart;\r\n\r\n    if (!deleted || !NguoiDungMoi) {\r\n      return;\r\n    }\r\n\r\n    const keyDeleted = Object.keys(deleted);\r\n    const keyNguoiDungMoi = Object.keys(NguoiDungMoi);\r\n\r\n    const set = new Set([...keyDeleted, ...keyNguoiDungMoi]);\r\n\r\n    const newObj = [];\r\n    for (var date of set) {\r\n      newObj.push({\r\n        day: date,\r\n        \"Tài khoản bị xoá\": deleted[date] ? deleted[date] : 0,\r\n        \"Tài khoản mới\": NguoiDungMoi[date] ? NguoiDungMoi[date] : 0,\r\n      });\r\n    }\r\n    newObj.sort(day_sort);\r\n    // console.log(\"sau khi sắp xếp\", newObj);\r\n    setDataChart(newObj);\r\n  };\r\n\r\n  const day_sort = (prevDay, nextDay) => {\r\n    return (\r\n      new Date(\r\n        prevDay.day.replace(/^(\\d{1,2}\\/)(\\d{1,2}\\/)(\\d{4})$/, \"$2$1$3\")\r\n      ).getTime() -\r\n      new Date(\r\n        nextDay.day.replace(/^(\\d{1,2}\\/)(\\d{1,2}\\/)(\\d{4})$/, \"$2$1$3\")\r\n      ).getTime()\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"formReports\">\r\n      <UserReportstoExcel dataChart={dataChart} />\r\n      <ComposedChart\r\n        width={700}\r\n        height={300}\r\n        data={dataChart}\r\n        margin={{\r\n          top: 20,\r\n          right: 20,\r\n          bottom: 20,\r\n          left: 20,\r\n        }}\r\n      >\r\n        <CartesianGrid stroke=\"#f5f5f5\" />\r\n        <XAxis dataKey=\"day\" scale=\"band\" />\r\n        <YAxis />\r\n        <Tooltip />\r\n        <Legend />\r\n        <Bar dataKey=\"Tài khoản mới\" barSize={20} fill=\"#0088FE\" />\r\n        <Bar dataKey=\"Tài khoản bị xoá\" barSize={20} fill=\"#00C49F\" />\r\n        {/* Dòng tỉ lệ */}\r\n        {/* <Line type=\"monotone\" dataKey=\"Tài khoản mới\" stroke=\"#ff7300\" /> */}\r\n      </ComposedChart>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserReports;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Cell, Pie, PieChart, Sector, Tooltip } from \"recharts\";\r\n\r\nfunction UserReportsOverall({ usersPie }) {\r\n  const [dataPie, setDataPie] = useState();\r\n\r\n  const [activeIndex, setActiveIndex] = useState(0);\r\n\r\n  useEffect(() => {\r\n    usersPie && renderObj(usersPie);\r\n  }, [usersPie]);\r\n\r\n  // useEffect(() => {\r\n  //   console.log(\"new nè\", dataPie);\r\n  // }, [dataPie]);\r\n\r\n  const renderStatus = (status) => {\r\n    if (status === \"totalNew\") {\r\n      return <>Tổng số lượng tài khoản mới </>\r\n    }\r\n    if (status === \"totalDeleted\") {\r\n      return <>Tổng số lượng tài khoản đã xoá </>\r\n    }\r\n  }\r\n\r\n  const renderObj = (usersPie) => {\r\n    if (!usersPie) {\r\n      return;\r\n    }\r\n\r\n    //Lọc keys\r\n    const keys = Object.keys(usersPie);\r\n    const newKeys = keys.filter((key) => {\r\n      if (key !== \"new\" && key !== \"deleted\" && key !== \"total\") {\r\n        return key;\r\n      }\r\n    });\r\n\r\n    //Tạo obj mới\r\n    const newObj = [];\r\n    newKeys.map((key) => {\r\n      newObj.push({ name: renderStatus(key).props.children, value: usersPie[key] });\r\n    });\r\n\r\n    //Add vô Pie\r\n    setDataPie(newObj);\r\n  };\r\n\r\n  const COLORS = [\"#0088FE\", \"#00C49F\", \"#FFBB28\", \"#FF8042\"];\r\n\r\n  const RADIAN = Math.PI / 180;\r\n  const renderCustomizedLabel = ({\r\n    cx,\r\n    cy,\r\n    midAngle,\r\n    innerRadius,\r\n    outerRadius,\r\n    percent,\r\n    index,\r\n  }) => {\r\n    const radius = innerRadius + (outerRadius - innerRadius) * 0.5;\r\n    const x = cx + radius * Math.cos(-midAngle * RADIAN);\r\n    const y = cy + radius * Math.sin(-midAngle * RADIAN);\r\n\r\n    return (\r\n      <text\r\n        x={x}\r\n        y={y}\r\n        fill=\"white\"\r\n        textAnchor={x > cx ? \"start\" : \"end\"}\r\n        dominantBaseline=\"central\"\r\n      >\r\n        {`${(percent * 100).toFixed(0)}%`}\r\n      </text>\r\n    );\r\n  };\r\n\r\n  const onPieEnter = (_, index) => {\r\n    setActiveIndex(index);\r\n  };\r\n  return (\r\n    <div className=\"formReportsOverall\">\r\n      <PieChart width={200} height={200}>\r\n        <Pie\r\n          data={dataPie}\r\n          dataKey=\"value\"\r\n          isAnimationActive={false}\r\n          cx=\"50%\"\r\n          cy=\"50%\"\r\n          //   activeShape={renderActiveShape}\r\n          labelLine={false}\r\n          label={renderCustomizedLabel}\r\n          outerRadius={80}\r\n          fill=\"#8884d8\"\r\n          onMouseEnter={onPieEnter}\r\n        >\r\n          {dataPie?.map((entry, index) => (\r\n            <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n          ))}\r\n        </Pie>\r\n\r\n        <Tooltip />\r\n      </PieChart>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserReportsOverall;\r\n","import reportsApi from \"apis/reportsApi\";\r\nimport { renderDateSearch } from \"constants/RenderDate\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport BookReports from \"./BookReports/BookReports\";\r\nimport BooksReportsOverall from \"./BookReports/BooksReportsOverall\";\r\nimport ReservationReports from \"./ReservationReports/ReservationReports\";\r\nimport ReservationReportsOverall from \"./ReservationReports/ReservationReportsOverall\";\r\nimport UserReports from \"./UserReports/UserReports\";\r\nimport UserReportsOverall from \"./UserReports/UserReportsOverall\";\r\nimport \"./ReportActivities.scss\";\r\n\r\nfunction ReportActivities() {\r\n  document.title = \"Thống kê hoạt động\";\r\n\r\n  const [startDay, setStartDay] = useState();\r\n  const [endDay, setEndDay] = useState();\r\n\r\n  //Charts\r\n  const [usersChart, setUsersChart] = useState([]);\r\n  const [reservationsChart, setReservationsChart] = useState([]);\r\n  const [booksChart, setBooksChart] = useState([]);\r\n  //Pies\r\n  const [usersPie, setUsersPie] = useState([]);\r\n  const [reservationsPie, setReservationsPie] = useState([]);\r\n  const [booksPie, setBooksPie] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getReports();\r\n  }, [startDay, endDay]);\r\n\r\n  const getReports = async () => {\r\n    const time = { from: startDay, to: endDay, view: \"overall\" };\r\n    try {\r\n      const response = await reportsApi.getReports(time);\r\n      // console.log(response);\r\n      //Set cho user\r\n      setUsersChart(response.user);\r\n      setUsersPie(response.user);\r\n      //Set cho reservation\r\n      setReservationsChart(response.reservation);\r\n      setReservationsPie(response.reservation);\r\n      //Set cho books\r\n      setBooksChart(response.book);\r\n      setBooksPie(response.book);\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n  //Handle time\r\n  const handleStartDay = (time) => {\r\n    setStartDay(time);\r\n  };\r\n  const handleEndDay = (time) => {\r\n    setEndDay(time);\r\n  };\r\n\r\n  const renderTime = () => {\r\n    if (startDay) {\r\n      if (endDay < startDay) {\r\n        return <span style={{ color: \"red\" }}>chọn thời gian sai</span>;\r\n      } else if (endDay) {\r\n        return (\r\n          <>\r\n            từ ngày <strong>{renderDateSearch(startDay)}</strong> đến ngày\r\n            <strong> {renderDateSearch(endDay)}</strong>\r\n          </>\r\n        );\r\n      }\r\n      return (\r\n        <>\r\n          từ ngày <strong>{renderDateSearch(startDay)}</strong> đến nay\r\n        </>\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"reportContainer\">\r\n      <div className=\"reportContainer_search\">\r\n        <legend className=\"label \">Thống kê hoạt động {renderTime()}</legend>\r\n        <div className=\"date\">\r\n          <input type=\"date\" onChange={(e) => handleStartDay(e.target.value)} />\r\n          <input type=\"date\" onChange={(e) => handleEndDay(e.target.value)} />\r\n        </div>\r\n      </div>\r\n      <div className=\"reportContainer_contents\">\r\n        <div className=\"reportContainer_contents_items\">\r\n          <span className=\"label\">\r\n            Biểu đồ thể hiện chi tiết số lượng người dùng\r\n          </span>\r\n          <div className=\"charts\">\r\n            <UserReports usersChart={usersChart} />\r\n            <UserReportsOverall usersPie={usersPie} />\r\n          </div>\r\n        </div>\r\n        <div className=\"reportContainer_contents_items\">\r\n          <span className=\"label\">\r\n            Biểu đồ thể hiện chi tiết số lượng lịch đặt sách\r\n          </span>\r\n          <div className=\"charts\">\r\n            <ReservationReports reservationsChart={reservationsChart} />\r\n            <ReservationReportsOverall reservationsChart={reservationsPie} />\r\n          </div>\r\n        </div>\r\n        <div className=\"reportContainer_contents_items\">\r\n          <span className=\"label\">Biểu đồ thể hiện số lượng sách đã nhập</span>\r\n          <div className=\"charts\">\r\n            <BookReports booksChart={booksChart} />\r\n            <BooksReportsOverall booksPie={booksPie} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ReportActivities;\r\n","import { renderActions, renderDateNow } from \"constants/RenderDate\";\r\nimport React from \"react\";\r\nimport { Table } from \"react-bootstrap\";\r\nimport ReactHTMLTableToExcel from \"react-html-table-to-excel\";\r\n\r\nfunction ReportLibrarianToExcel({ activitiesData }) {\r\n  // console.log(\"đã lấy được full rồi\", activitiesData);\r\n  //render components\r\n  const renderName = (user, book) => {\r\n    if (user && user.name) {\r\n      return user.name;\r\n    }\r\n    if (book && book.title) {\r\n      return book.title;\r\n    } else {\r\n      return;\r\n    }\r\n  };\r\n\r\n  const renderDateActivities = activitiesData?.map((data, index) => {\r\n    return (\r\n      <tr key={index}>\r\n        {/* <td>{index + 1}</td> */}\r\n        <td>{data.librarian?.name}</td>\r\n        <td>{renderActions(data.action)}</td>\r\n        <td>{renderName(data.user, data.book)}</td>\r\n        <td>{renderDateNow(data.createdAt)}</td>\r\n      </tr>\r\n    )\r\n  })\r\n\r\n\r\n  return (\r\n    <div className=\"btnExcel\" style={{ textAlign: \"end\" }}>\r\n      <ReactHTMLTableToExcel\r\n        id=\"test-table-xls-button\"\r\n        className=\"download-table-xls-button\"\r\n        table=\"tableActivities\"\r\n        filename=\"Thống kê hoạt động thủ thư\"\r\n        sheet=\"Hoạt động thủ thư\"\r\n        buttonText=\"Xuất thống kê hoạt động thủ thư\"\r\n      />\r\n      {/* <ReportLibrarianExcel /> */}\r\n      <Table bordered hover striped className=\"viewReservation_table\" id=\"tableActivities\" style={{ display: \"none\" }}>\r\n        <thead>\r\n          <tr>\r\n            {/* <th>STT</th> */}\r\n            <th>Người thay đổi</th>\r\n            {/* <th>Tên người dùng </th> */}\r\n            <th>Hành động</th>\r\n            <th>Tên sách(Tên người dùng)</th>\r\n            {/* <th>Mã sách</th> */}\r\n            <th>Ngày tạo</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>{renderDateActivities}</tbody>\r\n      </Table>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ReportLibrarianToExcel;\r\n","import reportsApi from \"apis/reportsApi\";\r\nimport PaginationItems from \"components/customComponents/PaginationItems/PaginationItems\";\r\nimport {\r\n  renderActions,\r\n  renderDateNow,\r\n  renderDateSearch\r\n} from \"constants/RenderDate\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Form, Table } from \"react-bootstrap\";\r\nimport ReportLibrarianToExcel from \"./ReportLibrarianToExcel\";\r\n\r\nfunction ReportLibrarian() {\r\n  document.title = \"Hoạt động thủ thư\";\r\n\r\n  const [activities, setActivities] = useState();\r\n  const [activitiesToExcel, setActivitiesToExcel] = useState();\r\n  //Search\r\n  const [startDay, setStartDay] = useState();\r\n  const [endDay, setEndDay] = useState();\r\n  const [sortBy, setSortBy] = useState(\"createdAt:desc\");\r\n\r\n  //Phân trang\r\n  const [totalProducts, setTotalProducts] = useState();\r\n  const [limitPage, setLimitPage] = useState(5);\r\n  const [page, setPage] = useState(1);\r\n\r\n  useEffect(() => {\r\n    getActivities();\r\n  }, [page, limitPage, startDay, endDay, sortBy]);\r\n\r\n\r\n  //Để xuất excel\r\n  useEffect(() => {\r\n    totalProducts && renderFullActivity(totalProducts);\r\n  }, [totalProducts, startDay, endDay, sortBy])\r\n\r\n\r\n  //Handle time\r\n  const handleStartDay = (time) => {\r\n    setPage(1);\r\n    setStartDay(time);\r\n  };\r\n  const handleEndDay = (time) => {\r\n    setPage(1);\r\n    setEndDay(time);\r\n  };\r\n\r\n  const handleChangePage = (newPage) => {\r\n    setPage(newPage);\r\n  };\r\n  const handleChangeLimit = (newLimit) => {\r\n    setPage(1);\r\n    setLimitPage(newLimit);\r\n  };\r\n\r\n  //call api cho để hiện danh sách\r\n  const getActivities = async () => {\r\n    const params = {\r\n      from: startDay,\r\n      to: endDay,\r\n      page: page,\r\n      limit: limitPage,\r\n      sortBy,\r\n    };\r\n    try {\r\n      const response = await reportsApi.getLibrarianActivities(params);\r\n\r\n      // console.log(response);\r\n      setActivities(response.results);\r\n      setTotalProducts(response.totalResults);\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n  //call api để xuất excel\r\n  const renderFullActivity = async (totals) => {\r\n    const params = {\r\n      from: startDay,\r\n      to: endDay,\r\n      page: page,\r\n      limit: totals,\r\n      sortBy,\r\n    };\r\n    try {\r\n      const response = await reportsApi.getLibrarianActivities(params);\r\n      setActivitiesToExcel(response.results);\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n  //render components\r\n  const renderName = (user, book) => {\r\n    if (user && user.name) {\r\n      return user.name;\r\n    }\r\n    if (book && book.title) {\r\n      return book.title;\r\n    } else {\r\n      return;\r\n    }\r\n  };\r\n\r\n  const renderActivities = activities?.map((activity, index) => {\r\n    return (\r\n      <tr key={index}>\r\n        <td>{index + 1 + (page - 1) * limitPage}</td>\r\n        <td>{activity.librarian?.name}</td>\r\n        <td>{renderActions(activity.action)}</td>\r\n        <td>{renderName(activity.user, activity.book)}</td>\r\n        <td>{renderDateNow(activity.createdAt)}</td>\r\n      </tr>\r\n    );\r\n  });\r\n\r\n  const showDate = () => {\r\n    if (startDay) {\r\n      if (endDay < startDay) {\r\n        return <span style={{ color: \"red\" }}>chọn thời gian sai</span>;\r\n      } else if (endDay) {\r\n        return (\r\n          <>\r\n            từ ngày <strong>{renderDateSearch(startDay)}</strong> đến ngày\r\n            <strong> {renderDateSearch(endDay)}</strong>\r\n          </>\r\n        );\r\n      } else {\r\n        return (\r\n          <>\r\n            từ ngày <strong>{renderDateSearch(startDay)}</strong> đến nay\r\n          </>\r\n        );\r\n      }\r\n    } else {\r\n      return;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"viewReservation\">\r\n      <legend className=\"form_name\">\r\n        Thống kê hoạt động của thủ thư {showDate()}\r\n      </legend>\r\n      <Form className=\"viewReservation_form\">\r\n        <Form.Group className=\"viewReservation_form_items\">\r\n          <Form.Label className=\"label\">Từ ngày</Form.Label>\r\n          <Form.Control\r\n            className=\"control\"\r\n            type=\"date\"\r\n            onChange={(e) => handleStartDay(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group className=\"viewReservation_form_items\">\r\n          <Form.Label className=\"label\">Đến ngày</Form.Label>\r\n          <Form.Control\r\n            className=\"control\"\r\n            type=\"date\"\r\n            onChange={(e) => handleEndDay(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group className=\"viewReservation_form_items\">\r\n          <Form.Label className=\"label\">Ngày mượn sách</Form.Label>\r\n          <Form.Select\r\n            className=\"control\"\r\n            onChange={(e) => setSortBy(e.target.value)}\r\n          >\r\n            <option value=\"createdAt:desc\">Giảm dần</option>\r\n            <option value=\"createdAt:asc\">Tăng dần</option>\r\n          </Form.Select>\r\n        </Form.Group>\r\n        <ReportLibrarianToExcel activitiesData={activitiesToExcel} />\r\n      </Form>\r\n\r\n      <Table bordered hover striped className=\"viewReservation_table\">\r\n        <thead>\r\n          <tr>\r\n            <th>STT</th>\r\n            <th>Người thay đổi</th>\r\n            {/* <th>Tên người dùng </th> */}\r\n            <th>Hành động</th>\r\n            <th>Tên sách-Tên người dùng</th>\r\n            {/* <th>Mã sách</th> */}\r\n            <th>Ngày tạo</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>{renderActivities}</tbody>\r\n      </Table>\r\n      <PaginationItems\r\n        totalRows={totalProducts}\r\n        limit={limitPage}\r\n        onChangeLimit={handleChangeLimit}\r\n        onChangePage={handleChangePage}\r\n        activePage={page}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ReportLibrarian;\r\n","import axiosClient from \"./axiosClient\";\r\nconst USERS_API_ENDPOINT = \"/users\";\r\n\r\nconst adminApi = {\r\n  //fn: lấy danh sách user\r\n  getAllUser: (infoUser) => {\r\n    const url = USERS_API_ENDPOINT;\r\n    return axiosClient.get(url, { params: infoUser });\r\n  },\r\n  //fn: tạo người dùng mới\r\n  createUser: (userInfo) => {\r\n    const url = USERS_API_ENDPOINT;\r\n    return axiosClient.post(url, userInfo);\r\n  },\r\n  //fn: lấy thông tin chi tiết\r\n  userIdInfo: (userId) => {\r\n    const url = `${USERS_API_ENDPOINT}/${userId}`;\r\n    return axiosClient.post(url);\r\n  },\r\n  //fn: cập nhật thông tin\r\n  updateUser: (userId, userInfo) => {\r\n    const url = `${USERS_API_ENDPOINT}/${userId}`;\r\n    return axiosClient.patch(url, userInfo);\r\n  },\r\n  //fn: xoá người dùng\r\n  deleteUser: (userId) => {\r\n    const url = `${USERS_API_ENDPOINT}/${userId}`;\r\n    return axiosClient.delete(url);\r\n  },\r\n  //fn: lấy danh sách trong giỏ hàng người dùng\r\n  getUserCarts: (userId) => {\r\n    const url = `${USERS_API_ENDPOINT}/${userId}/cart`;\r\n    return axiosClient.get(url);\r\n  },\r\n  //fn: thêm sách vào giỏ sách người dùng\r\n  addUserCarts: (userId, bookId) => {\r\n    const url = `${USERS_API_ENDPOINT}/${userId}/cart/${bookId}`;\r\n    return axiosClient.post(url);\r\n  },\r\n  //fn: xoá sách khỏi giỏ sách người dùng\r\n  deleteUserCarts: (userId, bookId) => {\r\n    const url = `${USERS_API_ENDPOINT}/${userId}/cart/${bookId}`;\r\n    return axiosClient.delete(url);\r\n  },\r\n  //fn: tạo lịch hẹn nhận sách mới\r\n  createUserReservation: (userId) => {\r\n    const url = `${USERS_API_ENDPOINT}/${userId}/reservations`;\r\n    return axiosClient.post(url);\r\n  },\r\n  //fn:lấy danh sách lịch hẹn của người dùng\r\n  getUserReservation: (userId) => {\r\n    const url = `${USERS_API_ENDPOINT}/${userId}/reservations`;\r\n    return axiosClient.get(url);\r\n  },\r\n  //fn:lấy danh sách các bản sao đã được đặt lịch hẹn lấy\r\n  getUserBooksReservation: (userId) => {\r\n    const url = `${USERS_API_ENDPOINT}/${userId}/books/reservations`;\r\n    return axiosClient.get(url);\r\n  },\r\n  //fn: cho người dùng mượn sách\r\n  userBookCheckout: (userId) => {\r\n    const url = `${USERS_API_ENDPOINT}/${userId}/books/checkout`;\r\n    return axiosClient.post(url);\r\n  },\r\n};\r\n\r\nexport default adminApi;\r\n","import React, { useState } from \"react\";\r\nimport { Form, Button } from \"react-bootstrap\";\r\nimport adminApi from \"apis/adminApi\";\r\n\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectUser } from \"reducers/authSlice\";\r\n\r\n//Toast\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport \"components/Admin/Manage/AddForm.scss\";\r\n\r\nfunction CreateUser() {\r\n  document.title = \"Tạo người dùng mới\";\r\n\r\n  //Custom alert\r\n  const notify = (status, info) =>\r\n    toast[status](info, { position: toast.POSITION.BOTTOM_LEFT });\r\n\r\n  const isRole = useSelector(selectUser);\r\n  const checkRole = () => {\r\n    if (isRole.role === \"admin\") {\r\n      return (\r\n        <>\r\n          <option>Chọn chức vụ</option>\r\n          <option value=\"user\">Người dùng</option>\r\n          <option value=\"librarian\">Thủ thư</option>\r\n        </>\r\n      );\r\n    }\r\n    if (isRole.role === \"librarian\") {\r\n      return (\r\n        <>\r\n          <option>Chọn chức vụ</option>\r\n          <option value=\"user\">Người dùng</option>\r\n        </>\r\n      );\r\n    }\r\n  };\r\n\r\n  const [userCreate, setUserCreate] = useState({\r\n    name: \"\",\r\n    role: \"Chọn chức vụ\",\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const createUser = async () => {\r\n    const infoUser = { ...userCreate };\r\n    try {\r\n      await adminApi.createUser(infoUser);\r\n      handleReset();\r\n      // setError(\"Tạo user thành công\");\r\n      notify(\"success\", \"Tạo thành công\");\r\n    } catch (error) {\r\n      // setError(error.response.data.message);\r\n      notify(\"warn\", ` Thất bại, ${error.response.data.message}`);\r\n    }\r\n  };\r\n\r\n  const handleReset = () => {\r\n    setUserCreate({ name: \"\", role: \"Chọn chức vụ\", email: \"\", password: \"\" });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    // console.log(\"user thêm có thông tin là\", userCreate);\r\n    createUser();\r\n  };\r\n  return (\r\n    <>\r\n      <Form className=\"form\" onSubmit={handleSubmit}>\r\n        <legend className=\"form_name\">Tạo người dùng mới</legend>\r\n        <Form.Group className=\"mb-3 form_items\"></Form.Group>\r\n        <Form.Group className=\"mb-3 form_items\">\r\n          <Form.Label className=\"form_items_label\">Tên người dùng</Form.Label>\r\n          <Form.Control\r\n            value={userCreate.name}\r\n            className=\"form_items_input\"\r\n            name=\"name\"\r\n            type=\"text\"\r\n            placeholder=\"Nhập tên người dùng\"\r\n            onChange={(e) =>\r\n              setUserCreate({ ...userCreate, [e.target.name]: e.target.value })\r\n            }\r\n          />\r\n        </Form.Group>\r\n\r\n        <Form.Group className=\"mb-3 form_items\">\r\n          <Form.Label className=\"form_items_label\">Chức vụ</Form.Label>\r\n          <Form.Select\r\n            value={userCreate.role}\r\n            name=\"role\"\r\n            className=\"form_items_input\"\r\n            onChange={(e) =>\r\n              setUserCreate({ ...userCreate, [e.target.name]: e.target.value })\r\n            }\r\n          >\r\n            {checkRole()}\r\n          </Form.Select>\r\n        </Form.Group>\r\n        <Form.Group className=\"mb-3 form_items\">\r\n          <Form.Label className=\"form_items_label\">Địa chỉ email</Form.Label>\r\n          <Form.Control\r\n            className=\"form_items_input\"\r\n            value={userCreate.email}\r\n            name=\"email\"\r\n            type=\"email\"\r\n            placeholder=\"Nhập địa chỉ email\"\r\n            onChange={(e) =>\r\n              setUserCreate({ ...userCreate, [e.target.name]: e.target.value })\r\n            }\r\n          />\r\n        </Form.Group>\r\n        <Form.Group className=\"mb-3 form_items\">\r\n          <Form.Label className=\"form_items_label\">\r\n            Mật khẩu người dùng\r\n          </Form.Label>\r\n          <Form.Control\r\n            value={userCreate.password}\r\n            className=\"form_items_input\"\r\n            name=\"password\"\r\n            type=\"password\"\r\n            placeholder=\"Nhập mật khẩu người dùng\"\r\n            onChange={(e) =>\r\n              setUserCreate({ ...userCreate, [e.target.name]: e.target.value })\r\n            }\r\n          />\r\n        </Form.Group>\r\n\r\n        <div className=\"btnSubmit\">\r\n          <Button type=\"submit\" variant=\"primary\">\r\n            Tạo người dùng mới\r\n          </Button>\r\n          <Button variant=\"danger\" onClick={handleReset}>\r\n            Nhập lại\r\n          </Button>\r\n        </div>\r\n      </Form>\r\n      <ToastContainer />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default CreateUser;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Button, Form } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectUser } from \"reducers/authSlice\";\r\n\r\nimport { FcSearch } from \"react-icons/fc\";\r\n\r\nimport \"./SearchForm.scss\";\r\n\r\nfunction SearchUsersAdmin({ onChangeInfo }) {\r\n  //Debounce typing\r\n  const typingRef = useRef(null);\r\n\r\n  //Search Form\r\n  const [searchInfo, setSearchInfo] = useState({});\r\n\r\n  useEffect(() => {\r\n    onChangeInfo(searchInfo);\r\n  }, [searchInfo]);\r\n\r\n  const isRole = useSelector(selectUser);\r\n\r\n  //Check role\r\n  const checkRole = () => {\r\n    if (isRole.role === \"admin\") {\r\n      return (\r\n        <>\r\n          <option value=\"user\">Người Dùng</option>\r\n          <option value=\"librarian\">Thủ thư</option>\r\n          <option value=\"admin\">Admin</option>\r\n        </>\r\n      );\r\n    }\r\n    if (isRole.role === \"librarian\") {\r\n      return <option value=\"user\">Người Dùng</option>;\r\n    }\r\n  };\r\n\r\n  const handleForm = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  const handleChangeInfo = () => {\r\n    onChangeInfo(searchInfo);\r\n  };\r\n\r\n  const handleSearchByName = (e) => {\r\n    const name = e.target.name;\r\n    const value = e.target.value;\r\n\r\n    if (typingRef.current) {\r\n      clearTimeout(typingRef.current);\r\n    }\r\n\r\n    typingRef.current = setTimeout(() => {\r\n      if (value !== \"\") {\r\n        setSearchInfo({\r\n          ...searchInfo,\r\n          [name]: value,\r\n        });\r\n      } else {\r\n        setSearchInfo({ ...searchInfo, [name]: \" \" });\r\n      }\r\n    }, 500);\r\n  };\r\n\r\n  return (\r\n    <Form className=\"formSearch\" onSubmit={handleForm}>\r\n      <div className=\"checkboxForm\">\r\n        <Form.Group className=\"checkboxForm_items\">\r\n          <Form.Label className=\"checkboxForm_items_label\">Chức vụ</Form.Label>\r\n          <Form.Select\r\n            className=\"checkboxForm_items_control\"\r\n            name=\"role\"\r\n            onChange={(e) =>\r\n              setSearchInfo({\r\n                ...searchInfo,\r\n                [e.target.name]: e.target.value,\r\n              })\r\n            }\r\n          >\r\n            {checkRole()}\r\n          </Form.Select>\r\n        </Form.Group>\r\n        <Form.Group className=\"checkboxForm_items\">\r\n          <Form.Label className=\"checkboxForm_items_label\">\r\n            Trạng thái\r\n          </Form.Label>\r\n          <Form.Select\r\n            className=\"checkboxForm_items_control\"\r\n            name=\"status\"\r\n            onChange={(e) =>\r\n              setSearchInfo({\r\n                ...searchInfo,\r\n                [e.target.name]: e.target.value,\r\n              })\r\n            }\r\n          >\r\n            <option value=\"active\">Kích hoạt</option>\r\n            <option value=\"inactive\">Không kích hoạt</option>\r\n          </Form.Select>\r\n        </Form.Group>\r\n        <Form.Group className=\"checkboxForm_items\">\r\n          <Form.Label className=\"checkboxForm_items_label\">Sắp xếp</Form.Label>\r\n          <Form.Select\r\n            className=\"checkboxForm_items_control\"\r\n            name=\"sortBy\"\r\n            onChange={(e) =>\r\n              setSearchInfo({\r\n                ...searchInfo,\r\n                [e.target.name]: e.target.value,\r\n              })\r\n            }\r\n          >\r\n            <option value=\"name:asc\">Tăng dần</option>\r\n            <option value=\"name:desc\">Giảm dần</option>\r\n          </Form.Select>\r\n        </Form.Group>\r\n      </div>\r\n      <div className=\"inputForm\">\r\n        <Form.Group className=\"inputForm_items\">\r\n          <Form.Label className=\"inputForm_items_label\">\r\n            Tên người dùng\r\n          </Form.Label>\r\n          <Form.Control\r\n            name=\"name\"\r\n            className=\"inputForm_items_control\"\r\n            placeholder=\"Nhập tên người dùng\"\r\n            onChange={handleSearchByName}\r\n          />\r\n        </Form.Group>\r\n        <Button\r\n          className=\"inputForm_button\"\r\n          type=\"submit\"\r\n          onClick={() => handleChangeInfo()}\r\n        >\r\n          <FcSearch style={{ fontSize: \"30px\" }} />\r\n          Tìm Kiếm\r\n        </Button>\r\n      </div>\r\n    </Form>\r\n  );\r\n}\r\n\r\nexport default SearchUsersAdmin;\r\n","import adminApi from \"apis/adminApi\";\r\nimport React from \"react\";\r\nimport { Button, Modal } from \"react-bootstrap\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { deleteUserById } from \"reducers/adminSlice\";\r\n\r\nimport \"./ModalHandle.scss\";\r\n\r\nfunction ModalDeleteUserId({ userId, isShow, onShow, userEmail }) {\r\n  const dispatch = useDispatch();\r\n\r\n  //Delete books by id\r\n  const deleteUserId = async () => {\r\n    const id = userId;\r\n    try {\r\n      await adminApi.deleteUser(id);\r\n      alert(\"Xoá người dùng hoàn tất\");\r\n      //reset lại user\r\n      dispatch(deleteUserById());\r\n      onShow(false);\r\n    } catch (error) {\r\n      console.log(\"có lỗi\", { error });\r\n    }\r\n  };\r\n  const handleClick = () => {\r\n    deleteUserId();\r\n  };\r\n\r\n  //Thiết lập cho cha\r\n  const handleClose = () => {\r\n    return onShow(false);\r\n  };\r\n  return (\r\n    <>\r\n      <Modal show={isShow} onHide={handleClose}>\r\n        <Modal.Header>\r\n          <Modal.Title>Xoá người dùng</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          Xoá người dùng có gmail là <strong> {userEmail}</strong>, bạn có chắc\r\n          chắn xoá không?\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"danger\" onClick={handleClick}>\r\n            Xoá người dùng\r\n          </Button>\r\n          <Button variant=\"secondary\" onClick={handleClose}>\r\n            Quay lại\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ModalDeleteUserId;\r\n","import ModalDeleteUserId from \"components/customComponents/Modals/ModalHandle/ModalDeleteUserId\";\r\nimport React, { useState } from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\n\r\nimport { GoTrashcan } from \"react-icons/go\";\r\n\r\nfunction DeleteUser({ userId, userEmail }) {\r\n  const [show, setShow] = useState(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  //Nhận props từ con\r\n  const onShow = (isShow) => {\r\n    // console.log(\"cha nhận được từ con\", isShow);\r\n    setShow(isShow);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button variant=\"none\" onClick={handleShow}>\r\n        {/* Xoá người dùng */}\r\n        <GoTrashcan style={{ fontSize: \"30px\", color: \"red\" }} />\r\n      </Button>\r\n      <ModalDeleteUserId\r\n        onShow={onShow}\r\n        isShow={show}\r\n        userEmail={userEmail}\r\n        userId={userId}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default DeleteUser;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Modal, Button, Form } from \"react-bootstrap\";\r\nimport adminApi from \"apis/adminApi\";\r\nimport \"./ModalsForm.scss\";\r\n\r\nfunction ModalUpdateUserInfo({ isShow, onShow, userInfo }) {\r\n  const [email, setEmail] = useState(userInfo.email);\r\n  const [name, setName] = useState(userInfo.name);\r\n  const [status, setStatus] = useState(userInfo.status);\r\n  const [password, setPassword] = useState(null);\r\n  const [show, setShow] = useState(false);\r\n\r\n  //Thiết lập cho cha\r\n  const handleClose = () => {\r\n    return onShow(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    handlePassWord();\r\n  }, [password]);\r\n\r\n  const handlePassWord = () => {\r\n    if (password) {\r\n      return { password: password };\r\n    } else {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const updateUserInfo = async () => {\r\n    //id user\r\n    const userId = userInfo.id;\r\n    const password = handlePassWord();\r\n    //data update\r\n    const bookInfo = {\r\n      name: name,\r\n      email: email,\r\n      status: status,\r\n      ...password,\r\n    };\r\n\r\n    try {\r\n      await adminApi.updateUser(userId, bookInfo);\r\n\r\n      alert(\"Cập nhật thông tin người dùng thành công\");\r\n      onShow(false);\r\n    } catch (error) {\r\n      console.log(\"lỗi\", { error });\r\n      alert(error.response.data.message);\r\n      onShow(false);\r\n    }\r\n  };\r\n\r\n  const handleClick = () => {\r\n    // console.log(\"update user\", userInfo.id, { password, status, name });\r\n    updateUserInfo();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Modal show={isShow} onHide={handleClose}>\r\n        <Modal.Header>\r\n          <span className=\"title\">Thay đổi thông tin người dùng</span>\r\n          <span className=\"note\">(Chỉ nhập thông tin cần thay đổi)</span>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <Form className=\"formMenu\">\r\n            {/* Email */}\r\n            <Form.Group className=\"formMenu_items\">\r\n              <Form.Label className=\"formMenu_items_label\">Email</Form.Label>\r\n              <Form.Control\r\n                value={email}\r\n                type=\"email\"\r\n                // placeholder=\"Nhập địa chỉ email\"\r\n                className=\"formMenu_items_control\"\r\n                // onChange={(e) => setEmail(e.target.value)}\r\n                disabled\r\n              />\r\n            </Form.Group>\r\n            {/* UserName */}\r\n            <Form.Group className=\"formMenu_items\">\r\n              <Form.Label className=\"formMenu_items_label\">\r\n                Tên người dùng\r\n              </Form.Label>\r\n              <Form.Control\r\n                value={name}\r\n                type=\"text\"\r\n                placeholder=\"Nhập tên người dùng\"\r\n                className=\"formMenu_items_control\"\r\n                onChange={(e) => setName(e.target.value)}\r\n              />\r\n            </Form.Group>\r\n            {/* status */}\r\n            <Form.Group className=\"formMenu_items\">\r\n              <Form.Label className=\"formMenu_items_label\">\r\n                Trạng thái\r\n              </Form.Label>\r\n              <Form.Select\r\n                value={status}\r\n                name=\"status\"\r\n                className=\"formMenu_items_checkbox\"\r\n                onChange={(e) => setStatus(e.target.value)}\r\n              >\r\n                <option value=\"inactive\">Không kích hoạt</option>\r\n                <option value=\"active\">Kích hoạt</option>\r\n              </Form.Select>\r\n            </Form.Group>\r\n            {/* Password */}\r\n            <Form.Group className=\"formMenu_items\">\r\n              <Form.Label className=\"formMenu_items_label\">Mật Khẩu</Form.Label>\r\n              <Form.Control\r\n                value={password}\r\n                type=\"password\"\r\n                placeholder=\"Nhập mật khẩu\"\r\n                className=\"formMenu_items_control\"\r\n                onChange={(e) => {\r\n                  setPassword(e.target.value);\r\n                }}\r\n              />\r\n            </Form.Group>\r\n          </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"success\" onClick={handleClick}>\r\n            Thay đổi thông tin\r\n          </Button>\r\n          <Button variant=\"secondary\" onClick={handleClose}>\r\n            Quay lại\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ModalUpdateUserInfo;\r\n","import ModalUpdateUserInfo from \"components/customComponents/Modals/ModalForm/ModalUpdateUserInfo\";\r\nimport React, { useState } from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\n\r\nimport { FaEdit } from \"react-icons/fa\";\r\n\r\nfunction UpdateUser({ userInfo, onUpdate, update }) {\r\n  // console.log(\"update user nhận từ view user\", userInfo);\r\n  const [show, setShow] = useState(false);\r\n\r\n  const handleShow = () => {\r\n    setShow(true);\r\n  };\r\n\r\n  //Nhận props từ con\r\n  const onShow = (isShow) => {\r\n    setShow(isShow);\r\n    onUpdate(!update);\r\n  };\r\n  return (\r\n    <>\r\n      <Button variant=\"none\" onClick={handleShow}>\r\n        {/* Thay đổi thông tin */}\r\n        <FaEdit style={{ fontSize: \"30px\", color: \"#045B21\" }} />\r\n      </Button>\r\n      <ModalUpdateUserInfo onShow={onShow} isShow={show} userInfo={userInfo} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default UpdateUser;\r\n","import React from \"react\";\r\nimport { Modal, Button } from \"react-bootstrap\";\r\n\r\nfunction ModalViewUserDetails({ isShow, onShow, userDetails }) {\r\n  // console.log(userDetails);\r\n  const handleClose = () => {\r\n    return onShow(false);\r\n  };\r\n\r\n  //render components\r\n\r\n  const countExpired = (copies) => {\r\n    const times = copies.filter((time) => time.status === \"expired\");\r\n    return times.length;\r\n  };\r\n  const countSuccess = (copies) => {\r\n    const times = copies.filter((time) => time.status === \"fulfilled\");\r\n    return times.length;\r\n  };\r\n  const countCopies = (copies) => {\r\n    return copies.length;\r\n  };\r\n  const checkEmail = (status) => {\r\n    if (status) {\r\n      return <span>(đã kích hoạt)</span>;\r\n    } else {\r\n      return <span style={{ color: \"red\" }}>(chưa kích hoạt)</span>;\r\n    }\r\n  };\r\n\r\n  const RenderInfo = () => {\r\n    return (\r\n      <div className=\"detailsUsers\">\r\n        <div>\r\n          <strong>Tên người dùng: </strong>\r\n          {userDetails.name}\r\n        </div>\r\n        <div>\r\n          <strong>Mã ID người dùng: </strong>\r\n          {/* {userDetails.id} */}\r\n          {userDetails.uid}\r\n        </div>\r\n        <div>\r\n          <strong>Địa chỉ email: </strong>\r\n          {userDetails.email}\r\n          {checkEmail(userDetails.isEmailVerified)}\r\n        </div>\r\n        <div>\r\n          <strong>Trạng thái: </strong>\r\n          {userDetails.status}\r\n        </div>\r\n        <div>\r\n          <strong>Chức vụ: </strong>\r\n          {userDetails.role}\r\n        </div>\r\n        <div>\r\n          <strong>Tổng sách đang mượn: </strong>\r\n          {countCopies(userDetails.books)} cuốn\r\n        </div>\r\n        <div>\r\n          <strong>Số lần bỏ hẹn: </strong>\r\n          {countExpired(userDetails.reservations)} lần\r\n        </div>\r\n        <div>\r\n          <strong>Số lần đặt hẹn thành công: </strong>\r\n          {countSuccess(userDetails.reservations)} lần\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Modal show={isShow} onHide={handleClose}>\r\n      <Modal.Header>\r\n        <Modal.Title>Thông tin chi tiết người dùng</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <RenderInfo />\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={handleClose}>\r\n          Đóng\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default ModalViewUserDetails;\r\n","import ModalViewUserDetails from \"components/customComponents/Modals/ModalForm/ModalViewUserDetails\";\r\nimport React, { useState } from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\n\r\nimport { GoInfo } from \"react-icons/go\";\r\n\r\nfunction UserDetails({ userInfo }) {\r\n  const [show, setShow] = useState(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  //Nhận props từ con\r\n  const onShow = (isShow) => {\r\n    setShow(isShow);\r\n  };\r\n  return (\r\n    <>\r\n      <Button variant=\"none\" onClick={handleShow}>\r\n        {/* Xem chi tiết */}\r\n        <GoInfo style={{ fontSize: \"30px\", color: \"#714FFC\" }} />\r\n      </Button>\r\n\r\n      <ModalViewUserDetails\r\n        onShow={onShow}\r\n        isShow={show}\r\n        userDetails={userInfo}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default UserDetails;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Table } from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getUsers, selectTotalUsers } from \"reducers/adminSlice\";\r\nimport adminApi from \"apis/adminApi\";\r\n\r\nimport SearchUsersAdmin from \"components/customComponents/InputForms/SearchForm/SearchUsersAdmin\";\r\nimport PaginationItems from \"components/customComponents/PaginationItems/PaginationItems\";\r\nimport DeleteUser from \"../DeleteUser/DeleteUser\";\r\nimport UpdateUser from \"../UpdateUser/UpdateUser\";\r\nimport UserDetails from \"../UserDetails/UserDetails\";\r\n\r\nimport \"components/Admin/Manage/ViewForm.scss\";\r\nimport { renderCheckActive } from \"constants/RenderDate\";\r\n\r\nfunction ViewUser() {\r\n  document.title = \"Danh sách người dùng\";\r\n\r\n  //Thông tin user\r\n  const [userItems, setUserItems] = useState([]);\r\n  //Để search\r\n  const [searchInfo, setSearchInfo] = useState();\r\n  //Để update\r\n  const [update, setUpdate] = useState(false);\r\n\r\n  //Nhận user từ redux\r\n  const users = useSelector(selectTotalUsers);\r\n  const dispatch = useDispatch();\r\n\r\n  //Pagination\r\n  const [role, setRole] = useState(\"user\");\r\n  const [totalUsers, setTotalUsers] = useState();\r\n  const [limitPage, setLimitPage] = useState(5);\r\n  const [newPage, setNewPage] = useState(1);\r\n\r\n  //Chuyển trang mới\r\n  const handleChangePage = (newPage) => {\r\n    setNewPage(newPage);\r\n  };\r\n  const handleLimitChange = (newLimit) => {\r\n    setNewPage(1);\r\n    setLimitPage(newLimit);\r\n  };\r\n\r\n  //Lần 1 render all\r\n  useEffect(() => {\r\n    getAllUsers();\r\n  }, [newPage, limitPage, searchInfo, users, update]);\r\n\r\n  const getAllUsers = async () => {\r\n    const params = {\r\n      role: role,\r\n      page: newPage,\r\n      limit: limitPage,\r\n      ...searchInfo,\r\n    };\r\n    // console.log(\"tiến hành search\", params);\r\n    try {\r\n      const response = await adminApi.getAllUser(params);\r\n      setUserItems();\r\n      // console.log(response);\r\n      setUserItems(response.results);\r\n      //Lưu vô session storage\r\n      sessionStorage.setItem(\r\n        \"totalUsers\",\r\n        JSON.stringify(response.totalResults)\r\n      );\r\n      //Để phân trang\r\n      setTotalUsers(response.totalResults);\r\n      //Lưu vô redux\r\n      dispatch(getUsers(response.results));\r\n    } catch (error) {\r\n      // setErr(error.response.data.message);\r\n      console.log(\"có lỗi\", { error });\r\n    }\r\n  };\r\n\r\n  //render component\r\n  const activeEmail = (isActive, email) => {\r\n    if (!isActive) {\r\n      return <span style={{ color: \"red\" }}>{email}</span>;\r\n    } else {\r\n      return <span>{email}</span>;\r\n    }\r\n  };\r\n\r\n  //Nhập giá trị update sau khi thay đổi\r\n  const handleUpdate = (status) => {\r\n    setUpdate(status);\r\n  };\r\n\r\n  //Nhận thông tin từ user con\r\n  const handleInfo = (infoUser) => {\r\n    // console.log(\"đã nhận được thông tin\", infoUser);\r\n    setNewPage(1);\r\n    setSearchInfo(infoUser);\r\n  };\r\n\r\n  const showUsers = userItems?.map((user, index) => {\r\n    return (\r\n      <tr key={index}>\r\n        <td>{index + 1 + (newPage - 1) * limitPage} </td>\r\n        <td className=\"emailName\">\r\n          {activeEmail(user.isEmailVerified, user.email)}\r\n        </td>\r\n        <td>{user.name}</td>\r\n        <td>{user.role}</td>\r\n        <td>{renderCheckActive(user.status)}</td>\r\n\r\n        {/* custom td */}\r\n        <td>\r\n          <UpdateUser onUpdate={handleUpdate} update={update} userInfo={user} />\r\n        </td>\r\n        <td>\r\n          <DeleteUser userId={user.id} userEmail={user.email} />\r\n        </td>\r\n        <td>\r\n          <UserDetails userInfo={user} />\r\n        </td>\r\n      </tr>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <div className=\"viewMenu\">\r\n      <legend className=\"viewMenu_title\">Quản lý thông tin người dùng</legend>\r\n      <div className=\"viewMenu_search\">\r\n        <div className=\"search\">\r\n          <SearchUsersAdmin onChangeInfo={handleInfo} />\r\n        </div>\r\n      </div>\r\n      <div className=\"viewMenu_table\">\r\n        <Table className=\"tableForm\" striped bordered hover>\r\n          <thead className=\"tableForm_header\">\r\n            <tr>\r\n              <th>STT</th>\r\n              <th>Email</th>\r\n              <th>Tên Người Dùng</th>\r\n              <th>Chức vụ</th>\r\n              <th>Trạng thái</th>\r\n              <th>Thay đổi thông tin</th>\r\n              <th>Xoá người dùng</th>\r\n              <th>Xem chi tiết</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"tableForm_body\">{showUsers}</tbody>\r\n        </Table>\r\n      </div>\r\n      <div className=\"viewMenu_pagination\">\r\n        <PaginationItems\r\n          totalRows={totalUsers}\r\n          limit={limitPage}\r\n          activePage={newPage}\r\n          onChangePage={handleChangePage}\r\n          onChangeLimit={handleLimitChange}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ViewUser;\r\n","import AdminPage from \"components/Admin/AdminPage/AdminPage\";\r\nimport DashBoard from \"components/Admin/DashBoard/DashBoard\";\r\nimport GetBooks from \"components/Admin/Manage/Books/ViewBooks/ViewBooks\";\r\nimport ReportActivities from \"components/Admin/Manage/Reports/ReportActivities/ReportActivities\";\r\nimport ReportLibrarian from \"components/Admin/Manage/Reports/ReportLibrarian/ReportLibrarian\";\r\nimport CreateUser from \"components/Admin/Manage/Users/CreateUser/CreateUser\";\r\nimport ViewUser from \"components/Admin/Manage/Users/ViewUser/ViewUser\";\r\nimport React from \"react\";\r\nimport { Route, Switch, useRouteMatch } from \"react-router-dom\";\r\nimport \"./Admin.scss\";\r\n\r\nfunction Admin() {\r\n  let { path, url } = useRouteMatch();\r\n  // console.log(\"admin routes:\", path);\r\n  return (\r\n    <div className=\"adminPage\">\r\n      <Switch>\r\n        <div className=\"containerDashBoard\">\r\n          <div className=\"containerDashBoard_menu\">\r\n            <DashBoard url={url} />\r\n          </div>\r\n\r\n          <div\r\n            className=\"containerDashBoard_content\"\r\n            style={{ overflowY: \"scroll\" }}\r\n          >\r\n            <div className=\"containerDashBoard_content_lists\">\r\n              <Route\r\n                path={`${path}`}\r\n                component={() => <AdminPage />}\r\n                exact={true}\r\n              />\r\n\r\n              {/* Quản lý users */}\r\n              <Route\r\n                path={`${path}/users`}\r\n                component={() => <ViewUser />}\r\n                exact={true}\r\n              />\r\n\r\n              <Route\r\n                path={`${path}/users/create`}\r\n                component={() => <CreateUser />}\r\n                exact={true}\r\n              />\r\n\r\n              {/* Quản lý sách */}\r\n              <Route\r\n                path={`${path}/books`}\r\n                component={() => <GetBooks />}\r\n                exact={true}\r\n              />\r\n\r\n              {/* Xuất báo cáo */}\r\n              <Route\r\n                path={`${path}/report`}\r\n                component={() => <ReportActivities />}\r\n                exact={true}\r\n              />\r\n              <Route\r\n                path={`${path}/report/activities`}\r\n                component={() => <ReportLibrarian />}\r\n                exact={true}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Admin;\r\n","import axiosClient from \"./axiosClient\";\r\n// const { default: axiosClient } = require(\"./axiosClient\");\r\n\r\n// const USER_API_ENDPOINT = \"/users\";\r\nconst USER_API_ENDPOINT = \"/users\";\r\nconst userApi = {\r\n  //Phần user tự quản lý\r\n\r\n  //fn: xem info của user\r\n  getInfoUsers: (idUser) => {\r\n    const url = `${USER_API_ENDPOINT}/${idUser}`;\r\n    return axiosClient.get(url);\r\n  },\r\n  //fn: thay đổi thông tin ngườI dùng\r\n  updateInfo: (idUser, infoUpdate) => {\r\n    const url = `${USER_API_ENDPOINT}/${idUser}`;\r\n    return axiosClient.patch(url, { params: infoUpdate });\r\n  },\r\n  //người dùng thay đôie\r\n  userUpdateInfo: (idUser, infoUpdate) => {\r\n    const url = `${USER_API_ENDPOINT}/${idUser}`;\r\n    return axiosClient.patch(url, infoUpdate);\r\n  },\r\n  // fn: lấy danh sách trong giỏ hàng\r\n  getCarts: (id) => {\r\n    const url = `${USER_API_ENDPOINT}/${id}/cart`;\r\n    return axiosClient.get(url);\r\n  },\r\n\r\n  //fn: thêm sách vào giỏ sách\r\n  postAddToCart: (id, bookId) => {\r\n    const url = `${USER_API_ENDPOINT}/${id}/cart/${bookId}`;\r\n    return axiosClient.post(url);\r\n  },\r\n\r\n  //fn: xoá sách khỏi giỏ sách\r\n  deleteBooksOfCart: (id, bookId) => {\r\n    const url = `${USER_API_ENDPOINT}/${id}/cart/${bookId}`;\r\n    return axiosClient.delete(url);\r\n  },\r\n\r\n  //fn: xem lịch sử mượn trả sách\r\n  postScheduledTimes: (userId) => {\r\n    const url = `${USER_API_ENDPOINT}/${userId}/books`;\r\n    return axiosClient.get(url);\r\n  },\r\n  //fn: tạo lịch hẹn nhận sách mới\r\n  postSchedule: (id, books) => {\r\n    const url = `${USER_API_ENDPOINT}/${id}/reservations`;\r\n    return axiosClient.post(url, books);\r\n  },\r\n\r\n  //fn: Lấy danh sách hẹn của người dùng (người dùng xem, admin-librarian xem)\r\n  getSchedule: (id) => {\r\n    const url = `${USER_API_ENDPOINT}/${id}/reservations`;\r\n    return axiosClient.get(url);\r\n  },\r\n  //Xoá 1 lịch hẹn\r\n  postDeleteReservation: (userId, reservedId) => {\r\n    const url = `${USER_API_ENDPOINT}/${userId}/reservations/${reservedId}`;\r\n    return axiosClient.delete(url);\r\n  },\r\n\r\n  //Phần admin, librarian quản lý\r\n\r\n  //fn: Lấy danh sách đã đặt hẹn của người dùng\r\n  getBookReserved: (userId) => {\r\n    const url = `${USER_API_ENDPOINT}/${userId}/books/copies/reservations`;\r\n    return axiosClient.get(url);\r\n  },\r\n  // Lấy danh sách tất cả lịch hẹn của người dùng\r\n  getUserReservation: (userInfo) => {\r\n    const url = `${USER_API_ENDPOINT}/reservations`;\r\n    return axiosClient.get(url, { params: userInfo });\r\n  },\r\n};\r\n\r\nexport default userApi;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst userSlice = createSlice({\r\n  name: \"cartItems\",\r\n  initialState: {\r\n    //book from carts\r\n    carts: JSON.parse(sessionStorage.getItem(\"myCarts\"))\r\n      ? JSON.parse(sessionStorage.getItem(\"myCarts\")).results\r\n      : null,\r\n    //quantity of books from carts\r\n    totalCarts: JSON.parse(sessionStorage.getItem(\"myCarts\"))\r\n      ? JSON.parse(sessionStorage.getItem(\"myCarts\")).totalResults\r\n      : null,\r\n    // isUpdate: false,\r\n  },\r\n  reducers: {\r\n    //Nhận books khi load lại Cart từ api\r\n    getMyCarts(state, action) {\r\n      state.carts = action.payload;\r\n    },\r\n    //Nhận số lượng of books khi load lại Cart từ api\r\n    getTotalCarts(state, action) {\r\n      state.totalCarts = action.payload;\r\n    },\r\n    //Xoá books\r\n    deleteCartsId(state, action) {\r\n      const newItemsFromCarts = state.carts.filter(\r\n        (cartItem) => cartItem.id !== action.payload\r\n      );\r\n      // console.log(\"đây là từ delete redux\", newItemsFromCarts);\r\n      state.totalCarts = state.totalCarts - 1;\r\n      state.carts = newItemsFromCarts;\r\n      sessionStorage.setItem(\"myCarts\", JSON.stringify(state.carts));\r\n    },\r\n    //Add books\r\n    addCartsId(state, action) {\r\n      const newBookId = action.payload;\r\n      const newItemsFromCarts = { ...state.carts, newBookId };\r\n\r\n      state.totalCarts = state.totalCarts + 1;\r\n      state.carts = newItemsFromCarts;\r\n      sessionStorage.setItem(\"myCarts\", JSON.stringify(state.carts));\r\n    },\r\n    // isUpdateCart(state) {\r\n    //   state.isUpdate = true;\r\n    // },\r\n  },\r\n});\r\n\r\nexport const {\r\n  getMyCarts,\r\n  getTotalCarts,\r\n  deleteCartsId,\r\n  addCartsId,\r\n  isUpdateCarts,\r\n} = userSlice.actions;\r\n\r\nexport const selectMyCarts = (state) => state.user.carts;\r\nexport const selectMyTotalCarts = (state) => state.user.totalCarts;\r\n// export const selectUpdateCarts = (state) => state.books.isUpdate;\r\n\r\nexport default userSlice.reducer;\r\n","import userApi from \"apis/userApi\";\r\nimport React from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { AiOutlineShoppingCart } from \"react-icons/ai\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router\";\r\nimport { selectUser } from \"reducers/authSlice\";\r\nimport { addCartsId } from \"reducers/userSlice\";\r\n//Toast\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport \"./ButtonStyleCarts.scss\";\r\n\r\nfunction ButtonAddCarts({ product }) {\r\n  //Custom alert\r\n  const notify = (status, info) =>\r\n    toast[status](info, { position: toast.POSITION.BOTTOM_LEFT });\r\n\r\n  const user = useSelector(selectUser);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const addCarts = async () => {\r\n    const userId = user.id;\r\n    const bookId = product.id;\r\n    try {\r\n      await userApi.postAddToCart(userId, bookId);\r\n      // console.log(\"thêm vào thành công\");\r\n\r\n      //truyền vô redux\r\n      dispatch(addCartsId(bookId));\r\n      notify(\"success\", \"Thêm sản phẩm thành công\");\r\n      // alert(\"Add sản phẩm thành công\");\r\n    } catch (error) {\r\n      // console.log(\"lỗi tại buttonAddCarts\", error.response.data.message);\r\n      // alert(`Thất bại ${error.response.data.message}`);\r\n      notify(\"warn\", `Thêm thất bại ${error.response.data.message}`);\r\n    }\r\n  };\r\n\r\n  const handleAdd = () => {\r\n    if (!user) {\r\n      history.push(\"/login\");\r\n    } else {\r\n      addCarts();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button className=\"btnClick\" onClick={() => handleAdd()}>\r\n        <AiOutlineShoppingCart className=\"btnClick_icon\" />\r\n        <span className=\"btnClick_name\">Thêm vào giỏ sách</span>\r\n      </Button>\r\n      <ToastContainer />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ButtonAddCarts;\r\n","import productsApi from \"apis/productsApi\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Card, Button } from \"react-bootstrap\";\r\nimport Carousel from \"react-elastic-carousel\";\r\nimport { useHistory, useRouteMatch } from \"react-router\";\r\n\r\nimport \"./BookRelate.scss\";\r\n\r\nfunction BookByAuthor({ authorName, bookId }) {\r\n  const history = useHistory();\r\n  const { path } = useRouteMatch();\r\n\r\n  const breakPoints = [\r\n    {\r\n      width: 1,\r\n      itemsToShow: 1,\r\n    },\r\n    {\r\n      width: 550,\r\n      itemsToShow: 2,\r\n    },\r\n    {\r\n      width: 768,\r\n      itemsToShow: 3,\r\n    },\r\n    {\r\n      width: 1200,\r\n      itemsToShow: 4,\r\n    },\r\n  ];\r\n\r\n  const [books, setBooks] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getBookByAuthor(...authorName);\r\n  }, [authorName]);\r\n\r\n  //   useEffect(() => {\r\n  //     console.log(books);\r\n  //   }, [books]);\r\n\r\n  const getBookByAuthor = async (authorName) => {\r\n    try {\r\n      const response = await productsApi.getBooks({\r\n        authors: authorName,\r\n      });\r\n      setBooks(response.results);\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n  const handleViewDetail = (bookId) => {\r\n    history.push(`${path.split(\":\")[0]}${bookId}`);\r\n  };\r\n\r\n  const renderBooks = books?.map((book, index) => {\r\n    if (book.id !== bookId) {\r\n      return (\r\n        <Card key={index}>\r\n          <Card.Img variant=\"top\" src={book.cover} />\r\n          <Card.Body>\r\n            <Card.Title>{book.title}</Card.Title>\r\n            <Card.Text>\r\n              <strong>Tác giả </strong>\r\n              {book.authors}\r\n              <br /> <strong>Thể loại </strong>\r\n              {book.categories}\r\n            </Card.Text>\r\n          </Card.Body>\r\n          <Card.Footer>\r\n            <Button onClick={() => handleViewDetail(book.id)}>\r\n              Xem chi tiết\r\n            </Button>\r\n          </Card.Footer>\r\n        </Card>\r\n      );\r\n    }\r\n  });\r\n\r\n  const renderCarousel = () => {\r\n    if (books.length > 1) {\r\n      return <Carousel breakPoints={breakPoints}>{renderBooks}</Carousel>;\r\n    } else {\r\n      return <span className=\"notFindRelate\">Tạm thời chưa có cuốn nào</span>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"carouselForm\">\r\n      <legend>Những sách cùng chung tác giả: {authorName}</legend>\r\n      {renderCarousel()}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BookByAuthor;\r\n","import React from \"react\";\r\nimport { AiOutlineFieldTime, AiFillLike, AiOutlineMail } from \"react-icons/ai\";\r\nimport { BiPhoneCall } from \"react-icons/bi\";\r\nimport \"./Footer.scss\";\r\nfunction Footer() {\r\n  return (\r\n    <div className=\"footer\">\r\n      <div className=\"footer_items\">\r\n        <AiOutlineFieldTime className=\"icon\" />\r\n        <span className=\"title\">Tiết kiệm thời gian</span>\r\n      </div>\r\n      <div className=\"footer_items\">\r\n        <AiFillLike className=\"icon\" />\r\n        <span className=\"title\">Đa dạng và chất lượng</span>\r\n      </div>\r\n      <div className=\"footer_items\">\r\n        <BiPhoneCall className=\"icon\" />\r\n        <span className=\"title\">Liên hệ: 000.222.222</span>\r\n      </div>\r\n      <div className=\"footer_items\">\r\n        <AiOutlineMail className=\"icon\" />\r\n        <span className=\"title\">Email: email@gmail</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import productsApi from \"apis/productsApi\";\r\nimport Footer from \"components/HomePage/Header/Footer/Footer\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Card, Button } from \"react-bootstrap\";\r\nimport Carousel from \"react-elastic-carousel\";\r\nimport { useHistory, useRouteMatch } from \"react-router\";\r\n\r\nimport \"./BookRelate.scss\";\r\n\r\nfunction BookByCategories({ categoriesName, bookId }) {\r\n  const history = useHistory();\r\n  const { path } = useRouteMatch();\r\n\r\n  const breakPoints = [\r\n    {\r\n      width: 1,\r\n      itemsToShow: 1,\r\n    },\r\n    {\r\n      width: 550,\r\n      itemsToShow: 2,\r\n    },\r\n    {\r\n      width: 768,\r\n      itemsToShow: 3,\r\n    },\r\n    {\r\n      width: 1200,\r\n      itemsToShow: 4,\r\n    },\r\n  ];\r\n\r\n  const [books, setBooks] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getBookByCategories(...categoriesName);\r\n  }, [categoriesName]);\r\n\r\n  //   useEffect(() => {\r\n  //     console.log(books);\r\n  //   }, [books]);\r\n\r\n  const getBookByCategories = async (categoriesName) => {\r\n    try {\r\n      const response = await productsApi.getBooks({\r\n        categories: categoriesName,\r\n      });\r\n      setBooks(response.results);\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n  const handleViewDetail = (bookId) => {\r\n    history.push(`${path.split(\":\")[0]}${bookId}`);\r\n  };\r\n\r\n  const renderBooks = books?.map((book, index) => {\r\n    if (book.id !== bookId) {\r\n      return (\r\n        <Card key={index}>\r\n          <Card.Img variant=\"top\" src={book.cover} />\r\n          <Card.Body>\r\n            <Card.Title>{book.title}</Card.Title>\r\n            <Card.Text>\r\n              <strong>Tác giả </strong>\r\n              {book.authors}\r\n              <br /> <strong>Thể loại </strong>\r\n              {book.categories}\r\n            </Card.Text>\r\n          </Card.Body>\r\n          <Card.Footer>\r\n            <Button onClick={() => handleViewDetail(book.id)}>\r\n              Xem chi tiết\r\n            </Button>\r\n          </Card.Footer>\r\n        </Card>\r\n      );\r\n    }\r\n  });\r\n\r\n  const renderCarousel = () => {\r\n    if (books.length > 1) {\r\n      return <Carousel breakPoints={breakPoints}>{renderBooks}</Carousel>;\r\n    } else {\r\n      return <span className=\"notFindRelate\">Tạm thời chưa có cuốn nào</span>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"carouselForm\">\r\n        <legend>Những sách cùng chung thể loại: {categoriesName}</legend>\r\n        {renderCarousel()}\r\n      </div>\r\n      {/* <Footer /> */}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default BookByCategories;\r\n","import productsApi from \"apis/productsApi\";\r\nimport ButtonAddCarts from \"components/customComponents/ButtonHandleCarts/ButtonAddCarts\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useLocation } from \"react-router\";\r\nimport BookByAuthor from \"../BookRelate/BookByAuthor\";\r\nimport BookByCategories from \"../BookRelate/BookByCategories\";\r\nimport \"./BookDetails.scss\";\r\n\r\nfunction BookDetails() {\r\n  document.title = \"Thông tin chi tiết sách\";\r\n\r\n  const [productDetails, setProductDetails] = useState([]);\r\n\r\n  //Relate\r\n  const [authorName, setAuthorName] = useState(\"\");\r\n  const [categoriesName, setCategoriesName] = useState(\"\");\r\n\r\n  const location = useLocation();\r\n\r\n  const bookId = location.pathname.split(\"/\")[3];\r\n\r\n  //render components\r\n  const checkQuantity = (books) => {\r\n    // console.log(books);\r\n    return books.length;\r\n  };\r\n  const checkAuthorName = (author) => {\r\n    // console.log(\"tác giả\", author);\r\n    return author;\r\n  };\r\n\r\n  useEffect(() => {\r\n    getDetails();\r\n  }, [bookId]);\r\n\r\n  const getDetails = async () => {\r\n    try {\r\n      const response = await productsApi.getBooksById(bookId);\r\n      // console.log(response);\r\n      //Set để render\r\n      setProductDetails([response]);\r\n      //Thông tin liên quan\r\n      setAuthorName(response.authors);\r\n      setCategoriesName(response.categories);\r\n    } catch (error) {\r\n      console.log({ error });\r\n    }\r\n  };\r\n\r\n  // console.log(productDetails);\r\n  //   console.log(getDetails);\r\n  const renderBook = productDetails?.map((details, index) => {\r\n    return (\r\n      <div className=\"containProducts_details\" key={index}>\r\n        {/* Hình ảnh minh hoạ */}\r\n        <div className=\"containProducts_details_img\">\r\n          <img alt=\"img-title\" src={details.cover} />\r\n        </div>\r\n        {/* Thông tin chi tiết */}\r\n        <table className=\"containProducts_details_contents\">\r\n          <tbody>\r\n            <tr className=\"containProducts_details_contents_rows\">\r\n              <td>\r\n                <strong>Tên sách</strong>\r\n              </td>\r\n              <td>{details.title}</td>\r\n              <td></td>\r\n            </tr>\r\n            <tr className=\"containProducts_details_contents_rows\">\r\n              <td>\r\n                <strong>Thể loại</strong>\r\n              </td>\r\n              <td>{details.categories}</td>\r\n              <td></td>\r\n            </tr>\r\n            <tr className=\"containProducts_details_contents_rows\">\r\n              <td>\r\n                <strong>Tác giả</strong>\r\n              </td>\r\n              <td>{checkAuthorName(details.authors)}</td>\r\n              <td></td>\r\n            </tr>\r\n            <tr className=\"containProducts_details_contents_rows\">\r\n              <td>\r\n                <strong>Số lượng hiện có</strong>\r\n              </td>\r\n              <td>{checkQuantity(details.copies)}</td>\r\n              <td></td>\r\n            </tr>\r\n            <tr className=\"containProducts_details_contents_rows\">\r\n              <td>\r\n                <strong>Mô tả</strong>\r\n              </td>\r\n              <td>{details.description}</td>\r\n              <td></td>\r\n            </tr>\r\n\r\n            <tr className=\"containProducts_details_contents_rows\">\r\n              <td>\r\n                <strong>Thời gian cho mượn</strong>\r\n              </td>\r\n              <td>{details.loanPeriodDays}</td>\r\n              <td></td>\r\n            </tr>\r\n\r\n            <tr className=\"containProducts_details_contents_rows\">\r\n              <ButtonAddCarts product={details} />\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <div className=\"containProducts\">\r\n      <div className=\"containProducts_title\">\r\n        <span>Thông tin chi tiết</span>\r\n      </div>\r\n      {renderBook}\r\n\r\n      <div className=\"containProducts_title\">\r\n        <span>Những cuốn sách liên quan</span>\r\n      </div>\r\n      <BookByAuthor authorName={authorName} bookId={bookId} />\r\n      <BookByCategories categoriesName={categoriesName} bookId={bookId} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BookDetails;\r\n","export default __webpack_public_path__ + \"static/media/logo.acb1d585.png\";","import userApi from \"apis/userApi\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Badge, OverlayTrigger } from \"react-bootstrap\";\r\nimport { AiOutlineShoppingCart } from \"react-icons/ai\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router\";\r\nimport { selectUser } from \"reducers/authSlice\";\r\nimport {\r\n  getMyCarts,\r\n  getTotalCarts,\r\n  selectMyTotalCarts,\r\n} from \"reducers/userSlice\";\r\nimport { TooltipItems } from \"../TooltipItems/TooltipItems\";\r\nimport \"./Carts.scss\";\r\n\r\nfunction Carts() {\r\n  // console.log(\"chạy lại cart\");\r\n\r\n  const history = useHistory();\r\n  const isUser = useSelector(selectUser);\r\n  const dispatch = useDispatch();\r\n\r\n  //Nhận số lượng sách từ redux\r\n  const myTotalCarts = useSelector(selectMyTotalCarts);\r\n  // console.log(setQuantity);\r\n\r\n  const [cartCounts, setCartCounts] = useState(0);\r\n\r\n  // const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    isUser && getCarts();\r\n  }, [cartCounts, myTotalCarts]);\r\n\r\n  const getCarts = async () => {\r\n    const idUSer = isUser.id;\r\n    try {\r\n      const response = await userApi.getCarts(idUSer);\r\n\r\n      //truyền carts về cho user\r\n      dispatch(getMyCarts(response.results));\r\n      //truyền số lượng\r\n      dispatch(getTotalCarts(response.totalResults));\r\n\r\n      //Hiện thị thông số lên carts\r\n\r\n      setCartCounts(response.totalResults);\r\n      // setCartCounts(setQuantity);\r\n\r\n      //Lưu để f5 vẫn còn giữ giá trị\r\n      sessionStorage.setItem(\"myCarts\", JSON.stringify(response));\r\n    } catch (error) {\r\n      // setError(error.response.data.message);\r\n      console.log(\"lỗi từ cart\", { error });\r\n    }\r\n  };\r\n\r\n  const cartIcon = () => {\r\n    return (\r\n      <div className=\"carts\" onClick={() => history.push(\"/user/carts\")}>\r\n        <AiOutlineShoppingCart className=\"carts_icon\" />\r\n        <Badge bg=\"secondary\" className=\"carts_quantity\">\r\n          {cartCounts}\r\n        </Badge>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <OverlayTrigger\r\n        key=\"bottom\"\r\n        placement=\"bottom\"\r\n        // overlay={<Tooltip>Đến giỏ hàng</Tooltip>}\r\n        overlay={TooltipItems(\"Giỏ hàng\")}\r\n      >\r\n        {cartIcon()}\r\n      </OverlayTrigger>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Carts;\r\n","import React from \"react\";\r\nimport { Tooltip } from \"react-bootstrap\";\r\n\r\nexport const TooltipItems = (children, props) => (\r\n  <Tooltip id=\"button-tooltip\" {...props}>\r\n    {children}\r\n  </Tooltip>\r\n);\r\n","import Logout from \"components/Auth/Logout/Logout\";\r\nimport React from \"react\";\r\nimport { Dropdown } from \"react-bootstrap\";\r\nimport { FaRegUser } from \"react-icons/fa\";\r\nimport \"./DropdownItems.scss\";\r\n\r\nfunction DropdownItems() {\r\n  // let { path } = useRouteMatch();\r\n  // console.log(path);\r\n  return (\r\n    <div>\r\n      <Dropdown className=\"dropdownMain\">\r\n        <Dropdown.Toggle\r\n          variant=\"primary\"\r\n          // variant=\"secondary\"\r\n          id=\"dropdown-basic\"\r\n          className=\"dropdownMain_name\"\r\n        >\r\n          <FaRegUser className=\"icon\" />\r\n        </Dropdown.Toggle>\r\n\r\n        <Dropdown.Menu className=\"dropdownMain_menu\">\r\n          <Dropdown.Item href={`/user`} className=\"dropdownMain_menu_items\">\r\n            Xem Thông Tin\r\n          </Dropdown.Item>\r\n\r\n          <Dropdown.Item\r\n            href={`/user/reset-password`}\r\n            className=\"dropdownMain_menu_items\"\r\n          >\r\n            Thay Đổi Mật Khẩu\r\n          </Dropdown.Item>\r\n\r\n          <Dropdown.Divider />\r\n          <Dropdown.Item className=\"dropdownMain_menu_items\">\r\n            <Logout />\r\n          </Dropdown.Item>\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DropdownItems;\r\n","import React from \"react\";\r\n//Scroll link\r\nimport { NavHashLink as NavLink } from \"react-router-hash-link\";\r\nimport \"./Navigation.scss\";\r\n\r\nfunction Navigation() {\r\n  return (\r\n    <div className=\"navMenu\">\r\n      <ul className=\"navMenuItems\">\r\n        <li className=\"navMenuItem\">\r\n          <NavLink to=\"/home/#about\" activeClassName=\"active\" smooth={true}>\r\n            Giới thiệu\r\n          </NavLink>\r\n        </li>\r\n\r\n        <li className=\"navMenuItem\">\r\n          <NavLink\r\n            to=\"/home/#danh-muc-sach\"\r\n            activeClassName=\"active\"\r\n            smooth={true}\r\n          >\r\n            Danh mục sách\r\n          </NavLink>\r\n        </li>\r\n        <li className=\"navMenuItem\">\r\n          <NavLink to=\"/home/#rating\" activeClassName=\"active\" smooth={true}>\r\n            Đánh giá\r\n          </NavLink>\r\n        </li>\r\n        <li className=\"navMenuItem\">\r\n          <NavLink to=\"/home/#contact\" activeClassName=\"active\" smooth={true}>\r\n            Liên hệ hỗ trợ\r\n          </NavLink>\r\n        </li>\r\n\r\n        {/* <NavLink exact={true} to={`${url}`} activeClassName=\"active\">\r\n            Trang Chủ\r\n          </NavLink>\r\n        </li>\r\n        <li className=\"navMenu_items_links\">\r\n          <NavLink to={`${url}/tai-lieu`} activeClassName=\"active\">\r\n            Bài Giảng\r\n          </NavLink>\r\n        </li>\r\n        <li className=\"navMenu_items_links\">\r\n          <NavLink to={`${url}/tu-lieu`} activeClassName=\"active\">\r\n            Tư Liệu\r\n          </NavLink>\r\n        </li>\r\n        <li className=\"navMenu_items_links\">\r\n          <NavLink to={`${url}/community`} activeClassName=\"active\">\r\n            Cộng Đồng\r\n          </NavLink> */}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Navigation;\r\n","import LogoMenu from \"assets/icons/logo.png\";\r\nimport Carts from \"components/customComponents/Carts/Carts\";\r\nimport DropdownItems from \"components/customComponents/DropdownItems/DropdownItems\";\r\nimport React from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router\";\r\nimport { HashLink as Link } from \"react-router-hash-link\";\r\nimport { selectUser } from \"reducers/authSlice\";\r\nimport Navigation from \"../Navigation/Navigation\";\r\nimport \"./Header.scss\";\r\n\r\nfunction Header() {\r\n  const history = useHistory();\r\n  const isUser = useSelector(selectUser);\r\n\r\n  //Hiện tên cuối\r\n  const showName = (name) => {\r\n    const getName = name.split(\" \");\r\n    return getName[getName.length - 1];\r\n  };\r\n\r\n  const UserForm = () => {\r\n    //Đăng nhập\r\n    if (isUser && isUser.status === \"active\") {\r\n      return (\r\n        <div className=\"header_btn\">\r\n          <span className=\"nameUser\">Xin chào, {showName(isUser.name)}</span>\r\n          <Carts />\r\n          <DropdownItems />\r\n        </div>\r\n      );\r\n    }\r\n    //Chưa đăng nhập\r\n    else {\r\n      return (\r\n        <div className=\"header_btn\" onClick={() => history.push(\"/login\")}>\r\n          <Carts />\r\n          <Button className=\"btnLogin\" variant=\"primary\">\r\n            Đăng Nhập\r\n          </Button>\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"header\">\r\n      <div className=\"header_logo\">\r\n        <Link smooth={true} to=\"/home/#about\">\r\n          <img alt=\"logoMenu\" src={LogoMenu} />\r\n          <span className=\"nameLogo\">Geny Library</span>\r\n        </Link>\r\n      </div>\r\n      <div className=\"header_navigation\">\r\n        <Navigation />\r\n      </div>\r\n      {/* <div className=\"header_search\">\r\n        <SearchForm />\r\n      </div> */}\r\n      {/* <div className=\"header_btn\"> */}\r\n      <UserForm />\r\n      {/* </div> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","export default __webpack_public_path__ + \"static/media/carousel1.0e996b6b.webp\";","export default __webpack_public_path__ + \"static/media/carousel2.14b6e079.webp\";","export default __webpack_public_path__ + \"static/media/carousel3.4bfc7044.webp\";","import React from \"react\";\r\nimport { Carousel } from \"react-bootstrap\";\r\n\r\nimport carousel1 from \"assets/images/carousel1.webp\";\r\nimport carousel2 from \"assets/images/carousel2.webp\";\r\nimport carousel3 from \"assets/images/carousel3.webp\";\r\n\r\nimport \"../Pages.scss\";\r\nimport \"./About.scss\";\r\n\r\nfunction About() {\r\n  return (\r\n    <div id=\"about\" className=\"pageContainer\">\r\n      <div className=\"pageContainer_contents about\">\r\n        <Carousel>\r\n          <Carousel.Item>\r\n            <img className=\"d-block \" src={carousel1} alt=\"First slide\" />\r\n          </Carousel.Item>\r\n          <Carousel.Item>\r\n            <img className=\"d-block \" src={carousel2} alt=\"Second slide\" />\r\n          </Carousel.Item>\r\n          <Carousel.Item>\r\n            <img className=\"d-block \" src={carousel3} alt=\"Third slide\" />\r\n          </Carousel.Item>\r\n        </Carousel>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default About;\r\n","import Footer from \"components/HomePage/Header/Footer/Footer\";\r\nimport React from \"react\";\r\n\r\nfunction Contact() {\r\n  return (\r\n    <div className=\"pageContainer\" id=\"contact\">\r\n      <div className=\"pageContainer_contents contact\">\r\n        <Footer />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Contact;\r\n","import productsApi from \"apis/productsApi\";\r\nimport React, { useRef, useState } from \"react\";\r\nimport { Button, Form } from \"react-bootstrap\";\r\nimport { GoSearch } from \"react-icons/go\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { getBooks } from \"reducers/bookSlice\";\r\nimport \"./SearchForm.scss\";\r\n\r\nfunction SearchForm() {\r\n  //Debounce typing\r\n  const typingRef = useRef(null);\r\n\r\n  const [searchInfo, setSearchInfo] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n\r\n  //search books\r\n  const searchBooks = async () => {\r\n    try {\r\n      const response = await productsApi.searchBooks(searchInfo);\r\n      //   console.log(\"đã search ra được\", response);\r\n      dispatch(getBooks(response.results));\r\n    } catch (error) {\r\n      console.log(\"lỗi tại search\", { error });\r\n    }\r\n  };\r\n\r\n  // const handleSearchByName = (e) => {\r\n  //   const name = e.target.name;\r\n  //   const value = e.target.value;\r\n\r\n  //   if (typingRef.current) {\r\n  //     clearTimeout(typingRef.current);\r\n  //   }\r\n\r\n  //   typingRef.current = setTimeout(() => {\r\n  //     setSearchInfo({ [name]: value });\r\n  //   }, 500);\r\n  // };\r\n\r\n  const resetValue = () => {\r\n    setSearchInfo({ title: \"\" });\r\n  };\r\n  const handleSearch = (e) => {\r\n    e.preventDefault();\r\n    searchBooks();\r\n    resetValue();\r\n  };\r\n  return (\r\n    <>\r\n      <Form className=\"formSearch\" onSubmit={handleSearch}>\r\n        <Form.Group className=\"inputForm\" style={{ gap: \"5px\" }}>\r\n          <Form.Label></Form.Label>\r\n          <Form.Control\r\n            value={searchInfo.title}\r\n            style={{ flex: \"4\" }}\r\n            name=\"title\"\r\n            className=\"inputForm_items_control\"\r\n            type=\"input\"\r\n            placeholder=\"Nhập tên sách bạn muốn tìm\"\r\n            // onChange={handleSearchByName}\r\n            onChange={(e) => setSearchInfo({ [e.target.name]: e.target.value })}\r\n          ></Form.Control>\r\n          <Button className=\"inputForm_button\" type=\"submit\">\r\n            <GoSearch />\r\n            Tìm kiếm\r\n          </Button>\r\n        </Form.Group>\r\n      </Form>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SearchForm;\r\n","import productsApi from \"apis/productsApi\";\r\nimport ButtonAddCarts from \"components/customComponents/ButtonHandleCarts/ButtonAddCarts\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Card, Button } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useHistory, useRouteMatch } from \"react-router\";\r\nimport { selectBooks, selectTotalBooks } from \"reducers/bookSlice\";\r\nimport \"./BookHome.scss\";\r\n\r\nexport const BookHome = ({ searchInfo }) => {\r\n  let { path } = useRouteMatch();\r\n  // console.log(searchInfo);\r\n\r\n  const bookUpdate = useSelector(selectBooks);\r\n\r\n  //Danh sách những cuốn sách\r\n  const [books, setBooks] = useState([]);\r\n  const history = useHistory();\r\n\r\n  const checkAuthorName = (author) => {\r\n    return author;\r\n  };\r\n\r\n  //Lần 1\r\n  useEffect(() => {\r\n    getAllBooks();\r\n  }, []);\r\n\r\n  //Khi có categories\r\n  useEffect(() => {\r\n    getAllBooks(searchInfo);\r\n  }, [searchInfo]);\r\n\r\n  //After search\r\n  useEffect(() => {\r\n    // console.log(books);\r\n    setBooks(bookUpdate);\r\n  }, [bookUpdate]);\r\n\r\n  const getAllBooks = async (searchInfo) => {\r\n    const params = {\r\n      ...searchInfo,\r\n      limit: 8,\r\n    };\r\n    try {\r\n      const response = await productsApi.getBooks(params);\r\n      // console.log(response);\r\n      setBooks(response.results);\r\n    } catch (error) {\r\n      console.log(\"err trang getProducts \", error);\r\n    }\r\n  };\r\n\r\n  const renderBook = books?.map((book, index) => {\r\n    return (\r\n      <Card className=\"menuBooks_items\" key={index}>\r\n        <Card.Img\r\n          variant=\"top\"\r\n          src={book.cover}\r\n          onClick={() => viewDetails(book.id)}\r\n        />\r\n        <Card.Body onClick={() => viewDetails(book.id)}>\r\n          <Card.Title>{book.title}</Card.Title>\r\n          <Card.Text>\r\n            {/* Some quick example text to build on the card title and make up the\r\n            bulk of the card's content. */}\r\n            Tác giả: <strong> {book.authors}</strong> <br />\r\n            Thể loại: <strong> {book.categories}</strong>\r\n          </Card.Text>\r\n        </Card.Body>\r\n        <Card.Footer>\r\n          <ButtonAddCarts product={book}>Thêm vào giỏ</ButtonAddCarts>\r\n        </Card.Footer>\r\n      </Card>\r\n    );\r\n  });\r\n\r\n  const viewDetails = (bookId) => {\r\n    history.push(`${path}/book/${bookId}`);\r\n  };\r\n\r\n  return <div className=\"menuBooks\">{renderBook}</div>;\r\n};\r\n","import CheckBoxAuthor from \"components/customComponents/CheckBoxItems/CheckBoxAuthor\";\r\nimport CheckBoxCategory from \"components/customComponents/CheckBoxItems/CheckBoxCategory\";\r\nimport SearchForm from \"components/customComponents/InputForms/SearchForm/SearchForm\";\r\nimport { BookHome } from \"components/HomePage/Contains/BookHome/BookHome\";\r\nimport React, { useState } from \"react\";\r\nimport \"./DanhMuc.scss\";\r\n\r\nfunction DanhMuc() {\r\n  // const { path } = useRouteMatch();\r\n  // console.log(path);\r\n\r\n  const [searchInfo, setSearchInfo] = useState({});\r\n\r\n  const handleCategoryName = (categoryName) => {\r\n    // console.log(\"đã lấy được thể loại\", categoryName);\r\n    setSearchInfo({ ...searchInfo, ...categoryName });\r\n  };\r\n  const handleAuthorName = (authorName) => {\r\n    // console.log(\"đã lấy được tên tác giả\", authorName);\r\n    setSearchInfo({ ...searchInfo, ...authorName });\r\n  };\r\n\r\n  return (\r\n    <div id=\"danh-muc-sach\" className=\"pageContainer\">\r\n      <div className=\"pageContainer_contents danh-muc\">\r\n        <div className=\"categoriesForm\">\r\n          <legend className=\"form_name\">Danh mục thông tin các sách</legend>\r\n          <div className=\"categoriesForm_search\">\r\n            <div className=\"searchInput\">\r\n              <SearchForm />\r\n            </div>\r\n            <div className=\"searchChecbox\">\r\n              <CheckBoxAuthor onAuthorName={handleAuthorName} />\r\n              <CheckBoxCategory onCategoryName={handleCategoryName} />\r\n            </div>\r\n          </div>\r\n          <div className=\"categoriesForm_contents\">\r\n            <BookHome searchInfo={searchInfo} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DanhMuc;\r\n","import React from \"react\";\r\n\r\nfunction Rating() {\r\n  return (\r\n    <div className=\"pageContainer\" id=\"rating\">\r\n      <div className=\"pageContainer_contents rating\"></div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Rating;\r\n","import React from \"react\";\r\nimport About from \"../About/About\";\r\nimport Contact from \"../Contact/Contact\";\r\nimport DanhMuc from \"../DanhMuc/DanhMuc\";\r\nimport Rating from \"../Rating/Rating\";\r\n\r\nfunction MainPage() {\r\n  return (\r\n    <>\r\n      <About />\r\n      <DanhMuc />\r\n      <Rating />\r\n      <Contact />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MainPage;\r\n","import BookDetails from \"components/HomePage/Contains/BookDetails/BookDetails\";\r\nimport Header from \"components/HomePage/Header/Header/Header\";\r\nimport MainPage from \"components/HomePage/Pages/MainPage/MainPage\";\r\nimport React, { useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport {\r\n  Redirect,\r\n  Route,\r\n  Switch,\r\n  useHistory,\r\n  useRouteMatch,\r\n} from \"react-router\";\r\nimport { selectUser } from \"reducers/authSlice\";\r\nimport \"./MainHome.scss\";\r\n\r\nfunction HomePage() {\r\n  document.title = \"Thư viện trực tuyến\";\r\n\r\n  const isUser = useSelector(selectUser);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    if (isMounted) {\r\n      isUser && checkRole();\r\n    }\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [isUser]);\r\n\r\n  const checkRole = () => {\r\n    if (isUser.role === \"admin\") {\r\n      history.push(\"/admin\");\r\n    }\r\n    if (isUser.role === \"librarian\") {\r\n      history.push(\"/librarian\");\r\n    }\r\n  };\r\n\r\n  let { path, url } = useRouteMatch();\r\n\r\n  return (\r\n    <div className=\"mainPage\">\r\n      <div className=\"mainPage_header\">\r\n        <Header />\r\n      </div>\r\n\r\n      <div className=\"mainPage_contents\">\r\n        <Switch>\r\n          <Route path={`${path}`} component={() => <MainPage />} exact={true} />\r\n          <Route\r\n            path={`${path}/book/:id`}\r\n            component={() => <BookDetails />}\r\n            exact={true}\r\n          />\r\n          {/*<Route\r\n            path={`${path}/community`}\r\n            component={() => \"trang cộng đỒng\"}\r\n          />\r\n          <Route path={`${path}/tu-lieu`} component={() => \"trang tư liệu\"} />\r\n          <Route path={`${path}/tai-lieu`} component={() => <TaiLieu />} />\r\n          <Route\r\n            path={`${path}/details/:itemsId`}\r\n            component={() => <BookDetails />}\r\n            exact={true}\r\n          /> */}\r\n          <Route>\r\n            <Redirect to=\"/NotFound\" />\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n\r\n      {/* <div className=\"mainPage_footer\">\r\n        <Footer />\r\n      </div> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HomePage;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./NotFound.scss\";\r\n\r\nfunction NotFound() {\r\n  return (\r\n    <div className=\"notFoundMenu\">\r\n      <span>404 - Không có trang này</span>\r\n      <Link to=\"/\">Quay về trang chủ</Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NotFound;\r\n","import Logout from \"components/Auth/Logout/Logout\";\r\nimport React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectUser } from \"reducers/authSlice\";\r\n\r\nimport { FaUserCircle } from \"react-icons/fa\";\r\nimport \"./AdminPage.scss\";\r\n\r\nfunction HomeLibrarian() {\r\n  const admin = useSelector(selectUser);\r\n  return (\r\n    <div className=\"adminMenu\">\r\n      <div className=\"adminMenu_menu\">\r\n        <div className=\"adminMenu_menu_logo\">\r\n          <FaUserCircle className=\"icons\" />\r\n        </div>\r\n        <div className=\"adminMenu_menu_contents\">\r\n          <h2>Thông tin cá nhân</h2>\r\n          <div className=\"adminMenu_menu_contents_items\">\r\n            <span className=\"title\">\r\n              <strong>Họ và tên:</strong>\r\n            </span>\r\n            <span>{admin.name}</span>\r\n          </div>\r\n          <div className=\"adminMenu_menu_contents_items\">\r\n            <span className=\"title\">\r\n              <strong>Chức vụ:</strong>\r\n            </span>\r\n            <span>{admin.role}</span>\r\n          </div>\r\n          <div className=\"adminMenu_menu_contents_items\">\r\n            <span className=\"title\">\r\n              <strong>Ngày vô làm:</strong>\r\n            </span>\r\n            <span>\"Ngày chưa thiết lập\"</span>\r\n          </div>\r\n          {/* <div className=\"adminMenu_menu_contents_items\">\r\n            <Logout />\r\n          </div> */}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HomeLibrarian;\r\n","import React, { useEffect } from \"react\";\r\nimport { Accordion } from \"react-bootstrap\";\r\nimport { Link, NavLink } from \"react-router-dom\";\r\n\r\n//icon\r\nimport { AiFillFileExcel } from \"react-icons/ai\";\r\nimport { FaBook, FaUserCog } from \"react-icons/fa\";\r\nimport { IoLibrarySharp } from \"react-icons/io5\";\r\nimport \"./DashBoard.scss\";\r\nimport Logout from \"components/Auth/Logout/Logout\";\r\n\r\nfunction LibrarianDashBoard({ url }) {\r\n  // console.log(\"dashboard\", url);\r\n  useEffect(() => {\r\n    handleShow();\r\n  }, []);\r\n\r\n  const handleShow = () => {\r\n    return localStorage.getItem(\"showItem\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"homeMenu\">\r\n        <div className=\"homeMenu_link\">\r\n          <Link to=\"/librarian\" exact={true}>\r\n            <IoLibrarySharp className=\"iconItem\" />\r\n            <span className=\"iconName\">Librarian dashboard</span>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n      <Accordion\r\n        defaultActiveKey={handleShow}\r\n        onSelect={(e) => localStorage.setItem(\"showItem\", e)}\r\n      >\r\n        {/* Quản lý người dùng */}\r\n        <Accordion.Item eventKey=\"0\">\r\n          <Accordion.Header>\r\n            <FaUserCog className=\"iconItem\" />\r\n            Quản Lý Người Dùng\r\n          </Accordion.Header>\r\n          <Accordion.Body>\r\n            <NavLink to={`${url}/users`} exact={true} activeClassName=\"active\">\r\n              Danh sách người dùng\r\n            </NavLink>\r\n          </Accordion.Body>\r\n          <Accordion.Body>\r\n            <NavLink to={`${url}/users/create`} activeClassName=\"active\">\r\n              Tạo người dùng mới\r\n            </NavLink>\r\n          </Accordion.Body>\r\n        </Accordion.Item>\r\n\r\n        {/* Quản Lý Sách */}\r\n        <Accordion.Item eventKey=\"1\">\r\n          <Accordion.Header>\r\n            {/* <RiBookletFill className=\"iconItem\" /> */}\r\n            <FaBook className=\"iconItem\" />\r\n            Quản Lý Sách\r\n          </Accordion.Header>\r\n          <Accordion.Body>\r\n            <NavLink\r\n              to={`${url}/books/view`}\r\n              exact={true}\r\n              activeClassName=\"active\"\r\n            >\r\n              Thông tin sách thư viện\r\n            </NavLink>\r\n          </Accordion.Body>\r\n          <Accordion.Body>\r\n            <NavLink\r\n              to={`${url}/books/reservations`}\r\n              exact={true}\r\n              activeClassName=\"active\"\r\n            >\r\n              Lịch hẹn người dùng\r\n            </NavLink>\r\n          </Accordion.Body>\r\n          <Accordion.Body>\r\n            <NavLink\r\n              to={`${url}/books/copies`}\r\n              // exact={true}\r\n              activeClassName=\"active\"\r\n            >\r\n              Mượn sách\r\n            </NavLink>\r\n          </Accordion.Body>\r\n          <Accordion.Body>\r\n            <NavLink\r\n              to={`${url}/books/borrowing`}\r\n              exact={true}\r\n              activeClassName=\"active\"\r\n            >\r\n              Lịch sử mượn sách\r\n            </NavLink>\r\n          </Accordion.Body>\r\n          <Accordion.Body>\r\n            <NavLink\r\n              to={`${url}/books/return`}\r\n              exact={true}\r\n              activeClassName=\"active\"\r\n            >\r\n              Trả sách\r\n            </NavLink>\r\n          </Accordion.Body>\r\n          <Accordion.Body>\r\n            <NavLink\r\n              to={`${url}/books/returned`}\r\n              exact={true}\r\n              activeClassName=\"active\"\r\n            >\r\n              Lịch sử Trả sách\r\n            </NavLink>\r\n          </Accordion.Body>\r\n        </Accordion.Item>\r\n        {/* Quản Lý Báo Cáo */}\r\n        <Accordion.Item eventKey=\"2\">\r\n          <Accordion.Header>\r\n            <AiFillFileExcel className=\"iconItem\" />\r\n            Quản Lý Báo Cáo\r\n          </Accordion.Header>\r\n          <Accordion.Body>\r\n            <NavLink to={`${url}/report`} activeClassName=\"active\" exact={true}>\r\n              Thống kê hoạt động\r\n            </NavLink>\r\n          </Accordion.Body>\r\n          <Accordion.Body>\r\n            <NavLink to={`${url}/report/activities`} activeClassName=\"active\">\r\n              Hoạt động thủ thư\r\n            </NavLink>\r\n          </Accordion.Body>\r\n        </Accordion.Item>\r\n      </Accordion>\r\n      <div className=\"logout\">\r\n        <Logout />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LibrarianDashBoard;\r\n","import productsApi from \"apis/productsApi\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Button, FloatingLabel, Form, Table } from \"react-bootstrap\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { addCarts } from \"reducers/librarianSlice\";\r\n\r\nfunction CheckBooks({ userId, onHandleShow }) {\r\n  const [bookId, setBookId] = useState(\"\");\r\n  //Set thông tin copies sách\r\n  const [copies, setCopies] = useState();\r\n  //Set thông tin id sách\r\n  const [bookIdInfo, setBookIdInfo] = useState();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  // useEffect(() => {\r\n  //   console.log(bookId);\r\n  // }, [bookId]);\r\n\r\n  // useEffect(() => {\r\n  //   // console.log(\"đã search được thông tin bookInfoId\", bookIdInfo);\r\n  //   console.log(\"đã search được thông tin copies\", copies[0].title);\r\n  // }, [bookIdInfo, copies]);\r\n\r\n  //Kiếm thông tin sách\r\n  //Kiểm tra mã Copies\r\n  const getInfoCopies = async () => {\r\n    try {\r\n      const response = await productsApi.getCheckCopies(bookId);\r\n      // console.log(\"đã lấy ra thông tin sách\", response);\r\n      setCopies([response]);\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n      alert(\"Hãy nhập đúng mã sách\");\r\n    }\r\n  };\r\n  //Kiểm tra mã Id sách\r\n  const getInfoId = async (bookId) => {\r\n    try {\r\n      const response = await productsApi.getBooksById(bookId);\r\n      // console.log(\"đã lấy ra thông tin sách\", response);\r\n      setBookIdInfo(response.copies);\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n  //btn handle\r\n  const handleAddCarts = (copiesId) => {\r\n    dispatch(addCarts(copiesId));\r\n    onHandleShow(false);\r\n  };\r\n\r\n  //render components\r\n  // const renderDate = (time) => {\r\n  //   const date = new Date(time);\r\n  //   return date.toLocaleString();\r\n  // };\r\n  const checkBookById = (bookId) => {\r\n    // console.log(\"Bắt đầu tìm book có id\", bookId);\r\n    getInfoId(bookId);\r\n  };\r\n\r\n  const renderBtnCopies = (status, copiesId, bookId, usersId) => {\r\n    const checkUser = usersId.every((user) => user.id !== userId);\r\n    if (checkUser) {\r\n      if (status === \"borrowed\" || status === \"reserved\") {\r\n        return (\r\n          <>\r\n            <Button disabled>Đã có người đặt</Button>\r\n            <Button variant=\"secondary\" onClick={() => checkBookById(bookId)}>\r\n              Tìm kiếm bằng ID\r\n            </Button>\r\n            {checkBookById(bookId)}\r\n          </>\r\n        );\r\n      } else {\r\n        return (\r\n          <Button\r\n            variant=\"success\"\r\n            type=\"checkbox\"\r\n            onClick={() => handleAddCarts(copiesId)}\r\n          >\r\n            Chọn sách\r\n          </Button>\r\n        );\r\n      }\r\n    } else {\r\n      return (\r\n        <Button disabled variant=\"secondary\">\r\n          Bạn đã đặt rồi\r\n        </Button>\r\n      );\r\n    }\r\n  };\r\n  const renderBtnBookId = (status, bookId) => {\r\n    // console.log(\"bookid là\", bookId);\r\n    if (status === \"borrowed\" || status === \"reserved\") {\r\n      return (\r\n        <>\r\n          <Button disabled>Không đặt được</Button>\r\n        </>\r\n      );\r\n    } else {\r\n      return (\r\n        <Button\r\n          variant=\"success\"\r\n          type=\"checkbox\"\r\n          onClick={() => dispatch(addCarts(bookId))}\r\n        >\r\n          Chọn sách\r\n        </Button>\r\n      );\r\n    }\r\n  };\r\n  const renderUser = (user) => {\r\n    // console.log(\"user sdsad\", user);\r\n    //Nếu không có user\r\n    if (!user) {\r\n      return <>Đang trống</>;\r\n    }\r\n    //Nếu đã có => checkId\r\n    else {\r\n      if (user._id === userId) {\r\n        return <>Bạn</>;\r\n      } else if (!user._id) {\r\n        return <></>;\r\n      } else {\r\n        return <> Đã có</>;\r\n      }\r\n    }\r\n  };\r\n  const renderStatus = (status) => {\r\n    switch (status) {\r\n      case \"available\":\r\n        return <>Đang trống</>;\r\n      case \"reserved\":\r\n        return <>Đã đặt lịch</>;\r\n\r\n      default:\r\n        return <>Đã huỷ </>;\r\n    }\r\n  };\r\n\r\n  // render copies books\r\n  const renderCopies = copies?.map((copy, index) => {\r\n    console.log(copy.id);\r\n    return (\r\n      <tr key={index}>\r\n        <td>{index + 1}</td>\r\n        <td>{renderStatus(copy.status)}</td>\r\n        <td>{copy.title}</td>\r\n        {/* <td>{copy.id}</td> */}\r\n        {/* <td>{copy.book}</td> */}\r\n        <td>{renderUser(copy.user)}</td>\r\n        <td>\r\n          {renderBtnCopies(copy.status, copy.barcode, copy.book, copy.users)}\r\n        </td>\r\n      </tr>\r\n    );\r\n  });\r\n\r\n  //render book by id\r\n  const renderBookIdInfo = bookIdInfo?.map((copy, index) => {\r\n    return (\r\n      <tr key={index}>\r\n        <td>{index + 1}</td>\r\n        <td>{renderStatus(copy.status)}</td>\r\n        <td>{copies[0].title}</td>\r\n        <td>{renderUser(copy.user)}</td>\r\n        <td>{renderBtnBookId(copy.status, copy.barcode)}</td>\r\n      </tr>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <FloatingLabel label=\"Nhập mã Copies của sách\">\r\n        <Form.Control\r\n          type=\"text\"\r\n          placeholder=\"name@example.com\"\r\n          onChange={(e) => setBookId(e.target.value)}\r\n        />\r\n      </FloatingLabel>\r\n      <Button onClick={getInfoCopies}>Kiểm tra sách</Button>\r\n      <div className=\"checkoutReservation_search_show\">\r\n        {copies && (\r\n          <>\r\n            <legend>Kiểm tra bằng copies </legend>\r\n\r\n            <Table striped hover>\r\n              <thead>\r\n                <tr>\r\n                  <th>STT</th>\r\n                  <th>Trạng thái</th>\r\n                  <th>Tên sách</th>\r\n\r\n                  <th>Người mượn</th>\r\n                  {/* <th>Chọn sách</th> */}\r\n                  <th></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>{renderCopies}</tbody>\r\n            </Table>\r\n          </>\r\n        )}\r\n        {bookIdInfo && (\r\n          <>\r\n            <legend>Kiểm tra bằng ID </legend>\r\n            <Table hover striped>\r\n              <thead>\r\n                <tr>\r\n                  <th>STT</th>\r\n                  <th>Trạng thái</th>\r\n                  <th>Tên sách</th>\r\n\r\n                  <th>Người mượn</th>\r\n                  <th>Chọn sách</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>{renderBookIdInfo}</tbody>\r\n            </Table>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CheckBooks;\r\n","import React from \"react\";\r\nimport { Button, Modal } from \"react-bootstrap\";\r\nimport CheckBooks from \"../CheckBooks/CheckBooks\";\r\n\r\nfunction ModalCheckBooks({ userId, isShow, onShow }) {\r\n  const handleClose = () => {\r\n    onShow(false);\r\n  };\r\n  const handleShow = (show) => {\r\n    // console.log(\"trạng thái lấy được\", show);\r\n    return onShow(show);\r\n  };\r\n\r\n  return (\r\n    <Modal show={isShow} onHide={handleClose}>\r\n      <Modal.Header>\r\n        <Modal.Title>Kiểm tra thông tin sách</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <CheckBooks userId={userId} onHandleShow={handleShow} />\r\n      </Modal.Body>\r\n      {/* <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={handleClose}>\r\n          Đóng\r\n        </Button>\r\n      </Modal.Footer> */}\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default ModalCheckBooks;\r\n","import productsApi from \"apis/productsApi\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Button, Modal, Table } from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  createCarts,\r\n  deleteCarts,\r\n  selectCartCheckout,\r\n} from \"reducers/librarianSlice\";\r\n\r\nfunction ModalCheckout({ userId, isShow, onShow, update, onUpdate }) {\r\n  const dispatch = useDispatch();\r\n\r\n  const [book, setBook] = useState();\r\n  const booksCart = useSelector(selectCartCheckout);\r\n\r\n  useEffect(() => {\r\n    setBook(booksCart);\r\n  }, [booksCart]);\r\n\r\n  const handleClose = () => {\r\n    onShow(false);\r\n  };\r\n\r\n  const handleDelete = (bookId) => {\r\n    dispatch(deleteCarts(bookId));\r\n  };\r\n\r\n  const renderBooks = book?.map((bookId, index) => {\r\n    return (\r\n      <tr key={index}>\r\n        <td>{index + 1}</td>\r\n        <td>{bookId}</td>\r\n        <td>\r\n          <Button onClick={() => handleDelete(bookId)}>Xoá</Button>\r\n        </td>\r\n      </tr>\r\n    );\r\n  });\r\n\r\n  const checkoutBooks = async () => {\r\n    try {\r\n      await productsApi.postCopiesCheckout({\r\n        user: userId,\r\n        copies: book,\r\n      });\r\n      alert(\"Cho mượn thành công\");\r\n      //set lại carts checkout\r\n      dispatch(createCarts());\r\n      onUpdate(!update);\r\n      onShow(false);\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n  const handleCheckout = () => {\r\n    // console.log(\"Tiến hành cho mượn\", book);\r\n    if (book.length > 0) {\r\n      checkoutBooks();\r\n    } else {\r\n      alert(\"Chưa có cuốn nào\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal show={isShow} onHide={handleClose}>\r\n      <Modal.Header>\r\n        <Modal.Title>Tiến hành cho mượn sách</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <Table hover bordered>\r\n          <thead>\r\n            <tr>\r\n              <th>STT</th>\r\n              <th>Mã sách</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{renderBooks}</tbody>\r\n        </Table>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button onClick={handleCheckout} variant=\"success\">\r\n          Cho mượn sách\r\n        </Button>\r\n        <Button onClick={handleClose} variant=\"secondary\">\r\n          Quay lại\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default ModalCheckout;\r\n","import userApi from \"apis/userApi\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Button, FloatingLabel, Form, Table } from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  createCarts,\r\n  deleteCarts,\r\n  selectCartCheckout,\r\n  selectCartUserId,\r\n} from \"reducers/librarianSlice\";\r\nimport ModalCheckBooks from \"./ConfirmReservation/ModalCheckBooks/ModalCheckBooks\";\r\nimport ModalCheckout from \"./ConfirmReservation/ModalCheckout/ModalCheckout\";\r\n\r\nimport \"./CheckoutBooks.scss\";\r\nimport { renderBarCode } from \"constants/RenderDate\";\r\n\r\nfunction CheckoutBooks() {\r\n  document.title = \"Mượn sách\";\r\n\r\n  const booksCart = useSelector(selectCartCheckout);\r\n\r\n  const [userId, setUserId] = useState();\r\n  const [hide, setHide] = useState(false);\r\n  const [booksReserved, setBooksReserved] = useState();\r\n  const [copies, setCopies] = useState([]);\r\n\r\n  const [cartsCheckout, setCartsCheckout] = useState();\r\n\r\n  useEffect(() => {\r\n    booksCart && setCartsCheckout(booksCart);\r\n  }, [booksCart]);\r\n\r\n  //Để update\r\n  const [update, setUpdate] = useState(false);\r\n\r\n  const handleUpdate = (status) => {\r\n    setUpdate(status);\r\n  };\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    userId && getBookReservation();\r\n  }, [update]);\r\n\r\n  //Modals\r\n  const [show, setShow] = useState(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  //Cho phần đặt sách\r\n  const onShow = (isShow) => {\r\n    setShow(isShow);\r\n  };\r\n  //Cho phần checkout\r\n  const [checkout, setCheckout] = useState(false);\r\n  const handleCheckout = () => setCheckout(true);\r\n\r\n  const onCheckout = (isCheckout) => {\r\n    setCheckout(isCheckout);\r\n  };\r\n\r\n  const getBookReservation = async () => {\r\n    try {\r\n      const response = await userApi.getBookReserved(userId);\r\n      // console.log(\"cho mượn sách\", response);\r\n      setHide(true);\r\n      setBooksReserved(response.results);\r\n    } catch (error) {\r\n      alert(\"Hãy nhập đúng ID người dùng\");\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n  const handleBookId = () => {\r\n    if (copies.length > 0) {\r\n      dispatch(createCarts(copies));\r\n      alert(\"Thêm thành công\");\r\n    } else {\r\n      alert(\"Không có sản phẩm nào\");\r\n    }\r\n  };\r\n\r\n  const handleDelete = (bookId) => {\r\n    dispatch(deleteCarts(bookId));\r\n  };\r\n\r\n  const handleClick = (details) => {\r\n    if (copies.length === 0) {\r\n      setCopies([details]);\r\n    } else {\r\n      checkCarts(details);\r\n    }\r\n  };\r\n\r\n  const checkCarts = (details) => {\r\n    const findBookSId = copies.findIndex((bookItems) => bookItems === details);\r\n    //Khi có vị trí => xoá\r\n    if (findBookSId > -1) {\r\n      const newCarts = [...copies];\r\n      // Tiến hành xoá\r\n      newCarts.splice(findBookSId, 1);\r\n      //Set lại state\r\n      setCopies(newCarts);\r\n    }\r\n    //Khi có không vị trí => add\r\n    else if (findBookSId === -1) {\r\n      setCopies([...copies, details]);\r\n    }\r\n  };\r\n\r\n  //render component\r\n  const setImg = (img) => {\r\n    return <img style={{ width: \"40px\" }} src={img} alt=\"img\" />;\r\n  };\r\n\r\n  const renderCarts = booksReserved?.map((books, index) => {\r\n    return (\r\n      <>\r\n        <tr key={index}>\r\n          {/* <td>{cart.id}</td> */}\r\n          <td>{index + 1}</td>\r\n          <td>{setImg(books.cover)}</td>\r\n          <td>{renderBarCode(books.barcode, books.copy)}</td>\r\n          <td>{books.title}</td>\r\n          <td>{books.categories}</td>\r\n          <td>{books.authors}</td>\r\n          <td>{books.loanPeriodDays}</td>\r\n\r\n          <td>\r\n            <input\r\n              name={index}\r\n              type=\"checkbox\"\r\n              // onChange={() => handleClick(books.copy)}\r\n              onChange={() => handleClick(books.barcode)}\r\n            // onClick={(e) => setCopies([...copies, books.copy])}\r\n            />\r\n          </td>\r\n        </tr>\r\n      </>\r\n    );\r\n  });\r\n\r\n  //render form\r\n  const renderReservation = () => {\r\n    if (hide) {\r\n      return (\r\n        <>\r\n          <Table className=\"tableForm\" striped bordered hover>\r\n            <thead>\r\n              <tr>\r\n                {/* <th>Id</th> */}\r\n                <th>STT</th>\r\n                <th>Ảnh bìa</th>\r\n                <th>Mã sách</th>\r\n                <th>Tên sách</th>\r\n                <th>Thể loại</th>\r\n                <th>Tên tác giả</th>\r\n                <th>Thời gian mượn</th>\r\n                <th>Chọn sách</th>\r\n                {/* <th>Miêu tả</th> */}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {renderCarts}\r\n\r\n              <tr>\r\n                <td colSpan=\"7\" style={{ visibility: \"hidden\" }}></td>\r\n                <th>\r\n                  <Button onClick={handleBookId}>Chọn sách</Button>\r\n                </th>\r\n              </tr>\r\n            </tbody>\r\n          </Table>\r\n\r\n          <Button variant=\"primary\" onClick={handleShow}>\r\n            Đặt thêm sách khác?\r\n          </Button>\r\n        </>\r\n      );\r\n    } else {\r\n      return <h3>Không có gì để hiện, hãy nhập ID người dùng</h3>;\r\n    }\r\n  };\r\n\r\n  const renderCartsCheckout = cartsCheckout?.map((bookId, index) => {\r\n    return (\r\n      <tr key={index}>\r\n        <td>{index + 1}</td>\r\n        <td>{bookId}</td>\r\n        <td>\r\n          <Button onClick={() => handleDelete(bookId)}>Xoá</Button>\r\n        </td>\r\n      </tr>\r\n    );\r\n  });\r\n\r\n  const renderCartsCheckoutUser = () => {\r\n    if (booksCart?.length > 0) {\r\n      return (\r\n        <>\r\n          <legend className=\"form_name\">Giỏ sách đã chọn</legend>\r\n          <Table striped hover bordered>\r\n            <thead>\r\n              <tr>\r\n                <th>STT</th>\r\n                <th>Mã sách</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>{renderCartsCheckout}</tbody>\r\n          </Table>\r\n          <Button variant=\"success\" onClick={handleCheckout}>\r\n            Tiến hành mượn sách\r\n          </Button>\r\n        </>\r\n      );\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"checkoutForm\">\r\n      <legend className=\"form_name\">Quản lý mượn sách người dùng</legend>\r\n      {/* Search thông tin user */}\r\n      <div className=\"checkoutForm_input\">\r\n        <FloatingLabel label=\"Nhập ID của người dùng\">\r\n          <Form.Control\r\n            placeholder=\"abcxyz\"\r\n            onChange={(e) => setUserId(e.target.value)}\r\n          />\r\n        </FloatingLabel>\r\n        <Button onClick={getBookReservation}>Tìm kiếm</Button>\r\n      </div>\r\n\r\n      {/* Hiện thị nội dung */}\r\n      {renderReservation()}\r\n\r\n      {/* Hiện thị sách đã chọn */}\r\n      {renderCartsCheckoutUser()}\r\n\r\n      <ModalCheckBooks userId={userId} onShow={onShow} isShow={show} />\r\n      <ModalCheckout\r\n        userId={userId}\r\n        onShow={onCheckout}\r\n        isShow={checkout}\r\n        update={update}\r\n        onUpdate={handleUpdate}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CheckoutBooks;\r\n","import productsApi from \"apis/productsApi\";\r\nimport { renderStatus } from \"constants/RenderDate\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Button, FloatingLabel, Form, Table } from \"react-bootstrap\";\r\n\r\nfunction ReturnBooks() {\r\n  document.title = \"Trả sách\";\r\n\r\n  const [bookId, setBookId] = useState();\r\n  const [hide, setHide] = useState(false);\r\n  const [booksReserved, setBooksReserved] = useState();\r\n\r\n  //sau khi check id\r\n  useEffect(() => {\r\n    bookId && getCheckBookCopies();\r\n  }, [bookId]);\r\n\r\n  //sau khi trả sách\r\n  useEffect(() => {\r\n    renderReservation();\r\n  }, [booksReserved]);\r\n\r\n  const getCheckBookCopies = async () => {\r\n    try {\r\n      const response = await productsApi.getCheckCopies(bookId);\r\n      setHide(true);\r\n      // console.log(response);\r\n      setBooksReserved([response]);\r\n    } catch (error) {\r\n      alert(\"Hãy nhập đúng mã Copies sách\");\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n  // trả sách\r\n  const postReturnBook = async (bookId) => {\r\n    try {\r\n      await productsApi.postCopiesReturn({ copies: [bookId] });\r\n      alert(\"Trả sách thành công\");\r\n      setBooksReserved([]);\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n      alert(\"Trả sách thất bại\");\r\n    }\r\n  };\r\n\r\n  //render component\r\n  const setImg = (img) => {\r\n    return <img style={{ width: \"40px\" }} src={img} alt=\"img\" />;\r\n  };\r\n  const renderButton = (status, bookid) => {\r\n    if (status === \"borrowed\") {\r\n      return (\r\n        <Button variant=\"success\" onClick={() => handleReturnBooks(bookid)}>\r\n          Trả sách\r\n        </Button>\r\n      );\r\n    } else {\r\n      return (\r\n        <Button variant=\"success\" disabled>\r\n          Không thể trả\r\n        </Button>\r\n      );\r\n    }\r\n  };\r\n\r\n  const renderCarts = booksReserved?.map((books, index) => {\r\n    return (\r\n      <>\r\n        <tr key={index}>\r\n          <td>{setImg(books.cover)}</td>\r\n          <td>{renderStatus(books.status)}</td>\r\n          <td>{books.user?.name}</td>\r\n          {/* <td>{books.id}</td> */}\r\n          <td>{books.barcode}</td>\r\n          <td>{books.title}</td>\r\n          <td>{books.categories}</td>\r\n          <td>{renderButton(books.status, books.id)}</td>\r\n        </tr>\r\n      </>\r\n    );\r\n  });\r\n\r\n  const handleReturnBooks = (bookId) => {\r\n    // console.log(\"trả sách có id\", bookId);\r\n    postReturnBook(bookId);\r\n  };\r\n\r\n  //render form\r\n  const renderReservation = () => {\r\n    if (hide) {\r\n      return (\r\n        <Table className=\"tableForm\" striped bordered hover>\r\n          <thead>\r\n            <tr>\r\n              {/* <th>Id</th> */}\r\n              <th>Ảnh bìa</th>\r\n              <th>Trạng thái</th>\r\n              <th>Người mượn</th>\r\n              <th>Mã sách</th>\r\n              <th>Tên sách</th>\r\n              <th>Thể loại</th>\r\n              <th>Chọn sách</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{renderCarts}</tbody>\r\n        </Table>\r\n      );\r\n    } else {\r\n      return <h3>Không có gì để hiện, hãy nhập mã copies của sách</h3>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"checkoutForm\">\r\n      <legend className=\"form_name\">Quản lý trả sách người dùng</legend>\r\n      {/* Search thông tin user */}\r\n      <div className=\"checkoutForm_input\">\r\n        <FloatingLabel label=\"Nhập mã copies sách\">\r\n          <Form.Control\r\n            placeholder=\"abcxyz\"\r\n            onChange={(e) => setBookId(e.target.value)}\r\n          />\r\n        </FloatingLabel>\r\n        <Button onClick={getCheckBookCopies}>Tìm kiếm</Button>\r\n      </div>\r\n\r\n      {/* Hiện thị nội dung */}\r\n      {renderReservation()}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ReturnBooks;\r\n","import productsApi from \"apis/productsApi\";\r\nimport reportsApi from \"apis/reportsApi\";\r\nimport PaginationItems from \"components/customComponents/PaginationItems/PaginationItems\";\r\nimport { renderBarCode, renderDate } from \"constants/RenderDate\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Button, Form, Table } from \"react-bootstrap\";\r\nimport \"../ViewReservation/ViewResevation.scss\";\r\n\r\nfunction ViewBorrowingBooks() {\r\n  document.title = \"Sách đã cho mượn\";\r\n\r\n  //Debounce typing\r\n  const typingRef = useRef(null);\r\n\r\n  //Thông tin search\r\n  const [searchInfo, setSearchInfo] = useState({});\r\n  const [sortBy, setSortBy] = useState();\r\n\r\n  //Thông tin để render\r\n  const [borrowing, setBorrowing] = useState([]);\r\n\r\n  const handleSearch = (e) => {\r\n    e.preventDefault();\r\n    // console.log(\"search với info là\");\r\n  };\r\n\r\n  //Phân trang\r\n  const [totalProducts, setTotalProducts] = useState();\r\n  const [page, setPage] = useState(1);\r\n  const [limitPage, setLimitPage] = useState(5);\r\n\r\n  const handleChangePage = (newPage) => {\r\n    setPage(newPage);\r\n  };\r\n  const handleChangeLimit = (newLimit) => {\r\n    setPage(1);\r\n    setLimitPage(newLimit);\r\n  };\r\n\r\n  useEffect(() => {\r\n    viewBorrowing();\r\n  }, [page, limitPage, searchInfo, sortBy]);\r\n\r\n  const viewBorrowing = async () => {\r\n    const params = {\r\n      ...searchInfo,\r\n      sortBy: sortBy,\r\n      page: page,\r\n      limit: limitPage,\r\n    };\r\n\r\n    try {\r\n      const response = await productsApi.getCopiesBorrowing(params);\r\n      console.log(response);\r\n      setBorrowing(response.results);\r\n      setTotalProducts(response.totalResults);\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n  const renderBorrowing = borrowing?.map((info, index) => {\r\n    return (\r\n      <tr key={index}>\r\n        <td>{index + 1 + (page - 1) * limitPage}</td>\r\n        <td>{info.user?.name}</td>\r\n        <td>{renderBarCode(info.barcode, info.id)}</td>\r\n        <td>{info.title}</td>\r\n        <td>{info.categories}</td>\r\n        {/* <td>{renderDateNow(info.borrowedDate)}</td> */}\r\n        <td>{renderDate(info.dueDate)}</td>\r\n      </tr>\r\n    );\r\n  });\r\n\r\n  const handleSearchByName = (e) => {\r\n    const name = e.target.name;\r\n    const value = e.target.value;\r\n\r\n    if (typingRef.current) {\r\n      clearTimeout(typingRef.current);\r\n    }\r\n\r\n    typingRef.current = setTimeout(() => {\r\n      if (value !== \"\") {\r\n        setSearchInfo({\r\n          ...searchInfo,\r\n          [name]: value,\r\n        });\r\n      } else {\r\n        setSearchInfo({\r\n          ...searchInfo,\r\n          [name]: \" \",\r\n        });\r\n      }\r\n    }, 500);\r\n  };\r\n\r\n  //Xuât báo cáo\r\n  const exportBooks = async () => {\r\n    try {\r\n      const response = await reportsApi.exportBooksBorrowing();\r\n      window.location.href = \"//\" + response.path;\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"viewReservation\">\r\n      <legend className=\"form_name\">Quản lý thông tin sách đã cho mượn</legend>\r\n      <Form className=\"viewReservation_form\" onSubmit={handleSearch}>\r\n        <Form.Group className=\"viewReservation_form_items\">\r\n          <Form.Label className=\"label\">Tên người dùng</Form.Label>\r\n          <Form.Control\r\n            className=\"control\"\r\n            name=\"user\"\r\n            type=\"text\"\r\n            placeholder=\"Nhập tên người dùng\"\r\n            onChange={handleSearchByName}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group className=\"viewReservation_form_items\">\r\n          <Form.Label className=\"label\">Tên sách</Form.Label>\r\n          <Form.Control\r\n            name=\"title\"\r\n            className=\"control\"\r\n            type=\"text\"\r\n            placeholder=\"Nhập tên sách đang mượn\"\r\n            onChange={handleSearchByName}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group className=\"viewReservation_form_items\">\r\n          <Form.Label className=\"label\">Ngày mượn sách</Form.Label>\r\n          <Form.Select\r\n            className=\"control\"\r\n            onChange={(e) => setSortBy(e.target.value)}\r\n          >\r\n            <option value=\"dueDate:asc\">Tăng dần</option>\r\n            <option value=\"dueDate:desc\">Giảm dần</option>\r\n          </Form.Select>\r\n        </Form.Group>\r\n        <div style={{ marginLeft: \"auto\" }}>\r\n          <Button\r\n            style={{ marginRight: \"10px\" }}\r\n            className=\"btnSearch\"\r\n            type=\"submit\"\r\n            onClick={viewBorrowing}\r\n          >\r\n            Tìm kiếm\r\n          </Button>\r\n          <Button\r\n            variant=\"secondary\"\r\n            className=\"btnSearch\"\r\n            type=\"submit\"\r\n            onClick={exportBooks}\r\n          >\r\n            Xuất báo cáo\r\n          </Button>\r\n        </div>\r\n      </Form>\r\n      <Table bordered hover striped className=\"viewReservation_table\">\r\n        <thead>\r\n          <tr>\r\n            <th>STT</th>\r\n            <th>Người đang mượn</th>\r\n            <th>Mã sách</th>\r\n            <th>Tên sách</th>\r\n            <th>Thể loại</th>\r\n            {/* <th>Ngày mượn</th> */}\r\n            <th>Hạn trả</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>{renderBorrowing}</tbody>\r\n      </Table>\r\n      <PaginationItems\r\n        totalRows={totalProducts}\r\n        limit={limitPage}\r\n        onChangeLimit={handleChangeLimit}\r\n        onChangePage={handleChangePage}\r\n        activePage={page}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ViewBorrowingBooks;\r\n","import { renderBarCode, renderDate, renderDateNow, renderStatus } from \"constants/RenderDate\";\r\nimport React from \"react\";\r\nimport { Button, Modal } from \"react-bootstrap\";\r\nimport \"./ModalsForm.scss\";\r\n\r\nfunction ModalReservationDetails({ isShow, onShow, reservationDetails }) {\r\n  // console.log(\"đã nhận được \", reservationDetails);\r\n  //Thiết lập cho cha\r\n  const handleClose = () => {\r\n    return onShow(false);\r\n  };\r\n\r\n  //render components \r\n  const renderBooks = (books) => {\r\n    if (books.length === 0) {\r\n      return\r\n    }\r\n    else {\r\n      return books.map(book => {\r\n        return (\r\n          <span>\r\n            Tên sách: {book.book.title} - Mã copies: {renderBarCode(book.barcode, book.copy)}\r\n          </span>\r\n        )\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n\r\n  const RenderBody = () => {\r\n    return (\r\n      <div className=\"detailsUsers\">\r\n        <div>\r\n          <strong>Trạng thái mượn: </strong>\r\n          {renderStatus(reservationDetails.status)}</div>\r\n        <div>\r\n          <strong>Người mượn: </strong>\r\n          {reservationDetails.user.name} - <strong>Mã số: </strong>{reservationDetails.user.uid} </div>\r\n        <div className=\"booksReservation\">\r\n          <div className=\"name\"><strong>Sách đã mượn: </strong></div>\r\n          <div className=\"bookName\" >{renderBooks(reservationDetails.books)}</div>\r\n        </div>\r\n        <div>\r\n          <strong>Ngày bắt đầu hẹn: </strong>\r\n          {renderDateNow(reservationDetails.createdDate)}</div>\r\n        <div>\r\n          <strong>Ngày kết thúc hẹn: </strong>\r\n          {renderDate(reservationDetails.dueDate)}</div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <Modal show={isShow} onHide={handleClose}>\r\n      <Modal.Header>\r\n        <Modal.Title>Thông tin chi tiết lịch hẹn người dùng</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n\r\n        <RenderBody />\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={handleClose}>\r\n          Đóng\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n\r\n  );\r\n}\r\n\r\nexport default ModalReservationDetails;\r\n","import ModalReservationDetails from 'components/customComponents/Modals/ModalForm/ModalReservationDetails';\r\nimport React, { useState } from 'react';\r\nimport { Button } from \"react-bootstrap\";\r\nimport { GoInfo } from \"react-icons/go\";\r\n\r\nfunction ViewReservationDetails({ reservationDetails }) {\r\n    //Xem thông tin chi tiết\r\n    const [show, setShow] = useState(false);\r\n    const handleShow = () => setShow(true);\r\n\r\n    //Nhận props từ con\r\n    const onShow = (isShow) => {\r\n        setShow(isShow);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Button variant=\"none\" onClick={handleShow}><GoInfo style={{ fontSize: \"30px\", color: \"#714FFC\" }} /></Button>\r\n            <ModalReservationDetails reservationDetails={reservationDetails} onShow={onShow} isShow={show} />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ViewReservationDetails\r\n","import userApi from \"apis/userApi\";\r\nimport PaginationItems from \"components/customComponents/PaginationItems/PaginationItems\";\r\nimport { renderDate, renderDateNow, renderStatus } from \"constants/RenderDate\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Button, Form, Table } from \"react-bootstrap\";\r\nimport ViewReservationDetails from \"./ViewReservationDetails/ViewReservationDetails\";\r\nimport \"./ViewResevation.scss\";\r\n\r\nfunction ViewReservation() {\r\n  document.title = \"Lịch hẹn người dùng\";\r\n\r\n  //Debounce typing\r\n  const typingRef = useRef(null);\r\n\r\n  const [status, setStatus] = useState(\"pending\");\r\n  const [name, setName] = useState();\r\n  const [reservationInfo, setReservationInfo] = useState([]);\r\n  //Phân trang\r\n  const [totalProducts, setTotalProducts] = useState();\r\n  const [limitPage, setLimitPage] = useState(5);\r\n  const [page, setPage] = useState(1);\r\n\r\n  const handleChangePage = (newPage) => {\r\n    setPage(newPage);\r\n  };\r\n  const handleChangeLimit = (newLimit) => {\r\n    setPage(1);\r\n    setLimitPage(newLimit);\r\n  };\r\n\r\n  //Khi thay đổi trang\r\n  useEffect(() => {\r\n    getAllUserReservations();\r\n  }, [page, limitPage, name]);\r\n\r\n  //Khi thay đổi trạng thái\r\n  useEffect(() => {\r\n    setPage(1);\r\n    getAllUserReservations();\r\n  }, [status]);\r\n\r\n\r\n\r\n  const getAllUserReservations = async () => {\r\n    // console.log(name);\r\n    try {\r\n      const response = await userApi.getUserReservation({\r\n        status: status,\r\n        name: name,\r\n        limit: limitPage,\r\n        page: page,\r\n      });\r\n      // console.log(\"lịch hẹn\", response.results);\r\n      //Set pagination\r\n      setTotalProducts(response.totalResults);\r\n      setReservationInfo()\r\n      //Set info\r\n      setReservationInfo(response.results);\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n\r\n\r\n  const renderReservation = reservationInfo?.map((info, index) => {\r\n    return (\r\n\r\n      <tr key={index}>\r\n        <td>{index + 1 + (page - 1) * limitPage}</td>\r\n        <td>{renderStatus(info.status)}</td>\r\n        <td>{info.user.name}</td>\r\n        {/* <td>{renderBooks(info.books)}</td> */}\r\n        <td>{renderDateNow(info.createdDate)}</td>\r\n        <td>{renderDate(info.dueDate)}</td>\r\n        <td>\r\n          <ViewReservationDetails reservationDetails={info} />\r\n        </td>\r\n      </tr>\r\n    );\r\n  });\r\n\r\n  const handleSearch = (e) => {\r\n    e.preventDefault();\r\n    getAllUserReservations();\r\n  };\r\n\r\n  const handleSearchByName = (e) => {\r\n    const value = e.target.value;\r\n\r\n    if (typingRef.current) {\r\n      clearTimeout(typingRef.current);\r\n    }\r\n\r\n    typingRef.current = setTimeout(() => {\r\n      if (value !== \"\") {\r\n        setName(value);\r\n      } else {\r\n        setName(\" \");\r\n      }\r\n    }, 500);\r\n  };\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"viewReservation\">\r\n      <legend className=\"form_name\">\r\n        Quản lý lịch hẹn sách của người dùng\r\n      </legend>\r\n      <Form className=\"viewReservation_form\" onSubmit={handleSearch}>\r\n        <Form.Group className=\"viewReservation_form_items\">\r\n          <Form.Label className=\"label\">Tên người dùng</Form.Label>\r\n          <Form.Control\r\n            className=\"control\"\r\n            type=\"text\"\r\n            placeholder=\"Nhập tên người dùng\"\r\n            onChange={handleSearchByName}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group className=\"viewReservation_form_items\">\r\n          <Form.Label className=\"label\">Trạng thái mượn sách</Form.Label>\r\n          <Form.Select\r\n            className=\"control\"\r\n            onChange={(e) => setStatus(e.target.value)}\r\n          >\r\n            <option value=\"pending\">Đang hẹn</option>\r\n            <option value=\"fulfilled\">Thành công</option>\r\n            <option value=\"expired\">Đã hết hạn</option>\r\n            <option value=\"canceled\">Đã bị huỷ</option>\r\n          </Form.Select>\r\n        </Form.Group>\r\n        <Button className=\"btnSearch\" type=\"submit\">\r\n          Tìm kiếm\r\n        </Button>\r\n      </Form>\r\n\r\n      <Table bordered hover striped className=\"viewReservation_table\">\r\n        <thead>\r\n          <tr>\r\n            <th>STT</th>\r\n            <th>Trạng thái</th>\r\n            <th>Người mượn</th>\r\n            {/* <th>Thông tin sách mượn</th> */}\r\n            <th>Ngày bắt đầu hẹn</th>\r\n            <th>Ngày kết thúc hẹn</th>\r\n            <th>Xem chi tiết</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>{renderReservation}</tbody>\r\n      </Table>\r\n      <PaginationItems\r\n        totalRows={totalProducts}\r\n        limit={limitPage}\r\n        onChangeLimit={handleChangeLimit}\r\n        onChangePage={handleChangePage}\r\n        activePage={page}\r\n      />\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ViewReservation;\r\n","import productsApi from \"apis/productsApi\";\r\nimport PaginationItems from \"components/customComponents/PaginationItems/PaginationItems\";\r\nimport { renderBarCode, renderDateNow } from \"constants/RenderDate\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Button, Form, Table } from \"react-bootstrap\";\r\nimport \"../ViewReservation/ViewResevation.scss\";\r\n\r\nfunction ViewReturnBooks() {\r\n  document.title = \"Sách đã cho mượn\";\r\n\r\n  //Debounce typing\r\n  const typingRef = useRef(null);\r\n\r\n  //Thông tin search\r\n  const [searchInfo, setSearchInfo] = useState({});\r\n  const [sortBy, setSortBy] = useState(\"returnedDate:desc\");\r\n\r\n  //Thông tin để render\r\n  const [borrowing, setBorrowing] = useState([]);\r\n\r\n  const handleSearch = (e) => {\r\n    e.preventDefault();\r\n    // console.log(\"search với info là\");\r\n  };\r\n\r\n  //Phân trang\r\n  const [totalProducts, setTotalProducts] = useState();\r\n  const [page, setPage] = useState(1);\r\n  const [limitPage, setLimitPage] = useState(5);\r\n\r\n  const handleChangePage = (newPage) => {\r\n    setPage(newPage);\r\n  };\r\n  const handleChangeLimit = (newLimit) => {\r\n    setPage(1);\r\n    setLimitPage(newLimit);\r\n  };\r\n\r\n  useEffect(() => {\r\n    viewBorrowing();\r\n  }, [page, limitPage, searchInfo, sortBy]);\r\n\r\n  const viewBorrowing = async () => {\r\n    const params = {\r\n      ...searchInfo,\r\n      sortBy: sortBy,\r\n      page: page,\r\n      limit: limitPage,\r\n    };\r\n\r\n    try {\r\n      const response = await productsApi.getCopiesReturn(params);\r\n      console.log(response);\r\n      setBorrowing(response.results);\r\n      setTotalProducts(response.totalResults);\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n  // const renderBarCode = (barCode, id) => {\r\n  //   if (barCode) {\r\n  //     return <>{barCode}</>;\r\n  //   } else {\r\n  //     return <>{id}</>;\r\n  //   }\r\n  // };\r\n\r\n  const renderBorrowing = borrowing?.map((info, index) => {\r\n    return (\r\n      <tr key={index}>\r\n        <td>{index + 1 + (page - 1) * limitPage}</td>\r\n        <td>{info.user?.name}</td>\r\n        <td>{renderBarCode(info.barcode, info._id)}</td>\r\n        <td>{info.title}</td>\r\n        {/* <th>{renderDate(info.borrowedDate)}</th> */}\r\n        <td>{renderDateNow(info.returnedDate)}</td>\r\n      </tr>\r\n    );\r\n  });\r\n\r\n  const handleSearchByName = (e) => {\r\n    const name = e.target.name;\r\n    const value = e.target.value;\r\n\r\n    if (typingRef.current) {\r\n      clearTimeout(typingRef.current);\r\n    }\r\n\r\n    typingRef.current = setTimeout(() => {\r\n      if (value !== \"\") {\r\n        setSearchInfo({\r\n          ...searchInfo,\r\n          [name]: value,\r\n        });\r\n      } else {\r\n        setSearchInfo({\r\n          ...searchInfo,\r\n          [name]: \" \",\r\n        });\r\n      }\r\n    }, 500);\r\n  };\r\n\r\n  return (\r\n    <div className=\"viewReservation\">\r\n      <legend className=\"form_name\">\r\n        Quản lý thông tin sách người dùng đã trả\r\n      </legend>\r\n      <Form className=\"viewReservation_form\" onSubmit={handleSearch}>\r\n        <Form.Group className=\"viewReservation_form_items\">\r\n          <Form.Label className=\"label\">Tên người dùng</Form.Label>\r\n          <Form.Control\r\n            className=\"control\"\r\n            name=\"user\"\r\n            type=\"text\"\r\n            placeholder=\"Nhập tên người dùng\"\r\n            onChange={handleSearchByName}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group className=\"viewReservation_form_items\">\r\n          <Form.Label className=\"label\">Tên sách</Form.Label>\r\n          <Form.Control\r\n            name=\"title\"\r\n            className=\"control\"\r\n            type=\"text\"\r\n            placeholder=\"Nhập tên sách đã trả\"\r\n            onChange={handleSearchByName}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group className=\"viewReservation_form_items\">\r\n          <Form.Label className=\"label\">Ngày trả sách</Form.Label>\r\n          <Form.Select\r\n            className=\"control\"\r\n            onChange={(e) => setSortBy(e.target.value)}\r\n          >\r\n            <option value=\"returnedDate:asc\">Tăng dần</option>\r\n            <option value=\"returnedDate:desc\">Giảm dần</option>\r\n          </Form.Select>\r\n        </Form.Group>\r\n\r\n        <Button className=\"btnSearch\" type=\"submit\" onClick={viewBorrowing}>\r\n          Tìm kiếm\r\n        </Button>\r\n      </Form>\r\n      <Table bordered hover striped className=\"viewReservation_table\">\r\n        <thead>\r\n          <tr>\r\n            <th>STT</th>\r\n            <th>Người trả sách</th>\r\n            <th>Mã sách</th>\r\n            <th>Tên sách</th>\r\n            <th>Ngày trả</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>{renderBorrowing}</tbody>\r\n      </Table>\r\n      <PaginationItems\r\n        totalRows={totalProducts}\r\n        limit={limitPage}\r\n        onChangeLimit={handleChangeLimit}\r\n        onChangePage={handleChangePage}\r\n        activePage={page}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ViewReturnBooks;\r\n","import GetBooks from \"components/Admin/Manage/Books/ViewBooks/ViewBooks\";\r\nimport ReportActivities from \"components/Admin/Manage/Reports/ReportActivities/ReportActivities\";\r\nimport ReportLibrarian from \"components/Admin/Manage/Reports/ReportLibrarian/ReportLibrarian\";\r\nimport CreateUser from \"components/Admin/Manage/Users/CreateUser/CreateUser\";\r\nimport ViewUser from \"components/Admin/Manage/Users/ViewUser/ViewUser\";\r\nimport HomeLibrarian from \"components/Librarian/HomeLibrarian/HomeLibrarian\";\r\nimport LibrarianDashBoard from \"components/Librarian/LibrarianDashBoard/LibrarianDashBoard\";\r\nimport CheckoutBooks from \"components/Librarian/Manage/Books/ReservationBook/CheckoutBooks\";\r\nimport ReturnBooks from \"components/Librarian/Manage/Books/ReturnBooks/ReturnBooks\";\r\nimport ViewBorrowingBooks from \"components/Librarian/Manage/Books/ViewBorrowingBooks/ViewBorrowingBooks\";\r\nimport ViewReservation from \"components/Librarian/Manage/Books/ViewReservation/ViewReservation\";\r\nimport ViewReturnBooks from \"components/Librarian/Manage/Books/ViewReturnBooks/ViewReturnBooks\";\r\n\r\nimport React from \"react\";\r\nimport { Route, Switch, useRouteMatch } from \"react-router\";\r\n\r\nfunction Librarian() {\r\n  let { path, url } = useRouteMatch();\r\n  // console.log(path, url);\r\n  return (\r\n    <div className=\"adminPage\">\r\n      <Switch>\r\n        <div className=\"containerDashBoard\">\r\n          <div className=\"containerDashBoard_menu\">\r\n            <LibrarianDashBoard url={url} />\r\n          </div>\r\n\r\n          <div\r\n            className=\"containerDashBoard_content\"\r\n            style={{ overflowY: \"scroll\" }}\r\n          >\r\n            <div className=\"containerDashBoard_content_lists\">\r\n              <Route\r\n                path={`${path}`}\r\n                component={() => <HomeLibrarian />}\r\n                exact={true}\r\n              />\r\n\r\n              {/* Quản lý users */}\r\n              <Route\r\n                path={`${path}/users`}\r\n                component={() => <ViewUser />}\r\n                exact={true}\r\n              />\r\n\r\n              <Route\r\n                path={`${path}/users/create`}\r\n                component={() => <CreateUser />}\r\n                exact={true}\r\n              />\r\n\r\n              {/* Quản lý sách */}\r\n              <Route\r\n                path={`${path}/books/view`}\r\n                component={() => <GetBooks />}\r\n                exact={true}\r\n              />\r\n              <Route\r\n                path={`${path}/books/reservations`}\r\n                component={() => <ViewReservation />}\r\n                exact={true}\r\n              />\r\n              <Route\r\n                path={`${path}/books/copies`}\r\n                component={() => <CheckoutBooks />}\r\n                // exact={true}\r\n              />\r\n              <Route\r\n                path={`${path}/books/return`}\r\n                component={() => <ReturnBooks />}\r\n                // exact={true}\r\n              />\r\n              <Route\r\n                path={`${path}/books/borrowing`}\r\n                component={() => <ViewBorrowingBooks />}\r\n                // exact={true}\r\n              />\r\n              <Route\r\n                path={`${path}/books/returned`}\r\n                component={() => <ViewReturnBooks />}\r\n                // exact={true}\r\n              />\r\n\r\n              {/* Quản lý báo cáo */}\r\n              <Route\r\n                path={`${path}/report`}\r\n                component={() => <ReportActivities />}\r\n                exact={true}\r\n              />\r\n              <Route\r\n                path={`${path}/report/activities`}\r\n                component={() => <ReportLibrarian />}\r\n                exact={true}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Librarian;\r\n","import accountApi from \"apis/authApi\";\r\nimport React, { useEffect } from \"react\";\r\nimport { useHistory, useLocation } from \"react-router\";\r\n\r\nfunction VerifyEmail() {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  const tokenActive = new URLSearchParams(location.search).get(\"token\");\r\n  useEffect(() => {\r\n    activeEmail();\r\n  }, []);\r\n\r\n  const activeEmail = async () => {\r\n    try {\r\n      await accountApi.verificationEmail(tokenActive);\r\n      // console.log(\"đã chạy!!\");\r\n      alert(\"Kích hoạt email thành công\");\r\n      history.push(\"/user\");\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n  return <div></div>;\r\n}\r\n\r\nexport default VerifyEmail;\r\n","import userApi from \"apis/userApi\";\r\nimport React from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { MdEventNote } from \"react-icons/md\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { selectUser } from \"reducers/authSlice\";\r\nimport { deleteCartsId } from \"reducers/userSlice\";\r\n\r\n//Toast\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport \"./ButtonStyleCarts.scss\";\r\n\r\nfunction ButtonChooseCarts({ selectBooks }) {\r\n  const isUser = useSelector(selectUser);\r\n\r\n  //Custom alert\r\n  const notify = (status, info) =>\r\n    toast[status](info, { position: toast.POSITION.BOTTOM_LEFT });\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const bookCarts = { books: selectBooks };\r\n\r\n  // console.log(\"booksCarts\", bookCarts);\r\n  const makeReservation = async () => {\r\n    try {\r\n      // const response = await userApi.postSchedule(isUser.id, bookCarts);\r\n      await userApi.postSchedule(isUser.id, bookCarts);\r\n      // console.log(\"thành công\", { response });\r\n      // dispatch(isUpdateCarts(true));\r\n      //Reset carts\r\n      resetMyCarts(selectBooks);\r\n      // alert(\"Đặt thành công, hãy kiểm tra lịch hẹn\");\r\n      notify(\"success\", \"Đặt lịch hẹn thành công, hãy kiểm tra lịch hẹn\");\r\n    } catch (error) {\r\n      console.log({ error });\r\n      // alert(error.response.data.message);\r\n      notify(\"warn\", ` Thất bại, ${error.response.data.message}`);\r\n    }\r\n  };\r\n\r\n  const resetMyCarts = (books) => {\r\n    books.map((bookId) => dispatch(deleteCartsId(bookId)));\r\n  };\r\n\r\n  const handleClick = () => {\r\n    // console.log(\"đã chọn\", selectBooks);\r\n    if (selectBooks.length === 0) {\r\n      notify(\"error\", \"Bạn chưa chọn cuốn nào\");\r\n    }\r\n    selectBooks.length > 0 && makeReservation();\r\n\r\n    //reset lại carts\r\n  };\r\n  return (\r\n    <>\r\n      <Button variant=\"success\" onClick={() => handleClick()}>\r\n        <MdEventNote className=\"btnClick_icon\" />\r\n        <span className=\"btnClick_name\">Đặt lịch hẹn</span>\r\n      </Button>\r\n\r\n      <ToastContainer />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ButtonChooseCarts;\r\n","import userApi from \"apis/userApi\";\r\nimport React from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { MdDeleteForever } from \"react-icons/md\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router\";\r\nimport { selectUser } from \"reducers/authSlice\";\r\nimport { deleteCartsId } from \"reducers/userSlice\";\r\n\r\n//Toast\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport \"./ButtonStyleCarts.scss\";\r\n\r\nfunction ButtonDeleteCarts({ product }) {\r\n  // console.log(\"delete products\", { product });\r\n\r\n  //Custom alert\r\n  const notify = (status, info) =>\r\n    toast[status](info, { position: toast.POSITION.BOTTOM_LEFT });\r\n\r\n  const user = useSelector(selectUser);\r\n  const history = useHistory();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const deleteCarts = async () => {\r\n    //Truyền vào userId và bookId để tiến thành xoá\r\n    const userId = user.id;\r\n    const bookId = product.id;\r\n    try {\r\n      await userApi.deleteBooksOfCart(userId, bookId);\r\n\r\n      //xoá bookById và resetup cho redux\r\n      dispatch(deleteCartsId(bookId));\r\n      //Thông báo xoá thành công\r\n      // alert(\"Xoá sản phẩm thành công\");\r\n      notify(\"success\", \"Xoá sản phẩm thành công\");\r\n    } catch (error) {\r\n      console.log(\"lỗi tại delecarts\", { error });\r\n      notify(\"warn\", \"Xoá sản phẩm thất bại\");\r\n    }\r\n  };\r\n\r\n  const handleClick = () => {\r\n    if (!user) {\r\n      history.push(\"/login\");\r\n    } else {\r\n      deleteCarts();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        variant=\"danger\"\r\n        className=\"btnClickDeleted\"\r\n        onClick={() => handleClick()}\r\n      >\r\n        <MdDeleteForever className=\"btnClick_icon\" />\r\n        <span className=\"btnClick_name\">Xoá sách</span>\r\n      </Button>\r\n\r\n      <ToastContainer />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ButtonDeleteCarts;\r\n","import ButtonChooseCarts from \"components/customComponents/ButtonHandleCarts/ButtonChooseCarts\";\r\nimport ButtonDeleteCarts from \"components/customComponents/ButtonHandleCarts/ButtonDeleteCarts\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Table } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectMyCarts, selectMyTotalCarts } from \"reducers/userSlice\";\r\nimport \"./MyCarts.scss\";\r\n\r\nfunction MyCarts() {\r\n  document.title = \"Giỏ hàng cá nhân\";\r\n\r\n  //Lấy carts từ user\r\n  const getMyCarts = useSelector(selectMyCarts);\r\n  const getMyTotalCarts = useSelector(selectMyTotalCarts);\r\n\r\n  // Danh sách carts\r\n  const [carts, setCarts] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getMyCarts && setCarts(getMyCarts);\r\n    // console.log(\"đã nhận được thông tin cập nhật\", getMyCarts);\r\n  }, [getMyCarts, getMyTotalCarts]);\r\n\r\n  const [selectBooks, setSelectBooks] = useState([]);\r\n\r\n  const handleClick = (details) => {\r\n    if (selectBooks.length === 0) {\r\n      setSelectBooks([details]);\r\n    } else {\r\n      checkCarts(details);\r\n    }\r\n  };\r\n\r\n  const checkCarts = (details) => {\r\n    // console.log(\"checkCarts\", details);\r\n    const findBookSId = selectBooks.findIndex(\r\n      (bookItems) => bookItems === details\r\n    );\r\n    // console.log(\"vị trí cần xoá\", findBookSId);\r\n    //Khi có vị trí => xoá\r\n    if (findBookSId > -1) {\r\n      const newCarts = [...selectBooks];\r\n      // Tiến hành xoá\r\n      newCarts.splice(findBookSId, 1);\r\n      //Set lại state\r\n      setSelectBooks(newCarts);\r\n    }\r\n    //Khi có không vị trí => add\r\n    else if (findBookSId === -1) {\r\n      setSelectBooks([...selectBooks, details]);\r\n    }\r\n  };\r\n\r\n  const imgCarts = (img) => {\r\n    return <img src={img} alt=\"img-book\" />;\r\n  };\r\n\r\n  const showMyCarts = carts.map((details, index) => {\r\n    // console.log(\"có chạy lại\", details);\r\n    return (\r\n      <tr key={index}>\r\n        <th>\r\n          <input type=\"checkbox\" onChange={() => handleClick(details.id)} />\r\n        </th>\r\n        <th>{index + 1}</th>\r\n        <th>{imgCarts(details.cover)}</th>\r\n        <th>{details.title}</th>\r\n        <th>{details.copies}</th>\r\n        <th>\r\n          <ButtonDeleteCarts product={details} />\r\n        </th>\r\n      </tr>\r\n    );\r\n  });\r\n\r\n  // console.log(\"all carts từ my carts\", carts);\r\n\r\n  return (\r\n    <>\r\n      <legend className=\"form_name\">Những sách đang có trong giỏ </legend>\r\n      <Table className=\"cartTable\" striped bordered hover>\r\n        <thead className=\"cartTable_header\">\r\n          <tr>\r\n            <th>Chọn</th>\r\n            <th>STT</th>\r\n            <th>Ảnh minh hoạ</th>\r\n            <th>Tên sách</th>\r\n            <th>Còn trong kho</th>\r\n            <th>Xoá sản phẩm</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody className=\"cartTable_contents\">{showMyCarts}</tbody>\r\n      </Table>\r\n      <ButtonChooseCarts selectBooks={selectBooks} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MyCarts;\r\n","import accountApi from \"apis/authApi\";\r\nimport React from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport \"./ActiveEmail.scss\";\r\n\r\nfunction ActiveEmail() {\r\n  const currentURL = window.location.href;\r\n  // console.log(currentURL);\r\n  const sendEmail = async () => {\r\n    const url = { redirectUrl: `${currentURL}/profile/verify` };\r\n    try {\r\n      await accountApi.sendVerificationEmail(url);\r\n      alert(\"Đã tiến thành xác thực. Hãy kiểm tra hộp thoại email!!\");\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button className=\"btnActive\" onClick={sendEmail}>\r\n        Kích hoạt email\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ActiveEmail;\r\n","import accountApi from \"apis/authApi\";\r\nimport ActiveEmail from \"components/Auth/ActiveEmail/ActiveEmail\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectUser } from \"reducers/authSlice\";\r\nimport \"./Profile.scss\";\r\n\r\nfunction Profile() {\r\n  document.title = \"Thông tin cá nhân\";\r\n\r\n  // const { path, url } = useRouteMatch();\r\n  // console.log(path);\r\n  const user = useSelector(selectUser);\r\n  const [userInfo, setUserInfo] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getInfo();\r\n  }, []);\r\n\r\n  // console.log(\"User Info: \", userInfo);\r\n\r\n  const isActiveEmail = (active) => {\r\n    if (!active) {\r\n      return <ActiveEmail email={user.email} />;\r\n    } else {\r\n      return <Button disabled>Đã kích hoạt</Button>;\r\n    }\r\n  };\r\n\r\n  const getInfo = async () => {\r\n    try {\r\n      const response = await accountApi.getInfoUser(user.id);\r\n      // console.log(response);\r\n      setUserInfo([response]);\r\n    } catch (error) {\r\n      // // setError(error.response.data.message);\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n  const renderInfo = userInfo?.map((info) => {\r\n    return (\r\n      <>\r\n        <div>\r\n          <strong>Tên người dùng</strong> {info.name}\r\n        </div>\r\n        <div>\r\n          <span>\r\n            <strong>Địa chỉ email</strong> {info.email}\r\n          </span>\r\n          <span>{isActiveEmail(info.isEmailVerified)}</span>\r\n        </div>\r\n      </>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <div className=\"menuProfile\">\r\n      <div className=\"menuProfile_info\">{renderInfo}</div>\r\n      <button>Thay đổi thông tin</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n","import userApi from \"apis/userApi\";\r\nimport { renderDate, renderDateNow, renderStatus } from \"constants/RenderDate\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Button, Table } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectUser } from \"reducers/authSlice\";\r\n\r\n//Toast\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport \"./Reservation.scss\";\r\n\r\nfunction Reservation() {\r\n  document.title = \"Xem lịch hẹn\";\r\n\r\n  //Custom alert\r\n  const notify = (status, info) =>\r\n    toast[status](info, { position: toast.POSITION.BOTTOM_LEFT });\r\n\r\n  const isUser = useSelector(selectUser);\r\n  const [reservation, setReservation] = useState([]);\r\n  const [update, setUpdate] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // console.log(\"huỷ thành công\");\r\n    isUser && getReservation();\r\n  }, [update]);\r\n\r\n  const showBooks = (booksInfo) => {\r\n    return booksInfo.map((details, index) => {\r\n      return (\r\n        <div key={index} className=\"cartTable_contents_rows_details_items\">\r\n          <img src={details.cover} alt=\"cover\" />\r\n          <span>{details.title}</span>\r\n        </div>\r\n      );\r\n    });\r\n  };\r\n\r\n  const cancelButton = (status, reservedId) => {\r\n    if (\r\n      status === \"canceled\" ||\r\n      status === \"expired\" ||\r\n      status === \"fulfilled\"\r\n    ) {\r\n      return <Button disabled>Không thể huỷ</Button>;\r\n    } else {\r\n      return (\r\n        <Button onClick={() => handleCancelReservation(reservedId)}>\r\n          Huỷ lịch đặt\r\n        </Button>\r\n      );\r\n    }\r\n  };\r\n\r\n  const getReservation = async () => {\r\n    const userId = isUser.id;\r\n    try {\r\n      const response = await userApi.getSchedule(userId);\r\n      // console.log(\"thành công\", response);\r\n      //truyền vô state\r\n      setReservation(response.results);\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n  const handleCancelReservation = async (reservedId) => {\r\n    const userId = isUser.id;\r\n    try {\r\n      await userApi.postDeleteReservation(userId, reservedId);\r\n      // alert(\"Huỷ lịch thành công\");\r\n      notify(\"success\", \"Huỷ lịch thành công\");\r\n      setUpdate(!update);\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n      notify(\"warn\", ` Thất bại, ${error.response.data.message}`);\r\n    }\r\n  };\r\n\r\n  const showReservation = reservation.map((details, index) => {\r\n    return (\r\n      <tr key={index} className=\"cartTable_contents_rows\">\r\n        <th className=\"cartTable_contents_rows_index\">{index + 1}</th>\r\n        <th className=\"cartTable_contents_rows_status\">\r\n          {renderStatus(details.status)}\r\n        </th>\r\n        <th className=\"cartTable_contents_rows_details\">\r\n          {showBooks(details.books)}\r\n        </th>\r\n        <th className=\"cartTable_contents_rows_times\">\r\n          {renderDateNow(details.createdDate)}\r\n        </th>\r\n        <th className=\"cartTable_contents_rows_times\">\r\n          {renderDate(details.dueDate)}\r\n        </th>\r\n        <th>{cancelButton(details.status, details.id)}</th>\r\n      </tr>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <legend className=\"form_name\">Lịch hẹn đặt sách</legend>\r\n      <Table className=\"cartTable\" striped bordered hover>\r\n        <thead className=\"cartTable_header\">\r\n          <tr>\r\n            <th>STT</th>\r\n            <th>Trạng thái</th>\r\n            <th>Sách mượn bao gồm</th>\r\n            <th>Ngày tạo</th>\r\n            <th>Hạn chót</th>\r\n            <th>Huỷ lịch</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody className=\"cartTable_contents\">{showReservation}</tbody>\r\n      </Table>\r\n      <ToastContainer />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Reservation;\r\n","import userApi from \"apis/userApi\";\r\nimport React, { useState } from \"react\";\r\nimport { Button, Form } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectUser } from \"reducers/authSlice\";\r\n//Toast\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nfunction ResetPassword() {\r\n  document.title = \"Thay đổi mật khẩu\";\r\n\r\n  const [password, setPassword] = useState(\"\");\r\n  const [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n  const isUser = useSelector(selectUser);\r\n  //Custom alert\r\n  const notify = (status, info) =>\r\n    toast[status](info, { position: toast.POSITION.BOTTOM_LEFT });\r\n\r\n  const resetPassword = async () => {\r\n    const userId = isUser.id;\r\n    const params = { password: password };\r\n    try {\r\n      await userApi.userUpdateInfo(userId, params);\r\n      notify(\"success\", \"Thay đổi thành công\");\r\n      // console.log(\"thành công\");\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n  const resetValue = () => {\r\n    setPassword(\"\");\r\n    setPasswordConfirm(\"\");\r\n  };\r\n\r\n  const handleResetPassword = (e) => {\r\n    e.preventDefault();\r\n    if (!password || !passwordConfirm) {\r\n      notify(\"warn\", \"Không được bỏ trống\");\r\n    } else if (password !== passwordConfirm) {\r\n      notify(\"warn\", \"Mật khẩu xác nhận không chính xác\");\r\n    } else {\r\n      resetPassword();\r\n      resetValue();\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <div>\r\n        <Form className=\"form\" onSubmit={handleResetPassword}>\r\n          <legend className=\"form_name\">Thay Đổi Mật Khẩu</legend>\r\n          {/* <Form.Group className=\"mb-3 form_items\">\r\n          <Form.Label className=\"form_items_label\">\r\n            Mật khẩu hiện tại\r\n          </Form.Label>\r\n          <Form.Control\r\n            className=\"form_items_input\"\r\n            name=\"title\"\r\n            type=\"text\"\r\n            placeholder=\"Nhập mật khẩu hiện tại\"\r\n          />\r\n        </Form.Group> */}\r\n          <Form.Group className=\"mb-3 form_items\">\r\n            <Form.Label className=\"form_items_label\">\r\n              Nhập mật khẩu mới\r\n            </Form.Label>\r\n            <Form.Control\r\n              className=\"form_items_input\"\r\n              name=\"title\"\r\n              type=\"password\"\r\n              placeholder=\"Nhập mật khẩu mới\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group className=\"mb-3 form_items\">\r\n            <Form.Label className=\"form_items_label\">\r\n              Nhập lại mật khẩu mới\r\n            </Form.Label>\r\n            <Form.Control\r\n              className=\"form_items_input\"\r\n              name=\"title\"\r\n              type=\"password\"\r\n              placeholder=\"Xác nhận đúng mật khẩu mới\"\r\n              value={passwordConfirm}\r\n              onChange={(e) => setPasswordConfirm(e.target.value)}\r\n            />\r\n          </Form.Group>\r\n          <Button type=\"submit\" variant=\"primary\">\r\n            Thay đổi mật khẩu\r\n          </Button>\r\n        </Form>\r\n      </div>\r\n      <ToastContainer />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ResetPassword;\r\n","import userApi from \"apis/userApi\";\r\nimport { renderDate, renderDateNow, renderStatus } from \"constants/RenderDate\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Table } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectUser } from \"reducers/authSlice\";\r\n\r\nfunction ViewHistoryReserved() {\r\n  document.title = \"Lịch sử mượn trả sách\";\r\n\r\n  const isUser = useSelector(selectUser);\r\n  const [reservationInfo, setReservationInfo] = useState([]);\r\n  useEffect(() => {\r\n    viewHistoryReserved();\r\n  }, [isUser]);\r\n\r\n  const viewHistoryReserved = async () => {\r\n    const userId = isUser.id;\r\n    try {\r\n      const response = await userApi.postScheduledTimes(userId);\r\n      console.log(\"lịch mượn trả là\", response);\r\n      setReservationInfo(response.results);\r\n    } catch (error) {\r\n      console.log(\"lỗi rồi\", { error });\r\n    }\r\n  };\r\n\r\n  const renderReservation = () => {\r\n    if (reservationInfo.length === 0) {\r\n      return <span>Không có thông tin nào</span>;\r\n    } else {\r\n      return reservationInfo?.map((info, index) => {\r\n        if (info.status === \"borrowing\") {\r\n          return (\r\n            <tr key={index}>\r\n              <td>{index + 1}</td>\r\n              <td>{renderStatus(info.status)}</td>\r\n              <td>{info.title}</td>\r\n              <td>{info.authors}</td>\r\n              <td>{info.categories}</td>\r\n              <td>{renderDate(info.dueDate)}</td>\r\n            </tr>\r\n          );\r\n        }\r\n      });\r\n    }\r\n  };\r\n  const renderReturned = () => {\r\n    if (reservationInfo.length === 0) {\r\n      return <span>Không có thông tin nào</span>;\r\n    } else {\r\n      return reservationInfo?.map((info, index) => {\r\n        if (info.status === \"returned\") {\r\n          return (\r\n            <tr key={index}>\r\n              <td>{index + 1}</td>\r\n              <td>{renderStatus(info.status)}</td>\r\n              <td>{info.title}</td>\r\n              <td>{info.authors}</td>\r\n              <td>{info.categories}</td>\r\n              <td>{renderDateNow(info.returnedDate)}</td>\r\n            </tr>\r\n          );\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <legend className=\"form_name\">Những sách đang mượn</legend>\r\n      <Table striped bordered hover style={{ textAlign: \"center\" }}>\r\n        <thead>\r\n          <tr>\r\n            <th>STT</th>\r\n            <th>Trạng thái</th>\r\n            <th>Tên sách</th>\r\n            <th>Tên tác giả</th>\r\n            <th>Thể loại</th>\r\n            <th>Hạn trả sách</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>{renderReservation()}</tbody>\r\n      </Table>\r\n      <legend className=\"form_name\">Những sách đã trả</legend>\r\n      <Table striped bordered hover style={{ textAlign: \"center\" }}>\r\n        <thead>\r\n          <tr>\r\n            <th>STT</th>\r\n            <th>Trạng thái</th>\r\n            <th>Tên sách</th>\r\n            <th>Tên tác giả</th>\r\n            <th>Thể loại</th>\r\n            <th>Ngày trả sách</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>{renderReturned()}</tbody>\r\n      </Table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ViewHistoryReserved;\r\n","import Logout from \"components/Auth/Logout/Logout\";\r\nimport VerifyEmail from \"components/Auth/VerifyEmail/VerifyEmail\";\r\nimport MyCarts from \"components/User/MyCarts/MyCarts\";\r\nimport Profile from \"components/User/Profile/Profile\";\r\nimport Reservation from \"components/User/Reservation/Reservation\";\r\nimport ResetPassword from \"components/User/ResetPassword/ResetPassword\";\r\nimport ViewHistoryReserved from \"components/User/ViewHistoryReserved/ViewHistoryReserved\";\r\nimport React from \"react\";\r\nimport { FaUserCircle } from \"react-icons/fa\";\r\nimport { Route, Switch, useRouteMatch } from \"react-router\";\r\nimport { Link, NavLink } from \"react-router-dom\";\r\nimport \"./User.scss\";\r\n\r\nfunction User() {\r\n  let { path } = useRouteMatch();\r\n\r\n  return (\r\n    <div className=\"mainUser\">\r\n      <div className=\"mainUser_nav\">\r\n        <div className=\"mainUser_nav_icon\">\r\n          <FaUserCircle />\r\n        </div>\r\n        <div className=\"mainUser_nav_links\">\r\n          <Link to=\"/\">Trang Chủ</Link>\r\n          <NavLink to={`${path}`} activeClassName=\"active\" exact={true}>\r\n            Thông Tin Cá Nhân\r\n          </NavLink>\r\n          <NavLink\r\n            to={`${path}/reset-password`}\r\n            activeClassName=\"active\"\r\n            exact={true}\r\n          >\r\n            Thay Đổi Mật Khẩu\r\n          </NavLink>\r\n          <NavLink to={`${path}/carts`} activeClassName=\"active\">\r\n            Giỏ Hàng\r\n          </NavLink>\r\n          <NavLink to={`${path}/reservation`} activeClassName=\"active\">\r\n            Xem Lịch Hẹn\r\n          </NavLink>\r\n          <NavLink to={`${path}/history`} activeClassName=\"active\">\r\n            Lịch sử mượn trả sách\r\n          </NavLink>\r\n          <Logout />\r\n        </div>\r\n      </div>\r\n      <div className=\"mainUser_contents\">\r\n        <div className=\"mainUser_contents_containers\">\r\n          <Switch>\r\n            <Route\r\n              path={`${path}`}\r\n              component={() => <Profile />}\r\n              exact={true}\r\n            />\r\n            <Route\r\n              path={`${path}/reset-password`}\r\n              component={() => <ResetPassword />}\r\n              exact={true}\r\n            />\r\n\r\n            {/* Dùng để verify email */}\r\n            <Route\r\n              path={`${path}/profile/verify`}\r\n              component={() => <VerifyEmail />}\r\n              exact={true}\r\n            />\r\n            <Route\r\n              path={`${path}/carts`}\r\n              component={() => <MyCarts />}\r\n              exact={true}\r\n            />\r\n            <Route\r\n              path={`${path}/reservation`}\r\n              component={() => <Reservation />}\r\n              exact={true}\r\n            />\r\n            <Route\r\n              path={`${path}/history`}\r\n              component={() => <ViewHistoryReserved />}\r\n              exact={true}\r\n            />\r\n          </Switch>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default User;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Redirect, Route } from \"react-router\";\r\nimport { selectUser } from \"reducers/authSlice\";\r\n\r\nfunction AdminRoute({ children, ...rest }) {\r\n  const isAdmin = useSelector(selectUser);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={() =>\r\n        isAdmin && isAdmin.role === \"admin\" ? (\r\n          children\r\n        ) : (\r\n          <Redirect to={\"/login\"} exact={true} />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default AdminRoute;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Redirect, Route } from \"react-router\";\r\nimport { selectUser } from \"reducers/authSlice\";\r\n\r\nfunction AuthRoute({ children, ...rest }) {\r\n  const isLogin = useSelector(selectUser);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={() =>\r\n        isLogin && isLogin.status === \"active\" ? (\r\n          <Redirect to={\"/\"} exact={true} />\r\n        ) : (\r\n          children\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default AuthRoute;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Redirect, Route } from \"react-router\";\r\nimport { selectUser } from \"reducers/authSlice\";\r\n\r\nfunction LibrarianRoute({ children, ...rest }) {\r\n  const isAdmin = useSelector(selectUser);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={() =>\r\n        isAdmin && isAdmin.role === \"librarian\" ? (\r\n          children\r\n        ) : (\r\n          <Redirect to={\"/login\"} exact={true} />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default LibrarianRoute;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Redirect, Route } from \"react-router\";\r\nimport { selectUser } from \"reducers/authSlice\";\r\n\r\nfunction UserRoute({ children, ...rest }) {\r\n  const isAdmin = useSelector(selectUser);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={() =>\r\n        isAdmin && isAdmin.role === \"user\" ? (\r\n          children\r\n        ) : (\r\n          <Redirect to={\"/login\"} exact={true} />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default UserRoute;\r\n","import ForgotPassword from \"components/Auth/ForgotPassword/ForgotPassword\";\r\nimport Login from \"components/Auth/Login/Login\";\r\nimport Register from \"components/Auth/Register/Register\";\r\nimport RenewPassword from \"components/Auth/RenewPassword/RenewPassword\";\r\nimport Admin from \"containers/Admin/Admin\";\r\nimport HomePage from \"containers/HomePage/MainHome/MainHome\";\r\nimport NotFound from \"containers/HomePage/NotFound/NotFound\";\r\nimport Librarian from \"containers/Librarian/Librarian\";\r\nimport User from \"containers/User/User\";\r\nimport React from \"react\";\r\nimport { BrowserRouter, Redirect, Route, Switch } from \"react-router-dom\";\r\nimport AdminRoute from \"routes/customRoutes/AdminRoute\";\r\nimport AuthRoute from \"routes/customRoutes/AuthRoute\";\r\nimport LibrarianRoute from \"routes/customRoutes/LibrarianRoute\";\r\nimport UserRoute from \"routes/customRoutes/UserRoute\";\r\n\r\nfunction App() {\r\n  return (\r\n    <BrowserRouter basename=\"/\">\r\n      <Switch>\r\n        <Redirect from=\"/\" to=\"/home\" exact={true} />\r\n\r\n        {/* for home route */}\r\n        <Route path=\"/home\">\r\n          <HomePage />\r\n        </Route>\r\n\r\n        {/* for admin route */}\r\n        <AdminRoute path={[\"/admin\", \"/dash-board\"]}>\r\n          <Admin />\r\n        </AdminRoute>\r\n\r\n        {/* for librarian route */}\r\n        <LibrarianRoute path=\"/librarian\">\r\n          <Librarian />\r\n        </LibrarianRoute>\r\n\r\n        {/* for user route */}\r\n        <UserRoute path=\"/user\">\r\n          <User />\r\n        </UserRoute>\r\n\r\n        {/* Login form */}\r\n        <AuthRoute path=\"/login\">\r\n          <Login />\r\n        </AuthRoute>\r\n        <AuthRoute path=\"/register\">\r\n          <Register />\r\n        </AuthRoute>\r\n        <AuthRoute path=\"/forgot-password\" exact={true}>\r\n          <ForgotPassword />\r\n        </AuthRoute>\r\n        <AuthRoute path=\"/forgot-password/renew-password\">\r\n          <RenewPassword />\r\n        </AuthRoute>\r\n\r\n        <Route>\r\n          <NotFound />\r\n        </Route>\r\n      </Switch>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport authReducer from \"./authSlice\";\r\nimport booksReducer from \"./bookSlice\";\r\nimport adminReducer from \"./adminSlice\";\r\nimport librarianReducer from \"./librarianSlice\";\r\nimport userReducer from \"./userSlice\";\r\n\r\nexport default configureStore({\r\n  reducer: {\r\n    auth: authReducer,\r\n    books: booksReducer,\r\n    admin: adminReducer,\r\n    librarian: librarianReducer,\r\n    user: userReducer,\r\n  },\r\n});\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\n\r\n//redux toolkit\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"reducers/store\";\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}